!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs/Subject"),require("@aws-amplify/core"),require("lodash"),require("@aws-sdk/credential-provider-node"),require("@aws-sdk/region-provider"),require("@aws-sdk/hash-node"),require("@aws-sdk/node-http-handler"),require("@aws-sdk/url-parser-node"),require("@aws-sdk/util-body-length-node"),require("@aws-sdk/stream-collector-node"),require("@aws-sdk/util-utf8-node"),require("@aws-sdk/util-base64-node"),require("@aws-sdk/util-user-agent-node"),require("@aws-sdk/config-resolver"),require("@aws-sdk/middleware-content-length"),require("@aws-sdk/middleware-host-header"),require("@aws-sdk/middleware-retry"),require("@aws-sdk/middleware-signing"),require("@aws-sdk/middleware-user-agent"),require("@aws-sdk/smithy-client"),require("@aws-sdk/protocol-http"),require("@aws-sdk/middleware-serde"),require("uuid"),require("@aws-sdk/eventstream-serde-node"),require("@aws-sdk/eventstream-serde-config-resolver"),require("crypto-js/core"),require("crypto-js/lib-typedarrays"),require("crypto-js/sha256"),require("crypto-js/hmac-sha256"),require("crypto-js/enc-base64"),require("js-cookie"),require("@aws-sdk/hash-stream-node"),require("@aws-sdk/middleware-bucket-endpoint"),require("@aws-sdk/middleware-expect-continue"),require("@aws-sdk/middleware-sdk-s3"),require("@aws-sdk/xml-builder"),require("fast-xml-parser"),require("@aws-sdk/middleware-ssec"),require("@aws-sdk/middleware-location-constraint"),require("@aws-sdk/middleware-apply-body-checksum"),require("@aws-sdk/util-format-url"),require("@aws-sdk/util-create-request"),require("@aws-sdk/s3-request-presigner"),require("@aws-sdk/querystring-builder"),require("axios"),require("@aws-sdk/stream-collector-native"),require("zen-observable"),require("paho-mqtt"),require("@aws-amplify/ui")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","rxjs/Subject","@aws-amplify/core","lodash","@aws-sdk/credential-provider-node","@aws-sdk/region-provider","@aws-sdk/hash-node","@aws-sdk/node-http-handler","@aws-sdk/url-parser-node","@aws-sdk/util-body-length-node","@aws-sdk/stream-collector-node","@aws-sdk/util-utf8-node","@aws-sdk/util-base64-node","@aws-sdk/util-user-agent-node","@aws-sdk/config-resolver","@aws-sdk/middleware-content-length","@aws-sdk/middleware-host-header","@aws-sdk/middleware-retry","@aws-sdk/middleware-signing","@aws-sdk/middleware-user-agent","@aws-sdk/smithy-client","@aws-sdk/protocol-http","@aws-sdk/middleware-serde","uuid","@aws-sdk/eventstream-serde-node","@aws-sdk/eventstream-serde-config-resolver","crypto-js/core","crypto-js/lib-typedarrays","crypto-js/sha256","crypto-js/hmac-sha256","crypto-js/enc-base64","js-cookie","@aws-sdk/hash-stream-node","@aws-sdk/middleware-bucket-endpoint","@aws-sdk/middleware-expect-continue","@aws-sdk/middleware-sdk-s3","@aws-sdk/xml-builder","fast-xml-parser","@aws-sdk/middleware-ssec","@aws-sdk/middleware-location-constraint","@aws-sdk/middleware-apply-body-checksum","@aws-sdk/util-format-url","@aws-sdk/util-create-request","@aws-sdk/s3-request-presigner","@aws-sdk/querystring-builder","axios","@aws-sdk/stream-collector-native","zen-observable","paho-mqtt","@aws-amplify/ui"],t):t((e=e||self)["aws-amplify-angular"]={},e.ng.core,e.ng.common,e.Subject,e.Amplify,e._,e.credentialProviderNode,e.regionProvider,e.hashNode,e.nodeHttpHandler,e.urlParserNode,e.utilBodyLengthNode,e.streamCollectorNode,e.utilUtf8Node,e.utilBase64Node,e.utilUserAgentNode,e.configResolver,e.middlewareContentLength,e.middlewareHostHeader,e.middlewareRetry,e.middlewareSigning,e.middlewareUserAgent,e.smithyClient,e.protocolHttp,e.middlewareSerde,e.uuid,e.eventstreamSerdeNode,e.eventstreamSerdeConfigResolver,e.CryptoJS,e.libTypedarrays,e.SHA256,e.HmacSHA256,e.Base64,e.Cookies,e.hashStreamNode,e.middlewareBucketEndpoint,e.middlewareExpectContinue,e.middlewareSdkS3,e.xmlBuilder,e.fastXmlParser,e.middlewareSsec,e.middlewareLocationConstraint,e.middlewareApplyBodyChecksum,e.utilFormatUrl,e.utilCreateRequest,e.s3RequestPresigner,e.querystringBuilder,e.axios,e.streamCollectorNative,e.zenObservable,e.Paho,e.AmplifyUI)}(this,function(e,h,t,v,x,b,n,r,o,i,s,a,u,c,l,p,d,f,m,g,y,w,_,S,C,E,I,A,P,k,O,T,N,U,M,R,D,F,L,j,B,V,q,z,H,K,G,W,$,J,Y,Z){"use strict";var Q="default"in x?x.default:x;P=P&&Object.prototype.hasOwnProperty.call(P,"default")?P.default:P,k=k&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k,O=O&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O,T=T&&Object.prototype.hasOwnProperty.call(T,"default")?T.default:T,N=N&&Object.prototype.hasOwnProperty.call(N,"default")?N.default:N,W=W&&Object.prototype.hasOwnProperty.call(W,"default")?W.default:W,J=J&&Object.prototype.hasOwnProperty.call(J,"default")?J.default:J;var X=function(e,t){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function ee(e,t){function n(){this.constructor=e}X(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var te=function(){return(te=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function ne(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;0<=a;a--)(o=e[a])&&(s=(i<3?o(s):3<i?o(t,n,s):o(t,n))||s);return 3<i&&s&&Object.defineProperty(t,n,s),s}function re(n,r){return function(e,t){r(e,t,n)}}function oe(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function ie(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function se(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function ae(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ue(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function ce(e){return"function"==typeof e}var le=!1,pe={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,le=e},get useDeprecatedSynchronousErrorHandling(){return le}};function de(e){setTimeout(function(){throw e},0)}var he={closed:!0,next:function(e){},error:function(e){if(pe.useDeprecatedSynchronousErrorHandling)throw e;de(e)},complete:function(){}},fe=Array.isArray||function(e){return e&&"number"==typeof e.length};function me(e){return null!==e&&"object"==typeof e}var ge,ye=(we.prototype=Object.create(Error.prototype),we),ve=(be.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this._parentOrParents,n=this._unsubscribe,r=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof be)t.remove(this);else if(null!==t)for(var o=0;o<t.length;++o)t[o].remove(this);if(ce(n))try{n.call(this)}catch(t){e=t instanceof ye?_e(t.errors):[t]}if(fe(r)){o=-1;for(var i=r.length;++o<i;){var s=r[o];if(me(s))try{s.unsubscribe()}catch(t){e=e||[],t instanceof ye?e=e.concat(_e(t.errors)):e.push(t)}}}if(e)throw new ye(e)}},be.prototype.add=function(e){var t=e;if(!e)return be.EMPTY;switch(typeof e){case"function":t=new be(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof be)){var n=t;(t=new be)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var r=t._parentOrParents;if(null===r)t._parentOrParents=this;else if(r instanceof be){if(r===this)return t;t._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return t;r.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[t]:o.push(t),t},be.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},be.EMPTY=((ge=new be).closed=!0,ge),be);function be(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}function we(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}function _e(e){return e.reduce(function(e,t){return e.concat(t instanceof ye?t.errors:t)},[])}var Se,Ce,Ee="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),Ie=(ee(ke,Ce=ve),ke.prototype[Ee]=function(){return this},ke.create=function(e,t,n){var r=new ke(e,t,n);return r.syncErrorThrowable=!1,r},ke.prototype.next=function(e){this.isStopped||this._next(e)},ke.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},ke.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},ke.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,Ce.prototype.unsubscribe.call(this))},ke.prototype._next=function(e){this.destination.next(e)},ke.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},ke.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},ke.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},ke),Ae=(ee(Pe,Se=Ie),Pe.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;pe.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},Pe.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=pe.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):de(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;de(e)}}},Pe.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};pe.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,n):this.__tryOrUnsub(n),this.unsubscribe()}else this.unsubscribe()}},Pe.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),pe.useDeprecatedSynchronousErrorHandling)throw e;de(e)}},Pe.prototype.__tryOrSetError=function(e,t,n){if(!pe.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return pe.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):(de(t),!0)}return!1},Pe.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},Pe);function Pe(e,t,n,r){var o,i=Se.call(this)||this;i._parentSubscriber=e;var s=i;return ce(t)?o=t:t&&(o=t.next,n=t.error,r=t.complete,t!==he&&(ce((s=Object.create(t)).unsubscribe)&&i.add(s.unsubscribe.bind(s)),s.unsubscribe=i.unsubscribe.bind(i))),i._context=s,i._next=o,i._error=n,i._complete=r,i}function ke(e,t,n){var r=Ce.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=he;break;case 1:if(!e){r.destination=he;break}if("object"==typeof e){e instanceof ke?(r.syncErrorThrowable=e.syncErrorThrowable,(r.destination=e).add(r)):(r.syncErrorThrowable=!0,r.destination=new Ae(r,e));break}default:r.syncErrorThrowable=!0,r.destination=new Ae(r,e,t,n)}return r}var Oe="function"==typeof Symbol&&Symbol.observable||"@@observable";var Te=(xe.prototype.lift=function(e){var t=new xe;return t.source=this,t.operator=e,t},xe.prototype.subscribe=function(e,t,n){var r=this.operator,o=function(e,t,n){if(e){if(e instanceof Ie)return e;if(e[Ee])return e[Ee]()}return e||t||n?new Ie(e,t,n):new Ie(he)}(e,t,n);if(r?o.add(r.call(o,this.source)):o.add(this.source||pe.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),pe.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},xe.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){pe.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(e){for(;e;){var t=e.closed,n=e.destination,r=e.isStopped;if(t||r)return;e=n&&n instanceof Ie?n:null}return 1}(t)?t.error(e):console.warn(e)}},xe.prototype.forEach=function(r,e){var o=this;return new(e=Ne(e))(function(e,t){var n;n=o.subscribe(function(e){try{r(e)}catch(e){t(e),n&&n.unsubscribe()}},t,e)})},xe.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},xe.prototype[Oe]=function(){return this},xe.prototype.pipe=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this:(0===(t=e).length?function(e){return e}:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)})(this)},xe.prototype.toPromise=function(e){var r=this;return new(e=Ne(e))(function(e,t){var n;r.subscribe(function(e){return n=e},function(e){return t(e)},function(){return e(n)})})},xe.create=function(e){return new xe(e)},xe);function xe(e){this._isScalar=!1,e&&(this._subscribe=e)}function Ne(e){if(!(e=e||Promise))throw new Error("no Promise impl found");return e}function Ue(t,n){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new Re(t,n))}}var Me,Re=(Le.prototype.call=function(e,t){return t.subscribe(new De(e,this.project,this.thisArg))},Le),De=(ee(Fe,Me=Ie),Fe.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},Fe);function Fe(e,t,n){var r=Me.call(this,e)||this;return r.project=t,r.count=0,r.thisArg=n||r,r}function Le(e,t){this.project=e,this.thisArg=t}var je="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Be=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Ve(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var qe=function(e){if(e&&"function"==typeof e[Oe])return i=e,function(e){var t=i[Oe]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Be(e))return o=e,function(e){for(var t=0,n=o.length;t<n&&!e.closed;t++)e.next(o[t]);e.complete()};if(Ve(e))return n=e,function(t){return n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,de),t};if(e&&"function"==typeof e[je])return r=e,function(e){for(var t=r[je]();;){var n=t.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof t.return&&e.add(function(){t.return&&t.return()}),e};var r,n,o,i,t=me(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function ze(e,t){return t?function(e,t){if(null!=e){if(e&&"function"==typeof e[Oe])return a=e,u=t,new Te(function(t){var n=new ve;return n.add(u.schedule(function(){var e=a[Oe]();n.add(e.subscribe({next:function(e){n.add(u.schedule(function(){return t.next(e)}))},error:function(e){n.add(u.schedule(function(){return t.error(e)}))},complete:function(){n.add(u.schedule(function(){return t.complete()}))}}))})),n});if(Ve(e))return i=e,s=t,new Te(function(t){var n=new ve;return n.add(s.schedule(function(){return i.then(function(e){n.add(s.schedule(function(){t.next(e),n.add(s.schedule(function(){return t.complete()}))}))},function(e){n.add(s.schedule(function(){return t.error(e)}))})})),n});if(Be(e))return r=e,o=t,new Te(function(e){var t=new ve,n=0;return t.add(o.schedule(function(){n!==r.length?(e.next(r[n++]),e.closed||t.add(this.schedule())):e.complete()})),t});if(e&&"function"==typeof e[je]||"string"==typeof e)return function(t,n){if(!t)throw new Error("Iterable cannot be null");return new Te(function(r){var o,e=new ve;return e.add(function(){o&&"function"==typeof o.return&&o.return()}),e.add(n.schedule(function(){o=t[je](),e.add(n.schedule(function(){if(!r.closed){var e,t;try{var n=o.next();e=n.value,t=n.done}catch(e){return void r.error(e)}t?r.complete():(r.next(e),this.schedule())}}))})),e})}(e,t)}var r,o,i,s,a,u;throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof Te?e:new Te(qe(e))}function He(u,c){return new Te(function(r){var o=u.length;if(0!==o)for(var i=new Array(o),s=0,a=0,e=function(t){var e=ze(u[t]),n=!1;r.add(e.subscribe({next:function(e){n||(n=!0,a++),i[t]=e},error:function(e){return r.error(e)},complete:function(){++s!==o&&n||(a===o&&r.next(c?c.reduce(function(e,t,n){return e[t]=i[n],e},{}):i),r.complete())}}))},t=0;t<o;t++)e(t);else r.complete()})}var Ke=null,Ge=(Object.defineProperty(We.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),We);function We(){this.resourceLoaderType=null}var $e,Je=(ee(Ye,$e=Ge),Ye.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},Ye.prototype.resolveAndSetHref=function(e,t,n){e.href=null==n?t:t+"/../"+n},Ye.prototype.supportsDOMEvents=function(){return!0},Ye.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},Ye.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},Ye.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},Ye.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},Ye);function Ye(){var t=$e.call(this)||this;t._animationPrefix=null,t._transitionEnd=null;try{var n=t.createElement("div",document);if(null!=t.getStyle(n,"animationName"))t._animationPrefix="";else for(var e=["Webkit","Moz","O","ms"],r=0;r<e.length;r++)if(null!=t.getStyle(n,e[r]+"AnimationName")){t._animationPrefix="-"+e[r].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(e){null!=t.getStyle(n,e)&&(t._transitionEnd=o[e])})}catch(e){t._animationPrefix=null,t._transitionEnd=null}return t}var Ze,Qe={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Xe={"\b":"Backspace","\t":"Tab","":"Delete","":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},et={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","Â":"NumLock"};h["Éµglobal"].Node&&(Ze=h["Éµglobal"].Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});var tt,nt=(ee(rt,tt=Je),rt.prototype.parse=function(e){throw new Error("parse not implemented")},rt.makeCurrent=function(){var e;e=new rt,Ke=Ke||e},rt.prototype.hasProperty=function(e,t){return t in e},rt.prototype.setProperty=function(e,t,n){e[t]=n},rt.prototype.getProperty=function(e,t){return e[t]},rt.prototype.invoke=function(e,t,n){e[t].apply(e,n)},rt.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},rt.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},rt.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},rt.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(rt.prototype,"attrToPropMap",{get:function(){return Qe},enumerable:!0,configurable:!0}),rt.prototype.contains=function(e,t){return Ze.call(e,t)},rt.prototype.querySelector=function(e,t){return e.querySelector(t)},rt.prototype.querySelectorAll=function(e,t){return e.querySelectorAll(t)},rt.prototype.on=function(e,t,n){e.addEventListener(t,n,!1)},rt.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},rt.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},rt.prototype.createMouseEvent=function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t},rt.prototype.createEvent=function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t},rt.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},rt.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},rt.prototype.getInnerHTML=function(e){return e.innerHTML},rt.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},rt.prototype.getOuterHTML=function(e){return e.outerHTML},rt.prototype.nodeName=function(e){return e.nodeName},rt.prototype.nodeValue=function(e){return e.nodeValue},rt.prototype.type=function(e){return e.type},rt.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},rt.prototype.firstChild=function(e){return e.firstChild},rt.prototype.nextSibling=function(e){return e.nextSibling},rt.prototype.parentElement=function(e){return e.parentNode},rt.prototype.childNodes=function(e){return e.childNodes},rt.prototype.childNodesAsList=function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n},rt.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},rt.prototype.appendChild=function(e,t){e.appendChild(t)},rt.prototype.removeChild=function(e,t){e.removeChild(t)},rt.prototype.replaceChild=function(e,t,n){e.replaceChild(t,n)},rt.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},rt.prototype.insertBefore=function(e,t,n){e.insertBefore(n,t)},rt.prototype.insertAllBefore=function(t,n,e){e.forEach(function(e){return t.insertBefore(e,n)})},rt.prototype.insertAfter=function(e,t,n){e.insertBefore(n,t.nextSibling)},rt.prototype.setInnerHTML=function(e,t){e.innerHTML=t},rt.prototype.getText=function(e){return e.textContent},rt.prototype.setText=function(e,t){e.textContent=t},rt.prototype.getValue=function(e){return e.value},rt.prototype.setValue=function(e,t){e.value=t},rt.prototype.getChecked=function(e){return e.checked},rt.prototype.setChecked=function(e,t){e.checked=t},rt.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},rt.prototype.createTemplate=function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t},rt.prototype.createElement=function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)},rt.prototype.createElementNS=function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)},rt.prototype.createTextNode=function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)},rt.prototype.createScriptTag=function(e,t,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(e,t),r},rt.prototype.createStyleElement=function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n},rt.prototype.createShadowRoot=function(e){return e.createShadowRoot()},rt.prototype.getShadowRoot=function(e){return e.shadowRoot},rt.prototype.getHost=function(e){return e.host},rt.prototype.clone=function(e){return e.cloneNode(!0)},rt.prototype.getElementsByClassName=function(e,t){return e.getElementsByClassName(t)},rt.prototype.getElementsByTagName=function(e,t){return e.getElementsByTagName(t)},rt.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},rt.prototype.addClass=function(e,t){e.classList.add(t)},rt.prototype.removeClass=function(e,t){e.classList.remove(t)},rt.prototype.hasClass=function(e,t){return e.classList.contains(t)},rt.prototype.setStyle=function(e,t,n){e.style[t]=n},rt.prototype.removeStyle=function(e,t){e.style[t]=""},rt.prototype.getStyle=function(e,t){return e.style[t]},rt.prototype.hasStyle=function(e,t,n){var r=this.getStyle(e,t)||"";return n?r==n:0<r.length},rt.prototype.tagName=function(e){return e.tagName},rt.prototype.attributeMap=function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var o=n.item(r);t.set(o.name,o.value)}return t},rt.prototype.hasAttribute=function(e,t){return e.hasAttribute(t)},rt.prototype.hasAttributeNS=function(e,t,n){return e.hasAttributeNS(t,n)},rt.prototype.getAttribute=function(e,t){return e.getAttribute(t)},rt.prototype.getAttributeNS=function(e,t,n){return e.getAttributeNS(t,n)},rt.prototype.setAttribute=function(e,t,n){e.setAttribute(t,n)},rt.prototype.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},rt.prototype.removeAttribute=function(e,t){e.removeAttribute(t)},rt.prototype.removeAttributeNS=function(e,t,n){e.removeAttributeNS(t,n)},rt.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},rt.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},rt.prototype.getDefaultDocument=function(){return document},rt.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},rt.prototype.getTitle=function(e){return e.title},rt.prototype.setTitle=function(e,t){e.title=t||""},rt.prototype.elementMatches=function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))},rt.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},rt.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},rt.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},rt.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},rt.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},rt.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},rt.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},rt.prototype.adoptNode=function(e){return document.adoptNode(e)},rt.prototype.getHref=function(e){return e.getAttribute("href")},rt.prototype.getEventKey=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&et.hasOwnProperty(t)&&(t=et[t]))}return Xe[t]||t},rt.prototype.getGlobalEventTarget=function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null},rt.prototype.getHistory=function(){return window.history},rt.prototype.getLocation=function(){return window.location},rt.prototype.getBaseHref=function(e){var t,n=(it=it||document.querySelector("base"))?it.getAttribute("href"):null;return null==n?null:(t=n,(ot=ot||document.createElement("a")).setAttribute("href",t),"/"===ot.pathname.charAt(0)?ot.pathname:"/"+ot.pathname)},rt.prototype.resetBaseElement=function(){it=null},rt.prototype.getUserAgent=function(){return window.navigator.userAgent},rt.prototype.setData=function(e,t,n){this.setAttribute(e,"data-"+t,n)},rt.prototype.getData=function(e,t){return this.getAttribute(e,"data-"+t)},rt.prototype.getComputedStyle=function(e){return getComputedStyle(e)},rt.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},rt.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},rt.prototype.supportsCookies=function(){return!0},rt.prototype.getCookie=function(e){return t["ÉµparseCookieValue"](document.cookie,e)},rt.prototype.setCookie=function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)},rt);function rt(){return null!==tt&&tt.apply(this,arguments)||this}var ot,it=null,st=t.DOCUMENT;function at(){return window.history.pushState}var ut,ct=(ee(lt,ut=t.PlatformLocation),lt.prototype._init=function(){this.location=Ke.getLocation(),this._history=Ke.getHistory()},lt.prototype.getBaseHrefFromDOM=function(){return Ke.getBaseHref(this._doc)},lt.prototype.onPopState=function(e){Ke.getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},lt.prototype.onHashChange=function(e){Ke.getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(lt.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(lt.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(lt.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),lt.prototype.pushState=function(e,t,n){at()?this._history.pushState(e,t,n):this.location.hash=n},lt.prototype.replaceState=function(e,t,n){at()?this._history.replaceState(e,t,n):this.location.hash=n},lt.prototype.forward=function(){this._history.forward()},lt.prototype.back=function(){this._history.back()},lt.decorators=[{type:h.Injectable}],lt.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[st]}]}]},lt);function lt(e){var t=ut.call(this)||this;return t._doc=e,t._init(),t}h.Injectable,new h.InjectionToken("TRANSITION_ID");var pt=(dt.init=function(){h.setTestabilityGetter(new dt)},dt.prototype.addToWindow=function(r){h["Éµglobal"].getAngularTestability=function(e,t){void 0===t&&(t=!0);var n=r.findTestabilityInTree(e,t);if(null==n)throw new Error("Could not find testability for element.");return n},h["Éµglobal"].getAllAngularTestabilities=function(){return r.getAllTestabilities()},h["Éµglobal"].getAllAngularRootElements=function(){return r.getAllRootElements()},h["Éµglobal"].frameworkStabilizers||(h["Éµglobal"].frameworkStabilizers=[]),h["Éµglobal"].frameworkStabilizers.push(function(t){function n(e){o=o||e,0==--r&&t(o)}var e=h["Éµglobal"].getAllAngularTestabilities(),r=e.length,o=!1;e.forEach(function(e){e.whenStable(n)})})},dt.prototype.findTestabilityInTree=function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?Ke.isShadowRoot(t)?this.findTestabilityInTree(e,Ke.getHost(t),!0):this.findTestabilityInTree(e,Ke.parentElement(t),!0):null},dt);function dt(){}h.Injectable;h.ApplicationRef,h.NgZone;h.APP_INITIALIZER,h.NgProbeToken,new h.Optional;var ht=new h.InjectionToken("EventManagerPlugins");ft.prototype.addEventListener=function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)},ft.prototype.addGlobalEventListener=function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)},ft.prototype.getZone=function(){return this._zone},ft.prototype._findPluginFor=function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var o=n[r];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error("No event manager plugin found for event "+e)},ft.decorators=[{type:h.Injectable}],ft.ctorParameters=function(){return[{type:Array,decorators:[{type:h.Inject,args:[ht]}]},{type:h.NgZone}]};function ft(e,t){var n=this;this._zone=t,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=n}),this._plugins=e.slice().reverse()}var mt=(gt.prototype.addGlobalEventListener=function(e,t,n){var r=Ke.getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target "+r+" for event "+t);return this.addEventListener(r,t,n)},gt);function gt(e){this._doc=e}var yt=(vt.prototype.addStyles=function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)},vt.prototype.onStylesAdded=function(e){},vt.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},vt.decorators=[{type:h.Injectable}],vt.ctorParameters=function(){return[]},vt);function vt(){this._stylesSet=new Set}var bt;ee(wt,bt=yt),wt.prototype._addStylesToHost=function(e,n){var r=this;e.forEach(function(e){var t=r._doc.createElement("style");t.textContent=e,r._styleNodes.add(n.appendChild(t))})},wt.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},wt.prototype.removeHost=function(e){this._hostNodes.delete(e)},wt.prototype.onStylesAdded=function(t){var n=this;this._hostNodes.forEach(function(e){return n._addStylesToHost(t,e)})},wt.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return Ke.remove(e)})},wt.decorators=[{type:h.Injectable}],wt.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[st]}]}]};function wt(e){var t=bt.call(this)||this;return t._doc=e,t._hostNodes=new Set,t._styleNodes=new Set,t._hostNodes.add(e.head),t}var _t={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},St=/%COMP%/g;function Ct(e,t,n){for(var r=0;r<t.length;r++){var o=t[r];Array.isArray(o)?Ct(e,o,n):(o=o.replace(St,e),n.push(o))}return n}function Et(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}h.Injectable;var It=(At.prototype.destroy=function(){},At.prototype.createElement=function(e,t){return t?document.createElementNS(_t[t],e):document.createElement(e)},At.prototype.createComment=function(e){return document.createComment(e)},At.prototype.createText=function(e){return document.createTextNode(e)},At.prototype.appendChild=function(e,t){e.appendChild(t)},At.prototype.insertBefore=function(e,t,n){e&&e.insertBefore(t,n)},At.prototype.removeChild=function(e,t){e&&e.removeChild(t)},At.prototype.selectRootElement=function(e){var t="string"==typeof e?document.querySelector(e):e;if(!t)throw new Error('The selector "'+e+'" did not match any elements');return t.textContent="",t},At.prototype.parentNode=function(e){return e.parentNode},At.prototype.nextSibling=function(e){return e.nextSibling},At.prototype.setAttribute=function(e,t,n,r){if(r){t=r+":"+t;var o=_t[r];o?e.setAttributeNS(o,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)},At.prototype.removeAttribute=function(e,t,n){if(n){var r=_t[n];r?e.removeAttributeNS(r,t):e.removeAttribute(n+":"+t)}else e.removeAttribute(t)},At.prototype.addClass=function(e,t){e.classList.add(t)},At.prototype.removeClass=function(e,t){e.classList.remove(t)},At.prototype.setStyle=function(e,t,n,r){r&h.RendererStyleFlags2.DashCase?e.style.setProperty(t,n,r&h.RendererStyleFlags2.Important?"important":""):e.style[t]=n},At.prototype.removeStyle=function(e,t,n){n&h.RendererStyleFlags2.DashCase?e.style.removeProperty(t):e.style[t]=""},At.prototype.setProperty=function(e,t,n){kt(t,"property"),e[t]=n},At.prototype.setValue=function(e,t){e.nodeValue=t},At.prototype.listen=function(e,t,n){return kt(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Et(n)):this.eventManager.addEventListener(e,t,Et(n))},At);function At(e){this.eventManager=e,this.data=Object.create(null)}var Pt="@".charCodeAt(0);function kt(e,t){if(e.charCodeAt(0)===Pt)throw new Error("Found the synthetic "+t+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Ot;ee(Tt,Ot=It),Tt.prototype.applyToHost=function(e){Ot.prototype.setAttribute.call(this,e,this.hostAttr,"")},Tt.prototype.createElement=function(e,t){var n=Ot.prototype.createElement.call(this,e,t);return Ot.prototype.setAttribute.call(this,n,this.contentAttr,""),n};function Tt(e,t,n){var r,o,i=Ot.call(this,e)||this,s=Ct((i.component=n).id,n.styles,[]);return t.addStyles(s),i.contentAttr=(r=n.id,"_ngcontent-%COMP%".replace(St,r)),i.hostAttr=(o=n.id,"_nghost-%COMP%".replace(St,o)),i}var xt;ee(Nt,xt=It),Nt.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},Nt.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},Nt.prototype.appendChild=function(e,t){return xt.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),t)},Nt.prototype.insertBefore=function(e,t,n){return xt.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),t,n)},Nt.prototype.removeChild=function(e,t){return xt.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),t)},Nt.prototype.parentNode=function(e){return this.nodeOrShadowRoot(xt.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))};function Nt(e,t,n,r){var o=xt.call(this,e)||this;o.sharedStylesHost=t,o.hostEl=n,o.component=r,o.shadowRoot=n.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var i=Ct(r.id,r.styles,[]),s=0;s<i.length;s++){var a=document.createElement("style");a.textContent=i[s],o.shadowRoot.appendChild(a)}return o}var Ut,Mt,Rt="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},Dt=Rt("addEventListener"),Ft=Rt("removeEventListener"),Lt={},jt="removeEventListener",Bt="__zone_symbol__propagationStopped",Vt="__zone_symbol__stopImmediatePropagation",qt="undefined"!=typeof Zone&&Zone[Rt("BLACK_LISTED_EVENTS")];function zt(e){return Ut&&Ut.hasOwnProperty(e)}function Ht(e){var t=Lt[e.type];if(t){var n=this[t];if(n){var r=[e];if(1===n.length)return(s=n[0]).zone!==Zone.current?s.zone.run(s.handler,this,r):s.handler.apply(this,r);for(var o=n.slice(),i=0;i<o.length&&!0!==e[Bt];i++){var s;(s=o[i]).zone!==Zone.current?s.zone.run(s.handler,this,r):s.handler.apply(this,r)}}}}function Kt(e,t){var n=Mt.call(this,e)||this;return n.ngZone=t,n.patchEvent(),n}qt&&(Ut={},qt.forEach(function(e){Ut[e]=e})),ee(Kt,Mt=mt),Kt.prototype.patchEvent=function(){if(Event&&Event.prototype&&!Event.prototype[Vt]){var e=Event.prototype[Vt]=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Bt]=!0),e&&e.apply(this,arguments)}}},Kt.prototype.supports=function(e){return!0},Kt.prototype.addEventListener=function(e,t,n){var r=this,o=e[Dt],i=n;if(!o||h.NgZone.isInAngularZone()&&!zt(t))e.addEventListener(t,i,!1);else{var s=Lt[t];s=s||(Lt[t]=Rt("ANGULAR"+t+"FALSE"));var a=e[s],u=a&&0<a.length;a=a||(e[s]=[]);var c=zt(t)?Zone.root:Zone.current;if(0===a.length)a.push({zone:c,handler:i});else{for(var l=!1,p=0;p<a.length;p++)if(a[p].handler===i){l=!0;break}l||a.push({zone:c,handler:i})}u||e[Dt](t,Ht,!1)}return function(){return r.removeEventListener(e,t,i)}},Kt.prototype.removeEventListener=function(e,t,n){var r=e[Ft];if(!r)return e[jt].apply(e,[t,n,!1]);var o=Lt[t],i=o&&e[o];if(!i)return e[jt].apply(e,[t,n,!1]);for(var s=!1,a=0;a<i.length;a++)if(i[a].handler===n){s=!0,i.splice(a,1);break}s?0===i.length&&r.apply(e,[t,Ht,!1]):e[jt].apply(e,[t,n,!1])},Kt.decorators=[{type:h.Injectable}],Kt.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[st]}]},{type:h.NgZone}]};var Gt,Wt={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},$t=new h.InjectionToken("HammerGestureConfig"),Jt=(Yt.prototype.buildHammer=function(e){var t=new Hammer(e);for(var n in t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0}),this.overrides)t.get(n).set(this.overrides[n]);return t},Yt.decorators=[{type:h.Injectable}],Yt.ctorParameters=function(){return[]},Yt);function Yt(){this.events=[],this.overrides={}}function Zt(e,t){var n=Gt.call(this,e)||this;return n._config=t,n}ee(Zt,Gt=mt),Zt.prototype.supports=function(e){if(!Wt.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e))return!1;if(!window.Hammer)throw new Error("Hammer.js is not loaded, can not bind "+e+" event");return!0},Zt.prototype.addEventListener=function(n,r,o){var i=this,s=this.manager.getZone();return r=r.toLowerCase(),s.runOutsideAngular(function(){function e(e){s.runGuarded(function(){o(e)})}var t=i._config.buildHammer(n);return t.on(r,e),function(){return t.off(r,e)}})},Zt.prototype.isCustomEvent=function(e){return-1<this._config.events.indexOf(e)},Zt.decorators=[{type:h.Injectable}],Zt.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[st]}]},{type:Jt,decorators:[{type:h.Inject,args:[$t]}]}]};var Qt,Xt=["alt","control","meta","shift"],en={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}};function tn(e){return Qt.call(this,e)||this}ee(tn,Qt=mt),tn.prototype.supports=function(e){return null!=tn.parseEventName(e)},tn.prototype.addEventListener=function(e,t,n){var r=tn.parseEventName(t),o=tn.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return Ke.onAndCancel(e,r.domEventName,o)})},tn.parseEventName=function(e){var n=e.toLowerCase().split("."),t=n.shift();if(0===n.length||"keydown"!==t&&"keyup"!==t)return null;var r=tn._normalizeKey(n.pop()),o="";if(Xt.forEach(function(e){var t=n.indexOf(e);-1<t&&(n.splice(t,1),o+=e+".")}),o+=r,0!=n.length||0===r.length)return null;var i={};return i.domEventName=t,i.fullKey=o,i},tn.getEventFullKey=function(t){var n="",r=Ke.getEventKey(t);return" "===(r=r.toLowerCase())?r="space":"."===r&&(r="dot"),Xt.forEach(function(e){e!=r&&(0,en[e])(t)&&(n+=e+".")}),n+=r},tn.eventCallback=function(t,n,r){return function(e){tn.getEventFullKey(e)===t&&r.runGuarded(function(){return n(e)})}},tn._normalizeKey=function(e){switch(e){case"esc":return"escape";default:return e}},tn.decorators=[{type:h.Injectable}],tn.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[st]}]}]};var nn=(rn.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(e){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(null);var n=t.response.body;return n.removeChild(n.firstChild),n},rn.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(e){return null}},rn.prototype.getInertBodyElement_InertDocument=function(e){var t=this.DOM.createElement("template");return"content"in t?(this.DOM.setInnerHTML(t,e),t):(this.DOM.setInnerHTML(this.inertBodyElement,e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},rn.prototype.stripCustomNsAttrs=function(n){var r=this;this.DOM.attributeMap(n).forEach(function(e,t){"xmlns:ns1"!==t&&0!==t.indexOf("ns1:")||r.DOM.removeAttribute(n,t)});for(var e=0,t=this.DOM.childNodesAsList(n);e<t.length;e++){var o=t[e];this.DOM.isElementNode(o)&&this.stripCustomNsAttrs(o)}},rn);function rn(e,t){this.defaultDoc=e,this.DOM=t;var n=this.DOM.createHtmlDocument();if(this.inertBodyElement=n.body,null==this.inertBodyElement){var r=this.DOM.createElement("html",n);this.inertBodyElement=this.DOM.createElement("body",n),this.DOM.appendChild(r,this.inertBodyElement),this.DOM.appendChild(n,r)}this.DOM.setInnerHTML(this.inertBodyElement,'<svg><g onload="this.parentNode.remove()"></g></svg>'),!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.DOM.setInnerHTML(this.inertBodyElement,'<svg><p><style><img src="</style><img src=x onerror=alert(1)//">'),this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return window.DOMParser}catch(e){return}}()?this.getInertBodyElement=this.getInertBodyElement_DOMParser:this.getInertBodyElement=this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}var on=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,sn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function an(e){return(e=String(e)).match(on)||e.match(sn)?e:(h.isDevMode()&&Ke.log("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function un(e){for(var t={},n=0,r=e.split(",");n<r.length;n++)t[r[n]]=!0;return t}function cn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0,o=e;r<o.length;r++){var i=o[r];for(var s in i)i.hasOwnProperty(s)&&(n[s]=!0)}return n}var ln=un("area,br,col,hr,img,wbr"),pn=un("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),dn=un("rp,rt"),hn=cn(dn,pn),fn=cn(pn,un("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),mn=cn(dn,un("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),gn=cn(ln,fn,mn,hn),yn=un("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),vn=un("srcset"),bn=un("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),wn=cn(yn,vn,bn),_n=(Sn.prototype.sanitizeChildren=function(e){for(var t=this.DOM.firstChild(e);t;)if(this.DOM.isElementNode(t)?this.startElement(t):this.DOM.isTextNode(t)?this.chars(this.DOM.nodeValue(t)):this.sanitizedSomething=!0,this.DOM.firstChild(t))t=this.DOM.firstChild(t);else for(;t;){this.DOM.isElementNode(t)&&this.endElement(t);var n=this.checkClobberedElement(t,this.DOM.nextSibling(t));if(n){t=n;break}t=this.checkClobberedElement(t,this.DOM.parentElement(t))}return this.buf.join("")},Sn.prototype.startElement=function(e){var r=this,t=this.DOM.nodeName(e).toLowerCase();gn.hasOwnProperty(t)?(this.buf.push("<"),this.buf.push(t),this.DOM.attributeMap(e).forEach(function(e,t){var n=t.toLowerCase();wn.hasOwnProperty(n)?(yn[n]&&(e=an(e)),vn[n]&&(e=String(e).split(",").map(function(e){return an(e.trim())}).join(", ")),r.buf.push(" "),r.buf.push(t),r.buf.push('="'),r.buf.push(An(e)),r.buf.push('"')):r.sanitizedSomething=!0}),this.buf.push(">")):this.sanitizedSomething=!0},Sn.prototype.endElement=function(e){var t=this.DOM.nodeName(e).toLowerCase();gn.hasOwnProperty(t)&&!ln.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))},Sn.prototype.chars=function(e){this.buf.push(An(e))},Sn.prototype.checkClobberedElement=function(e,t){if(t&&this.DOM.contains(e,t))throw new Error("Failed to sanitize html because the element is clobbered: "+this.DOM.getOuterHTML(e));return t},Sn);function Sn(){this.sanitizedSomething=!1,this.buf=[],this.DOM=Ke}var Cn,En=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,In=/([^\#-~ |!])/g;function An(e){return e.replace(/&/g,"&amp;").replace(En,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(In,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Pn,kn=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),On=/^url\(([^)]+)\)$/;function Tn(e){var t=Pn.call(this)||this;return t._doc=e,t}ee(Tn,Pn=function(){}),Tn.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case h.SecurityContext.NONE:return t;case h.SecurityContext.HTML:return t instanceof Mn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){var n=Ke,r=null;try{Cn=Cn||new nn(e,n);var o=t?String(t):"";r=Cn.getInertBodyElement(o);var i=5,s=o;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,o=s,s=n.getInnerHTML(r),r=Cn.getInertBodyElement(o)}while(o!==s);var a=new _n,u=a.sanitizeChildren(n.getTemplateContent(r)||r);return h.isDevMode()&&a.sanitizedSomething&&n.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),u}finally{if(r)for(var c=n.getTemplateContent(r)||r,l=0,p=n.childNodesAsList(c);l<p.length;l++){var d=p[l];n.removeChild(c,d)}}}(this._doc,String(t)));case h.SecurityContext.STYLE:return t instanceof Fn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),function(e){if(!(e=String(e).trim()))return"";var t=e.match(On);return t&&an(t[1])===t[1]||e.match(kn)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var o=e.charAt(r);"'"===o&&n?t=!t:'"'===o&&t&&(n=!n)}return t&&n}(e)?e:(h.isDevMode()&&Ke.log("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}(t));case h.SecurityContext.SCRIPT:if(t instanceof Bn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case h.SecurityContext.URL:return t instanceof Gn||t instanceof zn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),an(String(t)));case h.SecurityContext.RESOURCE_URL:if(t instanceof Gn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},Tn.prototype.checkNotSafeValue=function(e,t){if(e instanceof xn)throw new Error("Required a safe "+t+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},Tn.prototype.bypassSecurityTrustHtml=function(e){return new Mn(e)},Tn.prototype.bypassSecurityTrustStyle=function(e){return new Fn(e)},Tn.prototype.bypassSecurityTrustScript=function(e){return new Bn(e)},Tn.prototype.bypassSecurityTrustUrl=function(e){return new zn(e)},Tn.prototype.bypassSecurityTrustResourceUrl=function(e){return new Gn(e)},Tn.decorators=[{type:h.Injectable}],Tn.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:[st]}]}]};var xn=(Nn.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},Nn);function Nn(e){this.changingThisBreaksApplicationSecurity=e}var Un,Mn=(ee(Rn,Un=xn),Rn.prototype.getTypeName=function(){return"HTML"},Rn);function Rn(){return null!==Un&&Un.apply(this,arguments)||this}var Dn,Fn=(ee(Ln,Dn=xn),Ln.prototype.getTypeName=function(){return"Style"},Ln);function Ln(){return null!==Dn&&Dn.apply(this,arguments)||this}var jn,Bn=(ee(Vn,jn=xn),Vn.prototype.getTypeName=function(){return"Script"},Vn);function Vn(){return null!==jn&&jn.apply(this,arguments)||this}var qn,zn=(ee(Hn,qn=xn),Hn.prototype.getTypeName=function(){return"URL"},Hn);function Hn(){return null!==qn&&qn.apply(this,arguments)||this}var Kn,Gn=(ee(Wn,Kn=xn),Wn.prototype.getTypeName=function(){return"ResourceURL"},Wn);function Wn(){return null!==Kn&&Kn.apply(this,arguments)||this}var $n=[{provide:h.PLATFORM_ID,useValue:t["ÉµPLATFORM_BROWSER_ID"]},{provide:h.PLATFORM_INITIALIZER,useValue:function(){nt.makeCurrent(),pt.init()},multi:!0},{provide:t.PlatformLocation,useClass:ct,deps:[st]},{provide:st,useFactory:function(){return document},deps:[]}];h.createPlatformFactory(h.platformCore,"browser",$n),h.Injectable,new h.Version("5.2.11");var Jn=(Object.defineProperty(Yn.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),Yn.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},Yn.prototype.hasError=function(e,t){return!!this.control&&this.control.hasError(e,t)},Yn.prototype.getError=function(e,t){return this.control?this.control.getError(e,t):null},Yn);function Yn(){}var Zn,Qn=(ee(Xn,Zn=Jn),Object.defineProperty(Xn.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(Xn.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),Xn);function Xn(){return null!==Zn&&Zn.apply(this,arguments)||this}function er(e){return null==e||0===e.length}var tr=new h.InjectionToken("NgValidators"),nr=new h.InjectionToken("NgAsyncValidators"),rr=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,or=(ir.min=function(n){return function(e){if(er(e.value)||er(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}},ir.max=function(n){return function(e){if(er(e.value)||er(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&n<t?{max:{max:n,actual:e.value}}:null}},ir.required=function(e){return er(e.value)?{required:!0}:null},ir.requiredTrue=function(e){return!0===e.value?null:{required:!0}},ir.email=function(e){return er(e.value)||rr.test(e.value)?null:{email:!0}},ir.minLength=function(n){return function(e){if(er(e.value))return null;var t=e.value?e.value.length:0;return t<n?{minlength:{requiredLength:n,actualLength:t}}:null}},ir.maxLength=function(n){return function(e){var t=e.value?e.value.length:0;return n<t?{maxlength:{requiredLength:n,actualLength:t}}:null}},ir.pattern=function(e){return e?(n="string"==typeof e?(r="","^"!==e.charAt(0)&&(r+="^"),r+=e,"$"!==e.charAt(e.length-1)&&(r+="$"),new RegExp(r)):(r=e.toString(),e),function(e){if(er(e.value))return null;var t=e.value;return n.test(t)?null:{pattern:{requiredPattern:r,actualValue:t}}}):ir.nullValidator;var n,r},ir.nullValidator=function(e){return null},ir.compose=function(e){if(!e)return null;var n=e.filter(sr);return 0==n.length?null:function(e){return ur((t=e,n.map(function(e){return e(t)})));var t}},ir.composeAsync=function(e){if(!e)return null;var n=e.filter(sr);return 0==n.length?null:function(e){var t;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(fe(n))return He(n,null);if(me(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return He(r.map(function(e){return n[e]}),r)}}if("function"!=typeof e[e.length-1])return He(e,null);var o=e.pop();return He(e=1===e.length&&fe(e[0])?e[0]:e,null).pipe(Ue(function(e){return o.apply(void 0,e)}))}((t=e,n.map(function(e){return e(t)}).map(ar))).pipe(Ue(ur))}},ir);function ir(){}function sr(e){return null!=e}function ar(e){var t=h["ÉµisPromise"](e)?ze(e):e;if(!h["ÉµisObservable"](t))throw new Error("Expected validator to return Promise or Observable.");return t}function ur(e){var t=e.reduce(function(e,t){return null!=t?te({},e,t):e},{});return 0===Object.keys(t).length?null:t}var cr=new h.InjectionToken("NgValueAccessor"),lr={provide:cr,useExisting:h.forwardRef(function(){return pr}),multi:!0},pr=(dr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},dr.prototype.registerOnChange=function(e){this.onChange=e},dr.prototype.registerOnTouched=function(e){this.onTouched=e},dr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},dr=ne([h.Directive({selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[lr]}),oe("design:paramtypes",[h.Renderer2,h.ElementRef])],dr));function dr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}var hr={provide:cr,useExisting:h.forwardRef(function(){return mr}),multi:!0},fr=new h.InjectionToken("CompositionEventMode"),mr=(gr.prototype.writeValue=function(e){var t=null==e?"":e;this._renderer.setProperty(this._elementRef.nativeElement,"value",t)},gr.prototype.registerOnChange=function(e){this.onChange=e},gr.prototype.registerOnTouched=function(e){this.onTouched=e},gr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},gr.prototype._handleInput=function(e){this._compositionMode&&(!this._compositionMode||this._composing)||this.onChange(e)},gr.prototype._compositionStart=function(){this._composing=!0},gr.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},gr=ne([h.Directive({selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"$any(this)._handleInput($event.target.value)","(blur)":"onTouched()","(compositionstart)":"$any(this)._compositionStart()","(compositionend)":"$any(this)._compositionEnd($event.target.value)"},providers:[hr]}),re(2,h.Optional()),re(2,h.Inject(fr)),oe("design:paramtypes",[h.Renderer2,h.ElementRef,Boolean])],gr));function gr(e,t,n){var r;this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(r=Ke?Ke.getUserAgent():"",!/android (\d+)/.test(r.toLowerCase())))}function yr(t){return t.validate?function(e){return t.validate(e)}:t}function vr(t){return t.validate?function(e){return t.validate(e)}:t}var br={provide:cr,useExisting:h.forwardRef(function(){return wr}),multi:!0},wr=(_r.prototype.writeValue=function(e){var t=null==e?"":e;this._renderer.setProperty(this._elementRef.nativeElement,"value",t)},_r.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},_r.prototype.registerOnTouched=function(e){this.onTouched=e},_r.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},_r=ne([h.Directive({selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[br]}),oe("design:paramtypes",[h.Renderer2,h.ElementRef])],_r));function _r(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}function Sr(){throw new Error("unimplemented")}var Cr,Er=(ee(Ir,Cr=Jn),Object.defineProperty(Ir.prototype,"validator",{get:function(){return Sr()},enumerable:!0,configurable:!0}),Object.defineProperty(Ir.prototype,"asyncValidator",{get:function(){return Sr()},enumerable:!0,configurable:!0}),Ir);function Ir(){var e=null!==Cr&&Cr.apply(this,arguments)||this;return e._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}var Ar={provide:cr,useExisting:h.forwardRef(function(){return Or}),multi:!0},Pr=(kr.prototype.add=function(e,t){this._accessors.push([e,t])},kr.prototype.remove=function(e){for(var t=this._accessors.length-1;0<=t;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)},kr.prototype.select=function(t){var n=this;this._accessors.forEach(function(e){n._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})},kr.prototype._isSameGroup=function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name},kr=ne([h.Injectable()],kr));function kr(){this._accessors=[]}var Or=(Tr.prototype.ngOnInit=function(){this._control=this._injector.get(Er),this._checkName(),this._registry.add(this._control,this)},Tr.prototype.ngOnDestroy=function(){this._registry.remove(this)},Tr.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},Tr.prototype.registerOnChange=function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}},Tr.prototype.fireUncheck=function(e){this.writeValue(e)},Tr.prototype.registerOnTouched=function(e){this.onTouched=e},Tr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Tr.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},Tr.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},ne([h.Input(),oe("design:type",String)],Tr.prototype,"name",void 0),ne([h.Input(),oe("design:type",String)],Tr.prototype,"formControlName",void 0),ne([h.Input(),oe("design:type",Object)],Tr.prototype,"value",void 0),Tr=ne([h.Directive({selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[Ar]}),oe("design:paramtypes",[h.Renderer2,h.ElementRef,Pr,h.Injector])],Tr));function Tr(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}var xr={provide:cr,useExisting:h.forwardRef(function(){return Nr}),multi:!0},Nr=(Ur.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},Ur.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},Ur.prototype.registerOnTouched=function(e){this.onTouched=e},Ur.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Ur=ne([h.Directive({selector:"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[xr]}),oe("design:paramtypes",[h.Renderer2,h.ElementRef])],Ur));function Ur(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}var Mr='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Rr='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',Dr='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',Fr=(Lr.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Mr)},Lr.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+Rr+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+Dr)},Lr.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+Mr)},Lr.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Rr)},Lr.arrayParentException=function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')},Lr.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},Lr.ngModelWarning=function(e){console.warn("\n    It looks like you're using ngModel on the same form field as "+e+". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/"+("formControl"===e?"FormControlDirective":"FormControlName")+"#use-with-ngmodel\n    ")},Lr);function Lr(){}var jr={provide:cr,useExisting:h.forwardRef(function(){return Vr}),multi:!0};function Br(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}var Vr=(Object.defineProperty(qr.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),qr.prototype.writeValue=function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=Br(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)},qr.prototype.registerOnChange=function(t){var n=this;this.onChange=function(e){n.value=n._getOptionValue(e),t(n.value)}},qr.prototype.registerOnTouched=function(e){this.onTouched=e},qr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},qr.prototype._registerOption=function(){return(this._idCounter++).toString()},qr.prototype._getOptionId=function(e){var t,n;try{for(var r=ae(Array.from(this._optionMap.keys())),o=r.next();!o.done;o=r.next()){var i=o.value;if(this._compareWith(this._optionMap.get(i),e))return i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},qr.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t):e},ne([h.Input(),oe("design:type",Function),oe("design:paramtypes",[Function])],qr.prototype,"compareWith",null),qr=ne([h.Directive({selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[jr]}),oe("design:paramtypes",[h.Renderer2,h.ElementRef])],qr));function qr(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=h["ÉµlooseIdentical"]}var zr=(Object.defineProperty(Hr.prototype,"ngValue",{set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Br(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(Hr.prototype,"value",{set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),Hr.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},Hr.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},ne([h.Input("ngValue"),oe("design:type",Object),oe("design:paramtypes",[Object])],Hr.prototype,"ngValue",null),ne([h.Input("value"),oe("design:type",Object),oe("design:paramtypes",[Object])],Hr.prototype,"value",null),Hr=ne([h.Directive({selector:"option"}),re(2,h.Optional()),re(2,h.Host()),oe("design:paramtypes",[h.ElementRef,h.Renderer2,Vr])],Hr));function Hr(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}var Kr={provide:cr,useExisting:h.forwardRef(function(){return Wr}),multi:!0};function Gr(e,t){return null==e?""+t:("string"==typeof t&&(t="'"+t+"'"),t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}var Wr=(Object.defineProperty($r.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),$r.prototype.writeValue=function(e){var t,n=this;if(this.value=e,Array.isArray(e)){var r=e.map(function(e){return n._getOptionId(e)});t=function(e,t){e._setSelected(-1<r.indexOf(t.toString()))}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)},$r.prototype.registerOnChange=function(s){var a=this;this.onChange=function(e){var t=[];if(e.hasOwnProperty("selectedOptions"))for(var n=e.selectedOptions,r=0;r<n.length;r++){var o=n.item(r),i=a._getOptionValue(o.value);t.push(i)}else for(n=e.options,r=0;r<n.length;r++)(o=n.item(r)).selected&&(i=a._getOptionValue(o.value),t.push(i));a.value=t,s(t)}},$r.prototype.registerOnTouched=function(e){this.onTouched=e},$r.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},$r.prototype._registerOption=function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t},$r.prototype._getOptionId=function(e){var t,n;try{for(var r=ae(Array.from(this._optionMap.keys())),o=r.next();!o.done;o=r.next()){var i=o.value;if(this._compareWith(this._optionMap.get(i)._value,e))return i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},$r.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t)._value:e},ne([h.Input(),oe("design:type",Function),oe("design:paramtypes",[Function])],$r.prototype,"compareWith",null),$r=ne([h.Directive({selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[Kr]}),oe("design:paramtypes",[h.Renderer2,h.ElementRef])],$r));function $r(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=h["ÉµlooseIdentical"]}var Jr=(Object.defineProperty(Yr.prototype,"ngValue",{set:function(e){null!=this._select&&(this._value=e,this._setElementValue(Gr(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(Yr.prototype,"value",{set:function(e){this._select?(this._value=e,this._setElementValue(Gr(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)},enumerable:!0,configurable:!0}),Yr.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},Yr.prototype._setSelected=function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)},Yr.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},ne([h.Input("ngValue"),oe("design:type",Object),oe("design:paramtypes",[Object])],Yr.prototype,"ngValue",null),ne([h.Input("value"),oe("design:type",Object),oe("design:paramtypes",[Object])],Yr.prototype,"value",null),Yr=ne([h.Directive({selector:"option"}),re(2,h.Optional()),re(2,h.Host()),oe("design:paramtypes",[h.ElementRef,h.Renderer2,Wr])],Yr));function Yr(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}function Zr(e,t){return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ue(arguments[t]));return e}(t.path,[e])}function Qr(t,n){var r,o,i,e,s;t||no(n,"Cannot find control with"),n.valueAccessor||no(n,"No value accessor for form control with"),t.validator=or.compose([t.validator,n.validator]),t.asyncValidator=or.composeAsync([t.asyncValidator,n.asyncValidator]),n.valueAccessor.writeValue(t.value),r=t,(o=n).valueAccessor.registerOnChange(function(e){r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&Xr(r,o)}),i=n,t.registerOnChange(function(e,t){i.valueAccessor.writeValue(e),t&&i.viewToModelUpdate(e)}),e=t,(s=n).valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Xr(e,s),"submit"!==e.updateOn&&e.markAsTouched()}),n.valueAccessor.setDisabledState&&t.registerOnDisabledChange(function(e){n.valueAccessor.setDisabledState(e)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})})}function Xr(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function eo(e,t){null==e&&no(t,"Cannot find control with"),e.validator=or.compose([e.validator,t.validator]),e.asyncValidator=or.composeAsync([e.asyncValidator,t.asyncValidator])}function to(e){return no(e,"There is no FormControl instance attached to form control element with")}function no(e,t){var n;throw n=1<e.path.length?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute",new Error(t+" "+n)}function ro(e){return null!=e?or.compose(e.map(yr)):null}function oo(e){return null!=e?or.composeAsync(e.map(vr)):null}function io(e,t){if(e.hasOwnProperty("model")){var n=e.model;return n.isFirstChange()||!h["ÉµlooseIdentical"](t,n.currentValue)}}var so=[pr,Nr,wr,Vr,Wr,Or];function ao(e,t){e._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function uo(n,e){if(!e)return null;Array.isArray(e)||no(n,"Value accessor was not provided as an array for form control with");var r=void 0,o=void 0,i=void 0;return e.forEach(function(e){var t;e.constructor===mr?r=e:(t=e,so.some(function(e){return t.constructor===e})?(o&&no(n,"More than one built-in value accessor matches form control with"),o=e):(i&&no(n,"More than one custom value accessor matches form control with"),i=e))}),i||o||r||(no(n,"No valid value accessor for form control with"),null)}function co(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function lo(e,t,n,r){h.isDevMode()&&"never"!==r&&((null!==r&&"once"!==r||t._ngModelWarningSentOnce)&&("always"!==r||n._ngModelWarningSent)||(Fr.ngModelWarning(e),t._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}var po,ho=(ee(fo,po=Qn),fo.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},fo.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(fo.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(fo.prototype,"path",{get:function(){return Zr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(fo.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(fo.prototype,"validator",{get:function(){return ro(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(fo.prototype,"asyncValidator",{get:function(){return oo(this._asyncValidators)},enumerable:!0,configurable:!0}),fo.prototype._checkParentType=function(){},fo);function fo(){return null!==po&&po.apply(this,arguments)||this}var mo=(Object.defineProperty(go.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(go.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(go.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(go.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(go.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(go.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(go.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),go);function go(e){this._cd=e}var yo,vo={"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid","[class.ng-pending]":"ngClassPending"},bo=(ee(wo,yo=mo),wo=ne([h.Directive({selector:"[formControlName],[ngModel],[formControl]",host:vo}),re(0,h.Self()),oe("design:paramtypes",[Er])],wo));function wo(e){return yo.call(this,e)||this}var _o,So=(ee(Co,_o=mo),Co=ne([h.Directive({selector:"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]",host:vo}),re(0,h.Self()),oe("design:paramtypes",[Qn])],Co));function Co(e){return _o.call(this,e)||this}var Eo="VALID",Io="INVALID",Ao="PENDING",Po="DISABLED";function ko(e){var t=To(e)?e.validators:e;return Array.isArray(t)?ro(t):t||null}function Oo(e,t){var n=To(t)?t.asyncValidators:e;return Array.isArray(n)?oo(n):n||null}function To(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var xo=(Object.defineProperty(No.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(No.prototype,"valid",{get:function(){return this.status===Eo},enumerable:!0,configurable:!0}),Object.defineProperty(No.prototype,"invalid",{get:function(){return this.status===Io},enumerable:!0,configurable:!0}),Object.defineProperty(No.prototype,"pending",{get:function(){return this.status==Ao},enumerable:!0,configurable:!0}),Object.defineProperty(No.prototype,"disabled",{get:function(){return this.status===Po},enumerable:!0,configurable:!0}),Object.defineProperty(No.prototype,"enabled",{get:function(){return this.status!==Po},enumerable:!0,configurable:!0}),Object.defineProperty(No.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(No.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(No.prototype,"updateOn",{get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"},enumerable:!0,configurable:!0}),No.prototype.setValidators=function(e){this.validator=ko(e)},No.prototype.setAsyncValidators=function(e){this.asyncValidator=Oo(e)},No.prototype.clearValidators=function(){this.validator=null},No.prototype.clearAsyncValidators=function(){this.asyncValidator=null},No.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},No.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},No.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},No.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},No.prototype.markAsPending=function(e){void 0===e&&(e={}),!(this.status=Ao)!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},No.prototype.disable=function(t){void 0===t&&(t={}),this.status=Po,this.errors=null,this._forEachChild(function(e){e.disable(te({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!0)})},No.prototype.enable=function(t){void 0===t&&(t={}),this.status=Eo,this._forEachChild(function(e){e.enable(te({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!1)})},No.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())},No.prototype.setParent=function(e){this._parent=e},No.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Eo&&this.status!==Ao||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},No.prototype._updateTreeValidity=function(t){void 0===t&&(t={emitEvent:!0}),this._forEachChild(function(e){return e._updateTreeValidity(t)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})},No.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?Po:Eo},No.prototype._runValidator=function(){return this.validator?this.validator(this):null},No.prototype._runAsyncValidator=function(t){var n=this;if(this.asyncValidator){this.status=Ao;var e=ar(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(function(e){return n.setErrors(e,{emitEvent:t})})}},No.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},No.prototype.setErrors=function(e,t){void 0===t&&(t={}),this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)},No.prototype.get=function(e){return null==(t=e)?null:(t instanceof Array||(t=t.split(".")),t instanceof Array&&0===t.length?null:t.reduce(function(e,t){return e instanceof Fo?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof Bo&&e.at(t)||null},this));var t},No.prototype.getError=function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null},No.prototype.hasError=function(e,t){return!!this.getError(e,t)},Object.defineProperty(No.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),No.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},No.prototype._initObservables=function(){this.valueChanges=new h.EventEmitter,this.statusChanges=new h.EventEmitter},No.prototype._calculateStatus=function(){return this._allControlsDisabled()?Po:this.errors?Io:this._anyControlsHaveStatus(Ao)?Ao:this._anyControlsHaveStatus(Io)?Io:Eo},No.prototype._anyControlsHaveStatus=function(t){return this._anyControls(function(e){return e.status===t})},No.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},No.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},No.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},No.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},No.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},No.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},No.prototype._setUpdateStrategy=function(e){To(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)},No);function No(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}var Uo,Mo=(ee(Ro,Uo=xo),Ro.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(function(e){return e(n.value,!1!==t.emitViewToModelChange)}),this.updateValueAndValidity(t)},Ro.prototype.patchValue=function(e,t){void 0===t&&(t={}),this.setValue(e,t)},Ro.prototype.reset=function(e,t){void 0===e&&(e=null),void 0===t&&(t={}),this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1},Ro.prototype._updateValue=function(){},Ro.prototype._anyControls=function(e){return!1},Ro.prototype._allControlsDisabled=function(){return this.disabled},Ro.prototype.registerOnChange=function(e){this._onChange.push(e)},Ro.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},Ro.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},Ro.prototype._forEachChild=function(e){},Ro.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))},Ro.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},Ro);function Ro(e,t,n){void 0===e&&(e=null);var r=Uo.call(this,ko(t),Oo(n,t))||this;return r._onChange=[],r._applyFormState(e),r._setUpdateStrategy(t),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r._initObservables(),r}var Do,Fo=(ee(Lo,Do=xo),Lo.prototype.registerControl=function(e,t){return this.controls[e]?this.controls[e]:((this.controls[e]=t).setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)},Lo.prototype.addControl=function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},Lo.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},Lo.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},Lo.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},Lo.prototype.setValue=function(t,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(t),Object.keys(t).forEach(function(e){r._throwIfControlMissing(e),r.controls[e].setValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Lo.prototype.patchValue=function(t,n){var r=this;void 0===n&&(n={}),Object.keys(t).forEach(function(e){r.controls[e]&&r.controls[e].patchValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Lo.prototype.reset=function(n,r){void 0===n&&(n={}),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},Lo.prototype.getRawValue=function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof Mo?t.value:t.getRawValue(),e})},Lo.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e},Lo.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},Lo.prototype._forEachChild=function(t){var n=this;Object.keys(this.controls).forEach(function(e){return t(n.controls[e],e)})},Lo.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})},Lo.prototype._updateValue=function(){this.value=this._reduceValue()},Lo.prototype._anyControls=function(n){var r=this,o=!1;return this._forEachChild(function(e,t){o=o||r.contains(t)&&n(e)}),o},Lo.prototype._reduceValue=function(){var r=this;return this._reduceChildren({},function(e,t,n){return(t.enabled||r.disabled)&&(e[n]=t.value),e})},Lo.prototype._reduceChildren=function(e,n){var r=e;return this._forEachChild(function(e,t){r=n(r,e,t)}),r},Lo.prototype._allControlsDisabled=function(){var e,t;try{for(var n=ae(Object.keys(this.controls)),r=n.next();!r.done;r=n.next()){var o=r.value;if(this.controls[o].enabled)return!1}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return 0<Object.keys(this.controls).length||this.disabled},Lo.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control with name: '"+t+"'.")})},Lo);function Lo(e,t,n){var r=Do.call(this,ko(t),Oo(n,t))||this;return r.controls=e,r._initObservables(),r._setUpdateStrategy(t),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r}var jo,Bo=(ee(Vo,jo=xo),Vo.prototype.at=function(e){return this.controls[e]},Vo.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},Vo.prototype.insert=function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()},Vo.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity()},Vo.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(Vo.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),Vo.prototype.setValue=function(e,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(e),e.forEach(function(e,t){r._throwIfControlMissing(t),r.at(t).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Vo.prototype.patchValue=function(e,n){var r=this;void 0===n&&(n={}),e.forEach(function(e,t){r.at(t)&&r.at(t).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Vo.prototype.reset=function(n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},Vo.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof Mo?e.value:e.getRawValue()})},Vo.prototype._syncPendingControls=function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},Vo.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},Vo.prototype._forEachChild=function(n){this.controls.forEach(function(e,t){n(e,t)})},Vo.prototype._updateValue=function(){var t=this;this.value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(e){return e.value})},Vo.prototype._anyControls=function(t){return this.controls.some(function(e){return e.enabled&&t(e)})},Vo.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})},Vo.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control at index: "+t+".")})},Vo.prototype._allControlsDisabled=function(){var e,t;try{for(var n=ae(this.controls),r=n.next();!r.done;r=n.next())if(r.value.enabled)return!1}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return 0<this.controls.length||this.disabled},Vo.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},Vo);function Vo(e,t,n){var r=jo.call(this,ko(t),Oo(n,t))||this;return r.controls=e,r._initObservables(),r._setUpdateStrategy(t),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r}var qo,zo={provide:Qn,useExisting:h.forwardRef(function(){return Ko})},Ho=Promise.resolve(null),Ko=(ee(Go,qo=Qn),Go.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(Go.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(Go.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(Go.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(Go.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),Go.prototype.addControl=function(t){var n=this;Ho.then(function(){var e=n._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Qr(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),n._directives.push(t)})},Go.prototype.getControl=function(e){return this.form.get(e.path)},Go.prototype.removeControl=function(t){var n=this;Ho.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name),co(n._directives,t)})},Go.prototype.addFormGroup=function(n){var r=this;Ho.then(function(){var e=r._findContainer(n.path),t=new Fo({});eo(t,n),e.registerControl(n.name,t),t.updateValueAndValidity({emitEvent:!1})})},Go.prototype.removeFormGroup=function(t){var n=this;Ho.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name)})},Go.prototype.getFormGroup=function(e){return this.form.get(e.path)},Go.prototype.updateModel=function(e,t){var n=this;Ho.then(function(){n.form.get(e.path).setValue(t)})},Go.prototype.setValue=function(e){this.control.setValue(e)},Go.prototype.onSubmit=function(e){return this.submitted=!0,ao(this.form,this._directives),this.ngSubmit.emit(e),!1},Go.prototype.onReset=function(){this.resetForm()},Go.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},Go.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},Go.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},ne([h.Input("ngFormOptions"),oe("design:type",Object)],Go.prototype,"options",void 0),Go=ne([h.Directive({selector:"form:not([ngNoForm]):not([formGroup]),ngForm,[ngForm]",providers:[zo],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}),re(0,h.Optional()),re(0,h.Self()),re(0,h.Inject(tr)),re(1,h.Optional()),re(1,h.Self()),re(1,h.Inject(nr)),oe("design:paramtypes",[Array,Array])],Go));function Go(e,t){var n=qo.call(this)||this;return n.submitted=!1,n._directives=[],n.ngSubmit=new h.EventEmitter,n.form=new Fo({},ro(e),oo(t)),n}var Wo=($o.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+Mr+'\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')},$o.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+Rr+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+Dr)},$o.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},$o.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+Rr+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+Dr)},$o);function $o(){}var Jo,Yo,Zo={provide:Qn,useExisting:h.forwardRef(function(){return Qo})},Qo=(ee(Xo,Jo=ho),(Yo=Xo).prototype._checkParentType=function(){this._parent instanceof Yo||this._parent instanceof Ko||Wo.modelGroupParentException()},ne([h.Input("ngModelGroup"),oe("design:type",String)],Xo.prototype,"name",void 0),Xo=Yo=ne([h.Directive({selector:"[ngModelGroup]",providers:[Zo],exportAs:"ngModelGroup"}),re(0,h.Host()),re(0,h.SkipSelf()),re(1,h.Optional()),re(1,h.Self()),re(1,h.Inject(tr)),re(2,h.Optional()),re(2,h.Self()),re(2,h.Inject(nr)),oe("design:paramtypes",[Qn,Array,Array])],Xo));function Xo(e,t,n){var r=Jo.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var ei,ti={provide:Er,useExisting:h.forwardRef(function(){return ri})},ni=Promise.resolve(null),ri=(ee(oi,ei=Er),oi.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),io(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},oi.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(oi.prototype,"path",{get:function(){return this._parent?Zr(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(oi.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(oi.prototype,"validator",{get:function(){return ro(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(oi.prototype,"asyncValidator",{get:function(){return oo(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),oi.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},oi.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},oi.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},oi.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},oi.prototype._setUpStandalone=function(){Qr(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},oi.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},oi.prototype._checkParentType=function(){!(this._parent instanceof Qo)&&this._parent instanceof ho?Wo.formGroupNameException():this._parent instanceof Qo||this._parent instanceof Ko||Wo.modelParentException()},oi.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Wo.missingNameException()},oi.prototype._updateValue=function(e){var t=this;ni.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})},oi.prototype._updateDisabled=function(e){var t=this,n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;ni.then(function(){r&&!t.control.disabled?t.control.disable():!r&&t.control.disabled&&t.control.enable()})},ne([h.Input(),oe("design:type",String)],oi.prototype,"name",void 0),ne([h.Input("disabled"),oe("design:type",Boolean)],oi.prototype,"isDisabled",void 0),ne([h.Input("ngModel"),oe("design:type",Object)],oi.prototype,"model",void 0),ne([h.Input("ngModelOptions"),oe("design:type",Object)],oi.prototype,"options",void 0),ne([h.Output("ngModelChange"),oe("design:type",Object)],oi.prototype,"update",void 0),oi=ne([h.Directive({selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[ti],exportAs:"ngModel"}),re(0,h.Optional()),re(0,h.Host()),re(1,h.Optional()),re(1,h.Self()),re(1,h.Inject(tr)),re(2,h.Optional()),re(2,h.Self()),re(2,h.Inject(nr)),re(3,h.Optional()),re(3,h.Self()),re(3,h.Inject(cr)),oe("design:paramtypes",[Qn,Array,Array,Array])],oi));function oi(e,t,n,r){var o=ei.call(this)||this;return o.control=new Mo,o._registered=!1,o.update=new h.EventEmitter,o._parent=e,o._rawValidators=t||[],o._rawAsyncValidators=n||[],o.valueAccessor=uo(o,r),o}var ii,si,ai=new h.InjectionToken("NgModelWithFormControlWarning"),ui={provide:Er,useExisting:h.forwardRef(function(){return ci})},ci=(ee(li,ii=Er),si=li,Object.defineProperty(li.prototype,"isDisabled",{set:function(e){Fr.disabledAttrWarning()},enumerable:!0,configurable:!0}),li.prototype.ngOnChanges=function(e){this._isControlChanged(e)&&(Qr(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),io(e,this.viewModel)&&(lo("formControl",si,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)},Object.defineProperty(li.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(li.prototype,"validator",{get:function(){return ro(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(li.prototype,"asyncValidator",{get:function(){return oo(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(li.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),li.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},li.prototype._isControlChanged=function(e){return e.hasOwnProperty("form")},li._ngModelWarningSentOnce=!1,ne([h.Input("formControl"),oe("design:type",Mo)],li.prototype,"form",void 0),ne([h.Input("disabled"),oe("design:type",Boolean),oe("design:paramtypes",[Boolean])],li.prototype,"isDisabled",null),ne([h.Input("ngModel"),oe("design:type",Object)],li.prototype,"model",void 0),ne([h.Output("ngModelChange"),oe("design:type",Object)],li.prototype,"update",void 0),li=si=ne([h.Directive({selector:"[formControl]",providers:[ui],exportAs:"ngForm"}),re(0,h.Optional()),re(0,h.Self()),re(0,h.Inject(tr)),re(1,h.Optional()),re(1,h.Self()),re(1,h.Inject(nr)),re(2,h.Optional()),re(2,h.Self()),re(2,h.Inject(cr)),re(3,h.Optional()),re(3,h.Inject(ai)),oe("design:paramtypes",[Array,Array,Array,Object])],li));function li(e,t,n,r){var o=ii.call(this)||this;return o._ngModelWarningConfig=r,o.update=new h.EventEmitter,o._ngModelWarningSent=!1,o._rawValidators=e||[],o._rawAsyncValidators=t||[],o.valueAccessor=uo(o,n),o}var pi,di={provide:Qn,useExisting:h.forwardRef(function(){return hi})},hi=(ee(fi,pi=Qn),fi.prototype.ngOnChanges=function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())},Object.defineProperty(fi.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(fi.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(fi.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),fi.prototype.addControl=function(e){var t=this.form.get(e.path);return Qr(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t},fi.prototype.getControl=function(e){return this.form.get(e.path)},fi.prototype.removeControl=function(e){co(this.directives,e)},fi.prototype.addFormGroup=function(e){var t=this.form.get(e.path);eo(t,e),t.updateValueAndValidity({emitEvent:!1})},fi.prototype.removeFormGroup=function(e){},fi.prototype.getFormGroup=function(e){return this.form.get(e.path)},fi.prototype.addFormArray=function(e){var t=this.form.get(e.path);eo(t,e),t.updateValueAndValidity({emitEvent:!1})},fi.prototype.removeFormArray=function(e){},fi.prototype.getFormArray=function(e){return this.form.get(e.path)},fi.prototype.updateModel=function(e,t){this.form.get(e.path).setValue(t)},fi.prototype.onSubmit=function(e){return this.submitted=!0,ao(this.form,this.directives),this.ngSubmit.emit(e),!1},fi.prototype.onReset=function(){this.resetForm()},fi.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},fi.prototype._updateDomValue=function(){var o=this;this.directives.forEach(function(e){var t,n,r=o.form.get(e.path);e.control!==r&&(t=e.control,(n=e).valueAccessor.registerOnChange(function(){return to(n)}),n.valueAccessor.registerOnTouched(function(){return to(n)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t&&t._clearChangeFns(),r&&Qr(r,e),e.control=r)}),this.form._updateTreeValidity({emitEvent:!1})},fi.prototype._updateRegistrations=function(){var e=this;this.form._registerOnCollectionChange(function(){return e._updateDomValue()}),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){}),this._oldForm=this.form},fi.prototype._updateValidators=function(){var e=ro(this._validators);this.form.validator=or.compose([this.form.validator,e]);var t=oo(this._asyncValidators);this.form.asyncValidator=or.composeAsync([this.form.asyncValidator,t])},fi.prototype._checkFormPresent=function(){this.form||Fr.missingFormException()},ne([h.Input("formGroup"),oe("design:type",Fo)],fi.prototype,"form",void 0),ne([h.Output(),oe("design:type",Object)],fi.prototype,"ngSubmit",void 0),fi=ne([h.Directive({selector:"[formGroup]",providers:[di],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},exportAs:"ngForm"}),re(0,h.Optional()),re(0,h.Self()),re(0,h.Inject(tr)),re(1,h.Optional()),re(1,h.Self()),re(1,h.Inject(nr)),oe("design:paramtypes",[Array,Array])],fi));function fi(e,t){var n=pi.call(this)||this;return n._validators=e,n._asyncValidators=t,n.submitted=!1,n.directives=[],n.form=null,n.ngSubmit=new h.EventEmitter,n}var mi,gi={provide:Qn,useExisting:h.forwardRef(function(){return yi})},yi=(ee(vi,mi=ho),vi.prototype._checkParentType=function(){Ci(this._parent)&&Fr.groupParentException()},ne([h.Input("formGroupName"),oe("design:type",String)],vi.prototype,"name",void 0),vi=ne([h.Directive({selector:"[formGroupName]",providers:[gi]}),re(0,h.Optional()),re(0,h.Host()),re(0,h.SkipSelf()),re(1,h.Optional()),re(1,h.Self()),re(1,h.Inject(tr)),re(2,h.Optional()),re(2,h.Self()),re(2,h.Inject(nr)),oe("design:paramtypes",[Qn,Array,Array])],vi));function vi(e,t,n){var r=mi.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var bi,wi={provide:Qn,useExisting:h.forwardRef(function(){return _i})},_i=(ee(Si,bi=Qn),Si.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},Si.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormArray(this)},Object.defineProperty(Si.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!0,configurable:!0}),Object.defineProperty(Si.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Si.prototype,"path",{get:function(){return Zr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(Si.prototype,"validator",{get:function(){return ro(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(Si.prototype,"asyncValidator",{get:function(){return oo(this._asyncValidators)},enumerable:!0,configurable:!0}),Si.prototype._checkParentType=function(){Ci(this._parent)&&Fr.arrayParentException()},ne([h.Input("formArrayName"),oe("design:type",String)],Si.prototype,"name",void 0),Si=ne([h.Directive({selector:"[formArrayName]",providers:[wi]}),re(0,h.Optional()),re(0,h.Host()),re(0,h.SkipSelf()),re(1,h.Optional()),re(1,h.Self()),re(1,h.Inject(tr)),re(2,h.Optional()),re(2,h.Self()),re(2,h.Inject(nr)),oe("design:paramtypes",[Qn,Array,Array])],Si));function Si(e,t,n){var r=bi.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}function Ci(e){return!(e instanceof yi||e instanceof hi||e instanceof _i)}var Ei,Ii,Ai={provide:Er,useExisting:h.forwardRef(function(){return Pi})},Pi=(ee(ki,Ei=Er),Ii=ki,Object.defineProperty(ki.prototype,"isDisabled",{set:function(e){Fr.disabledAttrWarning()},enumerable:!0,configurable:!0}),ki.prototype.ngOnChanges=function(e){this._added||this._setUpControl(),io(e,this.viewModel)&&(lo("formControlName",Ii,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},ki.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},ki.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Object.defineProperty(ki.prototype,"path",{get:function(){return Zr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(ki.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(ki.prototype,"validator",{get:function(){return ro(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(ki.prototype,"asyncValidator",{get:function(){return oo(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),ki.prototype._checkParentType=function(){!(this._parent instanceof yi)&&this._parent instanceof ho?Fr.ngModelGroupException():this._parent instanceof yi||this._parent instanceof hi||this._parent instanceof _i||Fr.controlParentException()},ki.prototype._setUpControl=function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0},ki._ngModelWarningSentOnce=!1,ne([h.Input("formControlName"),oe("design:type",String)],ki.prototype,"name",void 0),ne([h.Input("disabled"),oe("design:type",Boolean),oe("design:paramtypes",[Boolean])],ki.prototype,"isDisabled",null),ne([h.Input("ngModel"),oe("design:type",Object)],ki.prototype,"model",void 0),ne([h.Output("ngModelChange"),oe("design:type",Object)],ki.prototype,"update",void 0),ki=Ii=ne([h.Directive({selector:"[formControlName]",providers:[Ai]}),re(0,h.Optional()),re(0,h.Host()),re(0,h.SkipSelf()),re(1,h.Optional()),re(1,h.Self()),re(1,h.Inject(tr)),re(2,h.Optional()),re(2,h.Self()),re(2,h.Inject(nr)),re(3,h.Optional()),re(3,h.Self()),re(3,h.Inject(cr)),re(4,h.Optional()),re(4,h.Inject(ai)),oe("design:paramtypes",[Qn,Array,Array,Array,Object])],ki));function ki(e,t,n,r,o){var i=Ei.call(this)||this;return i._ngModelWarningConfig=o,i._added=!1,i.update=new h.EventEmitter,i._ngModelWarningSent=!1,i._parent=e,i._rawValidators=t||[],i._rawAsyncValidators=n||[],i.valueAccessor=uo(i,r),i}var Oi={provide:tr,useExisting:h.forwardRef(function(){return xi}),multi:!0},Ti={provide:tr,useExisting:h.forwardRef(function(){return Mi}),multi:!0},xi=(Object.defineProperty(Ni.prototype,"required",{get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),Ni.prototype.validate=function(e){return this.required?or.required(e):null},Ni.prototype.registerOnValidatorChange=function(e){this._onChange=e},ne([h.Input(),oe("design:type",Object),oe("design:paramtypes",[Object])],Ni.prototype,"required",null),Ni=ne([h.Directive({selector:":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]",providers:[Oi],host:{"[attr.required]":'required ? "" : null'}})],Ni));function Ni(){}var Ui,Mi=(ee(Ri,Ui=xi),Ri.prototype.validate=function(e){return this.required?or.requiredTrue(e):null},Ri=ne([h.Directive({selector:"input[type=checkbox][required][formControlName],input[type=checkbox][required][formControl],input[type=checkbox][required][ngModel]",providers:[Ti],host:{"[attr.required]":'required ? "" : null'}})],Ri));function Ri(){return null!==Ui&&Ui.apply(this,arguments)||this}var Di={provide:tr,useExisting:h.forwardRef(function(){return Fi}),multi:!0},Fi=(Object.defineProperty(Li.prototype,"email",{set:function(e){this._enabled=""===e||!0===e||"true"===e,this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),Li.prototype.validate=function(e){return this._enabled?or.email(e):null},Li.prototype.registerOnValidatorChange=function(e){this._onChange=e},ne([h.Input(),oe("design:type",Object),oe("design:paramtypes",[Object])],Li.prototype,"email",null),Li=ne([h.Directive({selector:"[email][formControlName],[email][formControl],[email][ngModel]",providers:[Di]})],Li));function Li(){}var ji={provide:tr,useExisting:h.forwardRef(function(){return Bi}),multi:!0},Bi=(Vi.prototype.ngOnChanges=function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},Vi.prototype.validate=function(e){return null==this.minlength?null:this._validator(e)},Vi.prototype.registerOnValidatorChange=function(e){this._onChange=e},Vi.prototype._createValidator=function(){this._validator=or.minLength(parseInt(this.minlength,10))},ne([h.Input(),oe("design:type",String)],Vi.prototype,"minlength",void 0),Vi=ne([h.Directive({selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[ji],host:{"[attr.minlength]":"minlength ? minlength : null"}})],Vi));function Vi(){}var qi={provide:tr,useExisting:h.forwardRef(function(){return zi}),multi:!0},zi=(Hi.prototype.ngOnChanges=function(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},Hi.prototype.validate=function(e){return null!=this.maxlength?this._validator(e):null},Hi.prototype.registerOnValidatorChange=function(e){this._onChange=e},Hi.prototype._createValidator=function(){this._validator=or.maxLength(parseInt(this.maxlength,10))},ne([h.Input(),oe("design:type",String)],Hi.prototype,"maxlength",void 0),Hi=ne([h.Directive({selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[qi],host:{"[attr.maxlength]":"maxlength ? maxlength : null"}})],Hi));function Hi(){}var Ki={provide:tr,useExisting:h.forwardRef(function(){return Gi}),multi:!0},Gi=(Wi.prototype.ngOnChanges=function(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())},Wi.prototype.validate=function(e){return this._validator(e)},Wi.prototype.registerOnValidatorChange=function(e){this._onChange=e},Wi.prototype._createValidator=function(){this._validator=or.pattern(this.pattern)},ne([h.Input(),oe("design:type",Object)],Wi.prototype,"pattern",void 0),Wi=ne([h.Directive({selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[Ki],host:{"[attr.pattern]":"pattern ? pattern : null"}})],Wi));function Wi(){}var $i=(Ji.prototype.group=function(e,t){void 0===t&&(t=null);var n=this._reduceControls(e),r=null!=t?t.validator:null,o=null!=t?t.asyncValidator:null;return new Fo(n,r,o)},Ji.prototype.control=function(e,t,n){return new Mo(e,t,n)},Ji.prototype.array=function(e,t,n){var r=this,o=e.map(function(e){return r._createControl(e)});return new Bo(o,t,n)},Ji.prototype._reduceControls=function(t){var n=this,r={};return Object.keys(t).forEach(function(e){r[e]=n._createControl(t[e])}),r},Ji.prototype._createControl=function(e){if(e instanceof Mo||e instanceof Fo||e instanceof Bo)return e;if(Array.isArray(e)){var t=e[0],n=1<e.length?e[1]:null,r=2<e.length?e[2]:null;return this.control(t,n,r)}return this.control(e)},Ji=ne([h.Injectable()],Ji));function Ji(){}function Yi(){}new h.Version("6.1.10");var Zi=[Yi=ne([h.Directive({selector:"form:not([ngNoForm]):not([ngNativeValidate])",host:{novalidate:""}})],Yi),zr,Jr,mr,wr,Nr,pr,Vr,Wr,Or,bo,So,xi,Bi,zi,Gi,Mi,Fi],Qi=[ri,Qo,Ko],Xi=[ci,hi,Pi,yi,_i],es=ts=ne([h.NgModule({declarations:Zi,exports:Zi})],ts);function ts(){}var ns,rs=os=ne([h.NgModule({declarations:Qi,providers:[Pr],exports:[es,Qi]})],os);function os(){}function is(){}(ns=is).withConfig=function(e){return{ngModule:ns,providers:[{provide:ai,useValue:e.warnOnNgModelWithFormControl}]}},is=ns=ne([h.NgModule({declarations:[Xi],providers:[$i,Pr],exports:[es,Xi]})],is);var ss=(as.decorators=[{type:h.Directive,args:[{selector:"[component-host]"}]}],as.ctorParameters=function(){return[{type:h.ViewContainerRef}]},as);function as(e){this.viewContainerRef=e}function us(e,t){this.component=e,this.data=t}var cs=new x.Logger("AuthDecorator");var ls,ps="pinpoint.{region}.amazonaws.com",ds=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),hs=new Set(["cn-north-1","cn-northwest-1"]),fs=new Set(["us-iso-east-1"]),ms=new Set(["us-isob-east-1"]),gs=new Set(["us-gov-west-1","us-gov-east-1"]),ys=te(te({},{apiVersion:"2016-12-01",disableHostPrefix:!1,signingName:"mobiletargeting",regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-south-1":n={hostname:"pinpoint.ap-south-1.amazonaws.com",signingService:"mobiletargeting"};break;case"ap-southeast-2":n={hostname:"pinpoint.ap-southeast-2.amazonaws.com",signingService:"mobiletargeting"};break;case"eu-central-1":n={hostname:"pinpoint.eu-central-1.amazonaws.com",signingService:"mobiletargeting"};break;case"eu-west-1":n={hostname:"pinpoint.eu-west-1.amazonaws.com",signingService:"mobiletargeting"};break;case"us-east-1":n={hostname:"pinpoint.us-east-1.amazonaws.com",signingService:"mobiletargeting"};break;case"us-west-2":n={hostname:"pinpoint.us-west-2.amazonaws.com",signingService:"mobiletargeting"};break;default:ds.has(e)&&(n={hostname:ps.replace("{region}",e),signingService:"mobiletargeting"}),hs.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com.cn".replace("{region}",e)}),fs.has(e)&&(n={hostname:"pinpoint.{region}.c2s.ic.gov".replace("{region}",e)}),ms.has(e)&&(n={hostname:"pinpoint.{region}.sc2s.sgov.gov".replace("{region}",e)}),gs.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:ps.replace("{region}",e),signingService:"mobiletargeting"})}return Promise.resolve(n)}}),{requestHandler:new i.NodeHttpHandler,sha256:o.Hash.bind(null,"sha256"),urlParser:s.parseUrl,bodyLengthChecker:a.calculateBodyLength,streamCollector:u.streamCollector,base64Decoder:l.fromBase64,base64Encoder:l.toBase64,utf8Decoder:c.fromUtf8,utf8Encoder:c.toUtf8,defaultUserAgent:p.defaultUserAgent("@aws-sdk/client-pinpoint","1.0.0-beta.3"),runtime:"node",credentialDefaultProvider:n.defaultProvider,regionDefaultProvider:r.defaultProvider}),vs=(ee(bs,ls=_.Client),bs.prototype.destroy=function(){},bs);function bs(e){var t=this,n=te(te({},ys),e),r=d.resolveRegionConfig(n),o=d.resolveEndpointsConfig(r),i=y.resolveAwsAuthConfig(o),s=g.resolveRetryConfig(i),a=w.resolveUserAgentConfig(s),u=m.resolveHostHeaderConfig(a);return(t=ls.call(this,u)||this).config=u,t.middlewareStack.use(y.getAwsAuthPlugin(t.config)),t.middlewareStack.use(g.getRetryPlugin(t.config)),t.middlewareStack.use(w.getUserAgentPlugin(t.config)),t.middlewareStack.use(f.getContentLengthPlugin(t.config)),t.middlewareStack.use(m.getHostHeaderPlugin(t.config)),t}function ws(c,l){return ie(this,void 0,void 0,function(){var i,s,a,u;return se(this,function(e){if(i={"Content-Type":"application/json"},s="/v1/apps/{ApplicationId}/events",void 0===c.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((a=c.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");return s=s.replace("{ApplicationId}",_.extendedEncodeURIComponent(a)),void 0!==c.EventsRequest&&(t=c.EventsRequest,n={},void 0!==t.BatchItem&&(n.BatchItem=(r=t.BatchItem,o={},Object.keys(r).forEach(function(e){var t,n;o[e]=(t=r[e],n={},void 0!==t.Endpoint&&(n.Endpoint=Bs(t.Endpoint)),void 0!==t.Events&&(n.Events=function(r){var o={};return Object.keys(r).forEach(function(e){var t,n;o[e]=(t=r[e],n={},void 0!==t.AppPackageName&&(n.AppPackageName=t.AppPackageName),void 0!==t.AppTitle&&(n.AppTitle=t.AppTitle),void 0!==t.AppVersionCode&&(n.AppVersionCode=t.AppVersionCode),void 0!==t.Attributes&&(n.Attributes=js(t.Attributes)),void 0!==t.ClientSdkVersion&&(n.ClientSdkVersion=t.ClientSdkVersion),void 0!==t.EventType&&(n.EventType=t.EventType),void 0!==t.Metrics&&(n.Metrics=Ls(t.Metrics)),void 0!==t.SdkName&&(n.SdkName=t.SdkName),void 0!==t.Session&&(n.Session=Vs(t.Session)),void 0!==t.Timestamp&&(n.Timestamp=t.Timestamp),n)}),o}(t.Events)),n)}),o)),u=n),void 0===u&&(u={}),u=JSON.stringify(u),[2,new S.HttpRequest(te(te({},l.endpoint),{protocol:"https",method:"POST",headers:i,path:s,body:u}))];var t,r,o,n})})}function _s(a,u){return ie(this,void 0,void 0,function(){var r,o,i,s;return se(this,function(e){if(r={"Content-Type":"application/json"},o="/v1/apps/{ApplicationId}/endpoints/{EndpointId}",void 0===a.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((i=a.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(o=o.replace("{ApplicationId}",_.extendedEncodeURIComponent(i)),void 0===a.EndpointId)throw new Error("No value provided for input HTTP label: EndpointId.");if((i=a.EndpointId).length<=0)throw new Error("Empty value provided for input HTTP label: EndpointId.");return o=o.replace("{EndpointId}",_.extendedEncodeURIComponent(i)),void 0!==a.EndpointRequest&&(t=a.EndpointRequest,n={},void 0!==t.Address&&(n.Address=t.Address),void 0!==t.Attributes&&(n.Attributes=Fs(t.Attributes)),void 0!==t.ChannelType&&(n.ChannelType=t.ChannelType),void 0!==t.Demographic&&(n.Demographic=Is(t.Demographic)),void 0!==t.EffectiveDate&&(n.EffectiveDate=t.EffectiveDate),void 0!==t.EndpointStatus&&(n.EndpointStatus=t.EndpointStatus),void 0!==t.Location&&(n.Location=As(t.Location)),void 0!==t.Metrics&&(n.Metrics=Ls(t.Metrics)),void 0!==t.OptOut&&(n.OptOut=t.OptOut),void 0!==t.RequestId&&(n.RequestId=t.RequestId),void 0!==t.User&&(n.User=Us(t.User)),s=n),void 0===s&&(s={}),s=JSON.stringify(s),[2,new S.HttpRequest(te(te({},u.endpoint),{protocol:"https",method:"PUT",headers:r,path:o,body:s}))];var t,n})})}function Ss(o,i){return ie(this,void 0,void 0,function(){var n,r;return se(this,function(e){switch(e.label){case 0:return 200!==o.statusCode&&400<=o.statusCode?[2,function(f,m){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h;return se(this,function(e){switch(e.label){case 0:return n=[te({},f)],r={},[4,Ms(f.body,m)];case 1:switch(t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=Rs(f,t.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,12]}return[3,14];case 2:return s=[{}],[4,Ps(t)];case 3:return o=te.apply(void 0,[te.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:Hs(f)}]),[3,15];case 4:return a=[{}],[4,ks(t)];case 5:return o=te.apply(void 0,[te.apply(void 0,a.concat([e.sent()])),{name:i,$metadata:Hs(f)}]),[3,15];case 6:return u=[{}],[4,Os(t)];case 7:return o=te.apply(void 0,[te.apply(void 0,u.concat([e.sent()])),{name:i,$metadata:Hs(f)}]),[3,15];case 8:return c=[{}],[4,Ts(t)];case 9:return o=te.apply(void 0,[te.apply(void 0,c.concat([e.sent()])),{name:i,$metadata:Hs(f)}]),[3,15];case 10:return l=[{}],[4,xs(t)];case 11:return o=te.apply(void 0,[te.apply(void 0,l.concat([e.sent()])),{name:i,$metadata:Hs(f)}]),[3,15];case 12:return p=[{}],[4,Ns(t)];case 13:return o=te.apply(void 0,[te.apply(void 0,p.concat([e.sent()])),{name:i,$metadata:Hs(f)}]),[3,15];case 14:d=t.body,i=d.code||d.Code||i,o=te(te({},d),{name:""+i,message:d.message||d.Message||i,$fault:"client",$metadata:Hs(f)}),e.label=15;case 15:return h=o.message||o.Message||i,o.message=h,delete o.Message,[2,Promise.reject(Object.assign(new Error(h),o))]}})})}(o,i)]:(n={$metadata:Hs(o),__type:"GetUserEndpointsResponse",EndpointsResponse:void 0},[4,Ms(o.body,i)]);case 1:return r=e.sent(),n.EndpointsResponse=(t={__type:"EndpointsResponse",Item:void 0},void 0!==r.Item&&null!==r.Item&&(t.Item=(r.Item||[]).map(function(e){return s={__type:"EndpointResponse",Address:void 0,ApplicationId:void 0,Attributes:void 0,ChannelType:void 0,CohortId:void 0,CreationDate:void 0,Demographic:void 0,EffectiveDate:void 0,EndpointStatus:void 0,Id:void 0,Location:void 0,Metrics:void 0,OptOut:void 0,RequestId:void 0,User:void 0},void 0!==(t=e).Address&&null!==t.Address&&(s.Address=t.Address),void 0!==t.ApplicationId&&null!==t.ApplicationId&&(s.ApplicationId=t.ApplicationId),void 0!==t.Attributes&&null!==t.Attributes&&(s.Attributes=qs(t.Attributes)),void 0!==t.ChannelType&&null!==t.ChannelType&&(s.ChannelType=t.ChannelType),void 0!==t.CohortId&&null!==t.CohortId&&(s.CohortId=t.CohortId),void 0!==t.CreationDate&&null!==t.CreationDate&&(s.CreationDate=t.CreationDate),void 0!==t.Demographic&&null!==t.Demographic&&(s.Demographic=(n=t.Demographic,r={__type:"EndpointDemographic",AppVersion:void 0,Locale:void 0,Make:void 0,Model:void 0,ModelVersion:void 0,Platform:void 0,PlatformVersion:void 0,Timezone:void 0},void 0!==n.AppVersion&&null!==n.AppVersion&&(r.AppVersion=n.AppVersion),void 0!==n.Locale&&null!==n.Locale&&(r.Locale=n.Locale),void 0!==n.Make&&null!==n.Make&&(r.Make=n.Make),void 0!==n.Model&&null!==n.Model&&(r.Model=n.Model),void 0!==n.ModelVersion&&null!==n.ModelVersion&&(r.ModelVersion=n.ModelVersion),void 0!==n.Platform&&null!==n.Platform&&(r.Platform=n.Platform),void 0!==n.PlatformVersion&&null!==n.PlatformVersion&&(r.PlatformVersion=n.PlatformVersion),void 0!==n.Timezone&&null!==n.Timezone&&(r.Timezone=n.Timezone),r)),void 0!==t.EffectiveDate&&null!==t.EffectiveDate&&(s.EffectiveDate=t.EffectiveDate),void 0!==t.EndpointStatus&&null!==t.EndpointStatus&&(s.EndpointStatus=t.EndpointStatus),void 0!==t.Id&&null!==t.Id&&(s.Id=t.Id),void 0!==t.Location&&null!==t.Location&&(s.Location=(o=t.Location,i={__type:"EndpointLocation",City:void 0,Country:void 0,Latitude:void 0,Longitude:void 0,PostalCode:void 0,Region:void 0},void 0!==o.City&&null!==o.City&&(i.City=o.City),void 0!==o.Country&&null!==o.Country&&(i.Country=o.Country),void 0!==o.Latitude&&null!==o.Latitude&&(i.Latitude=o.Latitude),void 0!==o.Longitude&&null!==o.Longitude&&(i.Longitude=o.Longitude),void 0!==o.PostalCode&&null!==o.PostalCode&&(i.PostalCode=o.PostalCode),void 0!==o.Region&&null!==o.Region&&(i.Region=o.Region),i)),void 0!==t.Metrics&&null!==t.Metrics&&(s.Metrics=zs(t.Metrics)),void 0!==t.OptOut&&null!==t.OptOut&&(s.OptOut=t.OptOut),void 0!==t.RequestId&&null!==t.RequestId&&(s.RequestId=t.RequestId),void 0!==t.User&&null!==t.User&&(s.User=function(e){var t={__type:"EndpointUser",UserAttributes:void 0,UserId:void 0};return void 0!==e.UserAttributes&&null!==e.UserAttributes&&(t.UserAttributes=qs(e.UserAttributes)),void 0!==e.UserId&&null!==e.UserId&&(t.UserId=e.UserId),t}(t.User)),s;var t,n,r,o,i,s})),t),[2,Promise.resolve(n)]}var t})})}function Cs(o,a){return ie(this,void 0,void 0,function(){var n,r;return se(this,function(e){switch(e.label){case 0:return 202!==o.statusCode&&400<=o.statusCode?[2,function(f,m){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h;return se(this,function(e){switch(e.label){case 0:return n=[te({},f)],r={},[4,Ms(f.body,m)];case 1:switch(t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=Rs(f,t.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,12]}return[3,14];case 2:return s=[{}],[4,Ps(t)];case 3:return o=te.apply(void 0,[te.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:Hs(f)}]),[3,15];case 4:return a=[{}],[4,ks(t)];case 5:return o=te.apply(void 0,[te.apply(void 0,a.concat([e.sent()])),{name:i,$metadata:Hs(f)}]),[3,15];case 6:return u=[{}],[4,Os(t)];case 7:return o=te.apply(void 0,[te.apply(void 0,u.concat([e.sent()])),{name:i,$metadata:Hs(f)}]),[3,15];case 8:return c=[{}],[4,Ts(t)];case 9:return o=te.apply(void 0,[te.apply(void 0,c.concat([e.sent()])),{name:i,$metadata:Hs(f)}]),[3,15];case 10:return l=[{}],[4,xs(t)];case 11:return o=te.apply(void 0,[te.apply(void 0,l.concat([e.sent()])),{name:i,$metadata:Hs(f)}]),[3,15];case 12:return p=[{}],[4,Ns(t)];case 13:return o=te.apply(void 0,[te.apply(void 0,p.concat([e.sent()])),{name:i,$metadata:Hs(f)}]),[3,15];case 14:d=t.body,i=d.code||d.Code||i,o=te(te({},d),{name:""+i,message:d.message||d.Message||i,$fault:"client",$metadata:Hs(f)}),e.label=15;case 15:return h=o.message||o.Message||i,o.message=h,delete o.Message,[2,Promise.reject(Object.assign(new Error(h),o))]}})})}(o,a)]:(n={$metadata:Hs(o),__type:"PutEventsResponse",EventsResponse:void 0},[4,Ms(o.body,a)]);case 1:return r=e.sent(),n.EventsResponse=(t={__type:"EventsResponse",Results:void 0},void 0!==r.Results&&null!==r.Results&&(t.Results=(i=r.Results,s={},Object.keys(i).forEach(function(e){var t,n,r,o;s[e]=(t=i[e],o={__type:"ItemResponse",EndpointItemResponse:void 0,EventsItemResponse:void 0},void 0!==t.EndpointItemResponse&&null!==t.EndpointItemResponse&&(o.EndpointItemResponse=(n=t.EndpointItemResponse,r={__type:"EndpointItemResponse",Message:void 0,StatusCode:void 0},void 0!==n.Message&&null!==n.Message&&(r.Message=n.Message),void 0!==n.StatusCode&&null!==n.StatusCode&&(r.StatusCode=n.StatusCode),r)),void 0!==t.EventsItemResponse&&null!==t.EventsItemResponse&&(o.EventsItemResponse=function(r){var o={};return Object.keys(r).forEach(function(e){var t,n;o[e]=(t=r[e],n={__type:"EventItemResponse",Message:void 0,StatusCode:void 0},void 0!==t.Message&&null!==t.Message&&(n.Message=t.Message),void 0!==t.StatusCode&&null!==t.StatusCode&&(n.StatusCode=t.StatusCode),n)}),o}(t.EventsItemResponse)),o)}),s)),t),[2,Promise.resolve(n)]}var i,s,t})})}function Es(i,s){return ie(this,void 0,void 0,function(){var r,o;return se(this,function(e){switch(e.label){case 0:return 202!==i.statusCode&&400<=i.statusCode?[2,function(f,m){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h;return se(this,function(e){switch(e.label){case 0:return n=[te({},f)],r={},[4,Ms(f.body,m)];case 1:switch(t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=Rs(f,t.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,12]}return[3,14];case 2:return s=[{}],[4,Ps(t)];case 3:return o=te.apply(void 0,[te.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:Hs(f)}]),[3,15];case 4:return a=[{}],[4,ks(t)];case 5:return o=te.apply(void 0,[te.apply(void 0,a.concat([e.sent()])),{name:i,$metadata:Hs(f)}]),[3,15];case 6:return u=[{}],[4,Os(t)];case 7:return o=te.apply(void 0,[te.apply(void 0,u.concat([e.sent()])),{name:i,$metadata:Hs(f)}]),[3,15];case 8:return c=[{}],[4,Ts(t)];case 9:return o=te.apply(void 0,[te.apply(void 0,c.concat([e.sent()])),{name:i,$metadata:Hs(f)}]),[3,15];case 10:return l=[{}],[4,xs(t)];case 11:return o=te.apply(void 0,[te.apply(void 0,l.concat([e.sent()])),{name:i,$metadata:Hs(f)}]),[3,15];case 12:return p=[{}],[4,Ns(t)];case 13:return o=te.apply(void 0,[te.apply(void 0,p.concat([e.sent()])),{name:i,$metadata:Hs(f)}]),[3,15];case 14:d=t.body,i=d.code||d.Code||i,o=te(te({},d),{name:""+i,message:d.message||d.Message||i,$fault:"client",$metadata:Hs(f)}),e.label=15;case 15:return h=o.message||o.Message||i,o.message=h,delete o.Message,[2,Promise.reject(Object.assign(new Error(h),o))]}})})}(i,s)]:(r={$metadata:Hs(i),__type:"UpdateEndpointResponse",MessageBody:void 0},[4,Ms(i.body,s)]);case 1:return o=e.sent(),r.MessageBody=(n={__type:"MessageBody",Message:void 0,RequestID:void 0},void 0!==(t=o).Message&&null!==t.Message&&(n.Message=t.Message),void 0!==t.RequestID&&null!==t.RequestID&&(n.RequestID=t.RequestID),n),[2,Promise.resolve(r)]}var t,n})})}function Is(e){var t={};return void 0!==e.AppVersion&&(t.AppVersion=e.AppVersion),void 0!==e.Locale&&(t.Locale=e.Locale),void 0!==e.Make&&(t.Make=e.Make),void 0!==e.Model&&(t.Model=e.Model),void 0!==e.ModelVersion&&(t.ModelVersion=e.ModelVersion),void 0!==e.Platform&&(t.Platform=e.Platform),void 0!==e.PlatformVersion&&(t.PlatformVersion=e.PlatformVersion),void 0!==e.Timezone&&(t.Timezone=e.Timezone),t}function As(e){var t={};return void 0!==e.City&&(t.City=e.City),void 0!==e.Country&&(t.Country=e.Country),void 0!==e.Latitude&&(t.Latitude=e.Latitude),void 0!==e.Longitude&&(t.Longitude=e.Longitude),void 0!==e.PostalCode&&(t.PostalCode=e.PostalCode),void 0!==e.Region&&(t.Region=e.Region),t}function Ps(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:Hs(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})}function ks(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"ForbiddenException",$fault:"client",$metadata:Hs(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})}function Os(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"InternalServerErrorException",$fault:"server",$metadata:Hs(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})}function Ts(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"MethodNotAllowedException",$fault:"client",$metadata:Hs(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})}function xs(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:Hs(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})}function Ns(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"TooManyRequestsException",$fault:"client",$metadata:Hs(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})}function Us(e,t){var n={};return void 0!==e.UserAttributes&&(n.UserAttributes=Fs(e.UserAttributes)),void 0!==e.UserId&&(n.UserId=e.UserId),n}function Ms(e,t){return o=n=t,((r=e)instanceof Uint8Array?Promise.resolve(r):o.streamCollector(r)||Promise.resolve(new Uint8Array)).then(function(e){return n.utf8Encoder(e)}).then(function(e){return e.length?JSON.parse(e):{}});var n,r,o}function Rs(e,t){function n(e){var t=e;return 0<=t.indexOf(":")&&(t=t.split(":")[0]),0<=t.indexOf("#")&&(t=t.split("#")[1]),t}var r,o=(r=e.headers,Object.keys(r).find(function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==o?n(e.headers[o]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""}var Ds,Fs=function(t,e){var n={};return Object.keys(t).forEach(function(e){n[e]=function(e){var t,n,r=[];try{for(var o=ae(e),i=o.next();!i.done;i=o.next()){var s=i.value;r.push(s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}(t[e])}),n},Ls=function(t,e){var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),n},js=function(t,e){var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),n},Bs=function(e,t){var n={};return void 0!==e.Address&&(n.Address=e.Address),void 0!==e.Attributes&&(n.Attributes=Fs(e.Attributes)),void 0!==e.ChannelType&&(n.ChannelType=e.ChannelType),void 0!==e.Demographic&&(n.Demographic=Is(e.Demographic)),void 0!==e.EffectiveDate&&(n.EffectiveDate=e.EffectiveDate),void 0!==e.EndpointStatus&&(n.EndpointStatus=e.EndpointStatus),void 0!==e.Location&&(n.Location=As(e.Location)),void 0!==e.Metrics&&(n.Metrics=Ls(e.Metrics)),void 0!==e.OptOut&&(n.OptOut=e.OptOut),void 0!==e.RequestId&&(n.RequestId=e.RequestId),void 0!==e.User&&(n.User=Us(e.User)),n},Vs=function(e,t){var n={};return void 0!==e.Duration&&(n.Duration=e.Duration),void 0!==e.Id&&(n.Id=e.Id),void 0!==e.StartTimestamp&&(n.StartTimestamp=e.StartTimestamp),void 0!==e.StopTimestamp&&(n.StopTimestamp=e.StopTimestamp),n},qs=function(t,e){var n={};return Object.keys(t).forEach(function(e){n[e]=(t[e]||[]).map(function(e){return e})}),n},zs=function(t,e){var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),n},Hs=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},Ks=(ee(Gs,Ds=_.Command),Gs.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(C.getSerdePlugin(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Gs.prototype.serialize=function(e,t){return function(o,i){return ie(this,void 0,void 0,function(){var t,n,r;return se(this,function(e){if(t={"Content-Type":""},n="/v1/apps/{ApplicationId}/users/{UserId}",void 0===o.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((r=o.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(n=n.replace("{ApplicationId}",_.extendedEncodeURIComponent(r)),void 0===o.UserId)throw new Error("No value provided for input HTTP label: UserId.");if((r=o.UserId).length<=0)throw new Error("Empty value provided for input HTTP label: UserId.");return n=n.replace("{UserId}",_.extendedEncodeURIComponent(r)),[2,new S.HttpRequest(te(te({},i.endpoint),{protocol:"https",method:"GET",headers:t,path:n,body:void 0}))]})})}(e,t)},Gs.prototype.deserialize=function(e,t){return Ss(e,t)},Gs);function Gs(e){var t=Ds.call(this)||this;return t.input=e,t}var Ws,$s=(ee(Js,Ws=_.Command),Js.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(C.getSerdePlugin(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Js.prototype.serialize=function(e,t){return ws(e,t)},Js.prototype.deserialize=function(e,t){return Cs(e,t)},Js);function Js(e){var t=Ws.call(this)||this;return t.input=e,t}var Ys,Zs=(ee(Qs,Ys=_.Command),Qs.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(C.getSerdePlugin(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Qs.prototype.serialize=function(e,t){return _s(e,t)},Qs.prototype.deserialize=function(e,t){return Es(e,t)},Qs);function Qs(e){var t=Ys.call(this)||this;return t.input=e,t}var Xs={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new x.StorageHelper).getStorage()};function ea(e){var t=0;t=e.length;for(var n=e.length;0<=n;--n){var r=e.charCodeAt(n);127<r&&r<=2047?t+=1:2047<r&&r<=65535&&(t+=2),56320<=r&&r<=57343&&--n}return t}function ta(){return(new Date).getTime()}function na(e){return Number.isInteger?Number.isInteger(e):"number"==typeof(t=e)&&isFinite(t)&&Math.floor(t)===t;var t}var ra=new x.ConsoleLogger("StorageCache"),oa=(ia.prototype.getModuleName=function(){return"Cache"},ia.prototype.checkConfig=function(){na(this.config.capacityInBytes)||(ra.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=Xs.capacityInBytes),na(this.config.itemMaxSize)||(ra.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=Xs.itemMaxSize),na(this.config.defaultTTL)||(ra.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=Xs.defaultTTL),na(this.config.defaultPriority)||(ra.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=Xs.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(ra.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=Xs.itemMaxSize),(5<this.config.defaultPriority||this.config.defaultPriority<1)&&(ra.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=Xs.defaultPriority),(1<Number(this.config.warningThreshold)||Number(this.config.warningThreshold)<0)&&(ra.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=Xs.warningThreshold),5242880<this.config.capacityInBytes&&(ra.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=Xs.capacityInBytes)},ia.prototype.fillCacheItem=function(e,t,n){var r={key:e,data:t,timestamp:ta(),visitedTime:ta(),priority:n.priority,expires:n.expires,type:typeof t,byteSize:0};return r.byteSize=ea(JSON.stringify(r)),r.byteSize=ea(JSON.stringify(r)),r},ia.prototype.configure=function(e){return e&&(e.keyPrefix&&ra.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig()),this.config},ia);function ia(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}var sa,aa,ua=(sa=function(e,t){return(sa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}sa(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ca=new x.ConsoleLogger("Cache");function la(e){var t=this,n=e?Object.assign({},Xs,e):Xs;return(t=aa.call(this,n)||this).config.storage=n.storage,t.getItem=t.getItem.bind(t),t.setItem=t.setItem.bind(t),t.removeItem=t.removeItem.bind(t),t}var pa=(ua(la,aa=oa),la.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},la.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},la.prototype._refreshItem=function(e,t){return e.visitedTime=ta(),this.config.storage.setItem(t,JSON.stringify(e)),e},la.prototype._isExpired=function(e){var t=this.config.storage.getItem(e),n=JSON.parse(t);return ta()>=n.expires},la.prototype._removeItem=function(e,t){var n=t||JSON.parse(this.config.storage.getItem(e)).byteSize;this._decreaseCurSizeInBytes(n),this.config.storage.removeItem(e)},la.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(e){this._decreaseCurSizeInBytes(t.byteSize),ca.error("Failed to set item "+e)}},la.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes,n=(1-this.config.warningThreshold)*this.config.capacityInBytes;return n<t?t:n},la.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},la.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},la.prototype._popOutItems=function(e,t){for(var n=[],r=t,o=0;o<e.length;o+=1){var i=this.config.storage.getItem(e[o]);if(null!=i){var s=JSON.parse(i);n.push(s)}}for(n.sort(function(e,t){return e.priority>t.priority||!(e.priority<t.priority)&&e.visitedTime<t.visitedTime?-1:1}),o=0;o<n.length;o+=1)if(this._removeItem(n[o].key,n[o].byteSize),(r-=n[o].byteSize)<=0)return},la.prototype.setItem=function(e,t,n){ca.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)if(void 0!==t){var o={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+ta()};if(o.priority<1||5<o.priority)ca.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{var i=this.fillCacheItem(r,t,o);if(i.byteSize>this.config.itemMaxSize)ca.warn("Item with key: "+e+" you are trying to put into is too big!");else try{var s=this.config.storage.getItem(r);if(s&&this._removeItem(r,JSON.parse(s).byteSize),this._isCacheFull(i.byteSize)){var a=this._findValidKeys();if(this._isCacheFull(i.byteSize)){var u=this._sizeToPop(i.byteSize);this._popOutItems(a,u)}}this._setItem(r,i)}catch(e){ca.warn("setItem failed! "+e)}}}else ca.warn("The value of item should not be undefined!");else ca.warn("Invalid key: should not be empty or 'CurSize'")},la.prototype.getItem=function(e,t){ca.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return ca.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(n=this.config.storage.getItem(r))){if(!this._isExpired(r)){var o=JSON.parse(n);return(o=this._refreshItem(o,r)).data}this._removeItem(r,JSON.parse(n).byteSize),n=null}if(t&&void 0!==t.callback){var i=t.callback();return null!==i&&this.setItem(e,i,t),i}return null}catch(e){return ca.warn("getItem failed! "+e),null}},la.prototype.removeItem=function(e){ca.log("Remove item: key is "+e);var t=this.config.keyPrefix+e;if(t!==this.config.keyPrefix&&t!==this.cacheCurSizeKey)try{var n=this.config.storage.getItem(t);n&&this._removeItem(t,JSON.parse(n).byteSize)}catch(e){ca.warn("removeItem failed! "+e)}},la.prototype.clear=function(){ca.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(e){ca.warn("clear failed! "+e)}},la.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},la.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},la.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==Xs.keyPrefix||(ca.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=ta.toString()),new la(e)},new la);x.Amplify.register(pa);function da(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var ha=new x.ConsoleLogger("EventsBuffer"),fa=[429,500],ma=[202],ga=(ya.prototype.push=function(e){var t;if(this._buffer>this._config.bufferSize)return ha.debug("Exceeded analytics events buffer size"),e.handlers.reject(new Error("Exceeded the size of analytics events buffer"));var n=((t={})[e.params.event.eventId]=e,t);this._buffer.push(n)},ya.prototype.pause=function(){this._pause=!0},ya.prototype.resume=function(){this._pause=!1},ya.prototype.updateClient=function(e){this._client=e},ya.prototype.flush=function(){this._flush=!0},ya.prototype._startLoop=function(){this._interval&&clearInterval(this._interval);var e=this._config.flushInterval;this._interval=setInterval(this._sendBatch,e)},ya.prototype._sendBatch=function(){var e=this._buffer.length;if(this._flush&&!e&&clearInterval(this._interval),!this._pause&&e){var t=this._config.flushSize,n=Math.min(t,e),r=this._buffer.splice(0,n);this._putEvents(r)}},ya.prototype._putEvents=function(h){return e=this,u=function(){var t,n,r,o,i,s,a,u,c,l,e,p;return s=this,a=function(e){switch(e.label){case 0:t=this._bufferToMap(h),n=this._generateBatchEventParams(t),e.label=1;case 1:return e.trys.push([1,3,,4]),r=new $s(n),[4,this._client.send(r)];case 2:return o=e.sent(),this._processPutEventsSuccessResponse(o,t),[3,4];case 3:return i=e.sent(),[2,this._handlePutEventsFailure(i,t)];case 4:return[2]}},p={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},e={next:d(0),throw:d(1),return:d(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function d(t){return function(e){return function(t){if(u)throw new TypeError("Generator is already executing.");for(;p;)try{if(u=1,c&&(l=2&t[0]?c.return:t[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,t[1])).done)return l;switch(c=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return p.label++,{value:t[1],done:!1};case 5:p.label++,c=t[1],t=[0];continue;case 7:t=p.ops.pop(),p.trys.pop();continue;default:if(!(l=0<(l=p.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){p=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){p.label=t[1];break}if(6===t[0]&&p.label<l[1]){p.label=l[1],l=t;break}if(l&&p.label<l[2]){p.label=l[2],p.ops.push(t);break}l[2]&&p.ops.pop(),p.trys.pop();continue}t=a.call(s,p)}catch(e){t=[6,e],c=0}finally{u=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},ya.prototype._generateBatchEventParams=function(e){var h={ApplicationId:"",EventsRequest:{BatchItem:{}}};return Object.values(e).forEach(function(e){var t=e.params,n=t.event,r=t.timestamp,o=t.config,i=n.name,s=n.attributes,a=n.metrics,u=n.eventId,c=n.session,l=o.appId,p=o.endpointId,d=h.EventsRequest.BatchItem;h.ApplicationId=h.ApplicationId||l,d[p]||(d[p]={Endpoint:{},Events:{}}),d[p].Events[u]={EventType:i,Timestamp:new Date(r).toISOString(),Attributes:s,Metrics:a,Session:c}}),h},ya.prototype._handlePutEventsFailure=function(e,t){ha.debug("_putEvents Failed:",e);var n=e.statusCode;if(fa.includes(n)){var r=Object.values(t);this._retry(r)}},ya.prototype._processPutEventsSuccessResponse=function(e,d){var t=e.EventsResponse.Results,h=[];Object.entries(t).forEach(function(e){var t=da(e,2),p=t[0],n=t[1].EventsItemResponse;Object.entries(n).forEach(function(e){var t,n,r=da(e,2),o=r[0],i=r[1],s=i.StatusCode,a=i.Message,u=d[o],c={EventsResponse:{Results:((t={})[p]={EventsItemResponse:((n={})[o]={StatusCode:s,Message:a},n)},t)}};if(ma.includes(s))u.handlers.resolve(c);else{if(!fa.includes(s)){var l=u.params.event.name;return ha.error("event "+o+" : "+l+" failed with error: "+a),u.handlers.reject(c)}h.push(u)}})}),h.length&&this._retry(h)},ya.prototype._retry=function(e){var t,s=[];e.forEach(function(e){var t,n=e.params,r=n.event,o=r.eventId,i=r.name;if(0<n.resendLimit--)return ha.debug("resending event "+o+" : "+i+" with "+n.resendLimit+" retry attempts remaining"),void s.push(((t={})[o]=e,t));ha.debug("no retry attempts remaining for event "+o+" : "+i)}),(t=this._buffer).unshift.apply(t,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(da(arguments[t]));return e}(s))},ya.prototype._bufferToMap=function(e){return e.reduce(function(e,t){var n=da(Object.entries(t),1),r=da(n[0],2),o=r[0],i=r[1];return e[o]=i,e},{})},ya);function ya(e,t){this._pause=!1,this._flush=!1,ha.debug("Instantiating buffer with config:",t),this._buffer=[],this._client=e,this._config=t,this._sendBatch=this._sendBatch.bind(this),this._startLoop()}function va(e,t){x.Hub.dispatch("analytics",{event:e,data:t},"Analytics",Ca)}function ba(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function wa(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function _a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}var Sa=function(){return(Sa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ca="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Ea=new x.ConsoleLogger("AWSPinpointProvider"),Ia=[429,500],Aa=[202],Pa="_update_endpoint",ka="_session.stop",Oa="undefined"!=typeof navigator&&navigator&&"function"==typeof navigator.sendBeacon,Ta=(xa.prototype.getCategory=function(){return xa.category},xa.prototype.getProviderName=function(){return xa.providerName},xa.prototype.configure=function(e){var t=this;Ea.debug("configure Analytics",e);var n=e||{};if(this._config=Object.assign({},this._config,n),this._config.appId&&!this._config.disabled)if(this._config.endpointId)va("pinpointProvider_configured",null);else{var r=this.getProviderName()+"_"+this._config.appId;this._getEndpointId(r).then(function(e){Ea.debug("setting endpoint id from the cache",e),t._config.endpointId=e,va("pinpointProvider_configured",null)}).catch(function(e){Ea.debug("Failed to generate endpointId",e)})}else this._flushBuffer();return this._config},xa.prototype.record=function(r,o){return ba(this,void 0,void 0,function(){var t,n;return wa(this,function(e){switch(e.label){case 0:return Ea.debug("_public record",r),[4,this._getCredentials()];case 1:return(t=e.sent())&&this._config.appId&&this._config.region?(this._initClients(t),n=(new Date).getTime(),this._generateSession(r),r.event.eventId=E.v1(),Object.assign(r,{timestamp:n,config:this._config}),r.event.immediate?[2,this._send(r,o)]:(this._putToBuffer(r,o),[2])):(Ea.debug("cannot send events without credentials, applicationId or region"),[2,o.reject(new Error("No credentials, applicationId or region"))])}})})},xa.prototype._sendEndpointUpdate=function(n){return ba(this,void 0,void 0,function(){var t;return wa(this,function(e){switch(e.label){case 0:return this._endpointUpdateInProgress?(this._endpointBuffer.push(n),[2]):(this._endpointUpdateInProgress=!0,[4,this._updateEndpoint(n)]);case 1:return e.sent(),t=this._endpointBuffer.shift(),this._endpointUpdateInProgress=!1,t&&this._sendEndpointUpdate(t),[2]}})})},xa.prototype._putToBuffer=function(e,t){e.event.name!==Pa?this._buffer&&this._buffer.push({params:e,handlers:t}):this._sendEndpointUpdate({params:e,handlers:t})},xa.prototype._generateSession=function(e){this._sessionId=this._sessionId||E.v1();var t=e.event;switch(t.name){case"_session.start":this._sessionStartTimestamp=(new Date).getTime(),this._sessionId=E.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()};break;case ka:var n=(new Date).getTime();this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||E.v1(),t.session={Id:this._sessionId,Duration:n-this._sessionStartTimestamp,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString(),StopTimestamp:new Date(n).toISOString()},this._sessionId=void 0,this._sessionStartTimestamp=void 0;break;default:this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||E.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()}}},xa.prototype._send=function(t,n){return ba(this,void 0,void 0,function(){return wa(this,function(e){switch(t.event.name){case Pa:return[2,this._updateEndpoint({params:t,handlers:n})];case ka:return[2,this._pinpointSendStopSession(t,n)];default:return[2,this._pinpointPutEvents(t,n)]}})})},xa.prototype._generateBatchItemContext=function(e){var t,n=e.event,r=e.timestamp,o=e.config,i=n.name,s=n.attributes,a=n.metrics,u=n.eventId,c=n.session,l=o.appId,p=o.endpointId,d={ApplicationId:l,EventsRequest:{BatchItem:{}}},h={Endpoint:{}};return h.Events=((t={})[u]={EventType:i,Timestamp:new Date(r).toISOString(),Attributes:s,Metrics:a,Session:c},t),d.EventsRequest.BatchItem[p]=h,d},xa.prototype._pinpointPutEvents=function(l,p){return ba(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return wa(this,function(e){switch(e.label){case 0:t=l.event.eventId,n=l.config.endpointId,r=this._generateBatchItemContext(l),o=new $s(r),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.pinpointClient.send(o)];case 2:return i=e.sent(),s=i.EventsResponse.Results[n].EventsItemResponse[t],a=s.StatusCode,u=s.Message,Aa.includes(a)?(Ea.debug("record event success. ",i),[2,p.resolve(i)]):Ia.includes(a)?(this._retry(l,p),[3,4]):(Ea.error("Event "+t+" is not accepted, the error is "+u),[2,p.reject(i)]);case 3:return c=e.sent(),this._eventError(c),[2,p.reject(c)];case 4:return[2]}})})},xa.prototype._pinpointSendStopSession=function(e,t){if(Oa){var n=this._generateBatchItemContext(e),r=this._config.region,o=n.ApplicationId,i=n.EventsRequest,s={secret_key:this._config.credentials.secretAccessKey,access_key:this._config.credentials.accessKeyId,session_token:this._config.credentials.sessionToken},a="https://pinpoint."+r+".amazonaws.com/v1/apps/"+o+"/events/legacy",u=JSON.stringify(i),c={url:a,body:u,method:"POST"},l={region:r,service:"mobiletargeting"},p=x.Signer.signUrl(c,s,l,null);return navigator.sendBeacon(p,u)?t.resolve("sendBeacon success"):t.reject("sendBeacon failure")}this._pinpointPutEvents(e,t)},xa.prototype._retry=function(e,t){var n=e.config.resendLimit;e.resendLimit="number"==typeof e.resendLimit?e.resendLimit:n,0<e.resendLimit--?(Ea.debug("resending event "+e.eventName+" with "+e.resendLimit+" retry times left"),this._pinpointPutEvents(e,t)):Ea.debug("retry times used up for event "+e.eventName)},xa.prototype._updateEndpoint=function(h){return ba(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d;return wa(this,function(e){switch(e.label){case 0:t=h.params,n=h.handlers,r=t.config,o=t.event,i=r.appId,s=r.endpointId,a=this._endpointRequest(r,x.JS.transferKeyToLowerCase(o,[],["attributes","userAttributes","Attributes","UserAttributes"])),u={ApplicationId:i,EndpointId:s,EndpointRequest:a},e.label=1;case 1:return e.trys.push([1,3,,4]),c=new Zs(u),[4,this.pinpointClient.send(c)];case 2:return l=e.sent(),Ea.debug("updateEndpoint success",l),this._endpointGenerating=!1,this._resumeBuffer(),n.resolve(l),[2];case 3:return p=e.sent(),d={err:p,update_params:u,endpointObject:h},[2,this._handleEndpointUpdateFailure(d)];case 4:return[2]}})})},xa.prototype._handleEndpointUpdateFailure=function(o){return ba(this,void 0,void 0,function(){var t,n,r;return wa(this,function(e){switch(t=o.err,n=o.endpointObject,r=t.statusCode,Ea.debug("updateEndpoint failed",t),r){case 400:return[2,this._handleEndpointUpdateBadRequest(o)];case 403:return[2,this._handleEndpointUpdateForbidden(o)];default:if(Ia.includes(r))return[2,this._retryEndpointUpdate(n,!0)];n.handlers.reject(t)}return[2]})})},xa.prototype._handleEndpointUpdateBadRequest=function(u){return ba(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return wa(this,function(e){switch(e.label){case 0:if(t=u.err,n=u.update_params,r=u.endpointObject,o=t.message,i=n.ApplicationId,s=n.EndpointRequest,!String(o).startsWith("Exceeded maximum endpoint per user count"))return[2,r.handlers.reject(t)];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._removeUnusedEndpoints(i,s.User.UserId)];case 2:return e.sent(),Ea.debug("Removed unused endpoints successfully"),this._retryEndpointUpdate(r),[3,4];case 3:return a=e.sent(),Ea.warn("Failed to remove unused endpoints with error: "+a),Ea.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:GetUserEndpoints" in order to get endpoints info of the user'),[2,r.handlers.reject(a)];case 4:return[2]}})})},xa.prototype._handleEndpointUpdateForbidden=function(e){var t=e.err,n=e.endpointObject,r=t.code,o=t.retryable;if("ExpiredTokenException"!==r&&!o)return n.handlers.reject(t);this._retryEndpointUpdate(n)},xa.prototype._retryEndpointUpdate=function(e,t){Ea.debug("_retryEndpointUpdate",e);var n=e.params,r=n.config.resendLimit;if(n.resendLimit="number"==typeof n.resendLimit?n.resendLimit:r,0<n.resendLimit--)return Ea.debug("resending endpoint update "+n.event.eventId+" with "+n.resendLimit+" retry attempts remaining"),void(this._endpointBuffer.length?this._endpointBuffer.unshift(e):this._updateEndpoint(e));Ea.warn("resending endpoint update "+n.event.eventId+" failed after "+n.config.resendLimit+" attempts"),this._endpointGenerating&&Ea.error("Initial endpoint update failed. ")},xa.prototype._removeUnusedEndpoints=function(h,f){return ba(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d;return wa(this,function(e){switch(e.label){case 0:return e.trys.push([0,6,,7]),t=new Ks({ApplicationId:h,UserId:f}),[4,this.pinpointClient.send(t)];case 1:for(n=e.sent(),r=n.EndpointsResponse.Item,Ea.debug("get endpoints associated with the userId: "+f+" with data",r),o=r[0],i=1;i<r.length&&(s=Date.parse(o.EffectiveDate),a=Date.parse(r[i].EffectiveDate),!isNaN(s));i++){if(isNaN(a)){o=r[i];break}a<s&&(o=r[i])}u={ApplicationId:h,EndpointId:o.Id,EndpointRequest:{User:{UserId:""}}},e.label=2;case 2:return e.trys.push([2,4,,5]),c=new Zs(u),[4,this.pinpointClient.send(c)];case 3:return l=e.sent(),Ea.debug("The old endpoint is updated with an empty string for user id"),[2,l];case 4:throw p=e.sent(),Ea.debug("Failed to update the endpoint",p),p;case 5:return[3,7];case 6:throw d=e.sent(),Ea.debug("Failed to get endpoints associated with the userId: "+f+" with error",d),d;case 7:return[2]}})})},xa.prototype._initClients=function(r){return ba(this,void 0,void 0,function(){var t,n;return wa(this,function(e){return Ea.debug("init clients"),this.pinpointClient&&this._config.credentials&&this._config.credentials.sessionToken===r.sessionToken&&this._config.credentials.identityId===r.identityId?Ea.debug("no change for aws credentials, directly return from init"):(t=this._config.credentials?this._config.credentials.identityId:null,this._config.credentials=r,n=this._config.region,Ea.debug("init clients with credentials",r),this.pinpointClient=new vs({region:n,credentials:r,customUserAgent:x.getAmplifyUserAgent()}),this._bufferExists()&&t===r.identityId?this._updateBufferClient():this._initBuffer(),this._customizePinpointClientReq()),[2]})})},xa.prototype._bufferExists=function(){return this._buffer&&this._buffer instanceof ga},xa.prototype._initBuffer=function(){this._bufferExists()&&this._flushBuffer(),this._buffer=new ga(this.pinpointClient,this._config),this._endpointGenerating&&this._buffer.pause()},xa.prototype._updateBufferClient=function(){this._bufferExists()&&this._buffer.updateClient(this.pinpointClient)},xa.prototype._flushBuffer=function(){this._bufferExists()&&(this._buffer.flush(),this._buffer=null)},xa.prototype._resumeBuffer=function(){this._bufferExists()&&this._buffer.resume()},xa.prototype._customizePinpointClientReq=function(){},xa.prototype._getEndpointId=function(n){return ba(this,void 0,void 0,function(){var t;return wa(this,function(e){switch(e.label){case 0:return[4,pa.getItem(n)];case 1:return t=e.sent(),Ea.debug("endpointId from cache",t,"type",typeof t),t||(t=E.v1(),pa.setItem(n,t)),[2,t]}})})},xa.prototype._endpointRequest=function(e,t){var n=e.credentials,r=this._clientInfo||{},o=e.clientContext||{},i=e.endpoint||{},s={appVersion:r.appVersion,make:r.make,model:r.model,modelVersion:r.version,platform:r.platform},a=_a(o,["clientId","appTitle","appVersionName","appVersionCode","appPackageName"]),u=t.address?"android"===r.platform?"GCM":"APNS":void 0,c=Sa(Sa(Sa({channelType:u,requestId:E.v1(),effectiveDate:(new Date).toISOString()},i),t),{attributes:Sa(Sa({},i.attributes),t.attributes),demographic:Sa(Sa(Sa(Sa({},s),a),i.demographic),t.demographic),location:Sa(Sa({},i.location),t.location),metrics:Sa(Sa({},i.metrics),t.metrics),user:{userId:t.userId||i.userId||n.identityId,userAttributes:Sa(Sa({},i.userAttributes),t.userAttributes)}}),l=(c.userId,c.userAttributes,c.name,c.session,c.eventId,c.immediate,_a(c,["userId","userAttributes","name","session","eventId","immediate"]));return x.JS.transferKeyToUpperCase(l,[],["metrics","userAttributes","attributes"])},xa.prototype._eventError=function(e){Ea.error("record event failed.",e),Ea.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:PutEvents" in order to record events')},xa.prototype._getCredentials=function(){return ba(this,void 0,void 0,function(){var t,n;return wa(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,x.Credentials.get()];case 1:return(t=e.sent())?(Ea.debug("set credentials for analytics",t),[2,x.Credentials.shear(t)]):[2,null];case 2:return n=e.sent(),Ea.debug("ensure credentials error",n),[2,null];case 3:return[2]}})})},xa.category="Analytics",xa.providerName="AWSPinpoint",xa);function xa(e){this._endpointGenerating=!0,this._endpointUpdateInProgress=!1,this._buffer=null,this._endpointBuffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._clientInfo=x.ClientDevice.clientInfo()}function Na(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var Ua=[],Ma=(Ra.add=function(e,t,n){Da(e,t).set(n)},Ra.remove=function(e,t){Da(e,t).remove()},Ra.prototype.set=function(n){var r=this;this.context[this.methodName]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r._originalMethod.apply(r,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Na(arguments[t]));return e}(e)))}},Ra.prototype.remove=function(){this.context[this.methodName]=this._originalMethod},Ra);function Ra(e,t){this.context=e,this.methodName=t,this._originalMethod=e[t].bind(e)}function Da(t,n){var e=Ua.filter(function(e){return e.context===t&&e.methodName===n})[0];return e||(e=new Ma(t,n),Ua.push(e)),e}function Fa(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function La(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var ja=new x.ConsoleLogger("PageViewTracker"),Ba="aws-amplify-analytics-prevUrl",Va={enable:!1,provider:"AWSPinpoint",getUrl:function(){return x.JS.browserOrNode().isBrowser?window.location.origin+window.location.pathname:""}},qa=(za.prototype.configure=function(e){return Object.assign(this._config,e),"SPA"===this._config.type&&this._pageViewTrackSPA(),this._config},za.prototype._isSameUrl=function(){return sessionStorage.getItem(Ba)===this._config.getUrl()&&(ja.debug("the url is same"),!0)},za.prototype._pageViewTrackDefault=function(){return Fa(this,void 0,void 0,function(){var t,n,r;return La(this,function(e){switch(e.label){case 0:return x.JS.browserOrNode().isBrowser&&window.addEventListener&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(ja.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return r=Object.assign({url:t},n),this._config.enable&&!this._isSameUrl()&&(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch(function(e){ja.debug("Failed to record the page view event",e)}),sessionStorage.setItem(Ba,t)),[2]}})})},za.prototype._trackFunc=function(){return Fa(this,void 0,void 0,function(){var t,n,r;return La(this,function(e){switch(e.label){case 0:return x.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(ja.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return r=Object.assign({url:t},n),this._isSameUrl()||(this._tracker({name:this._config.eventName||"pageView",attributes:r},this._config.provider).catch(function(e){ja.debug("Failed to record the page view event",e)}),sessionStorage.setItem(Ba,t)),[2]}})})},za.prototype._pageViewTrackSPA=function(){x.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState?this._config.enable&&!this._hasEnabled?(Ma.add(history,"pushState",this._trackFunc),Ma.add(history,"replaceState",this._trackFunc),window.addEventListener("popstate",this._trackFunc),this._trackFunc(),this._hasEnabled=!0):(Ma.remove(history,"pushState"),Ma.remove(history,"replaceState"),window.removeEventListener("popstate",this._trackFunc),this._hasEnabled=!1):ja.debug("not in the supported web enviroment")},za);function za(e,t){ja.debug("initialize pageview tracker with opts",t),this._config=Object.assign({},Va,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),"SPA"===this._config.type?this._pageViewTrackSPA():this._pageViewTrackDefault()}var Ha=x.JS.browserOrNode().isBrowser&&window.Element?window.Element.prototype:null,Ka=Ha?Ha.matches||Ha.matchesSelector||Ha.webkitMatchesSelector||Ha.mozMatchesSelector||Ha.msMatchesSelector||Ha.oMatchesSelector:null;function Ga(e,t){if(e&&1===e.nodeType&&t){if("string"==typeof t||1===t.nodeType)return e===t||Wa(e,t);if("length"in t)for(var n=0,r=void 0;r=t[n];n++)if(e===r||Wa(e,r))return 1}}function Wa(e,t){if("string"!=typeof t)return!1;if(Ka)return Ka.call(e,t);for(var n=e.parentNode.querySelectorAll(t),r=0,o=void 0;o=n[r];r++)if(o===e)return!0;return!1}function $a(e,t,i,s,a){function n(e){var t;if(a.composed&&"function"==typeof e.composedPath)for(var n=e.composedPath(),r=0,o=void 0;o=n[r];r++)1===o.nodeType&&Ga(o,i)&&(t=o);else t=function(n,e,t){if(void 0===t&&(t=!1),n&&1===n.nodeType&&e)for(var r,o=(t?[n]:[]).concat(function(){for(var e=[],t=n;t&&t.parentNode&&1===t.parentNode.nodeType;)t=t.parentNode,e.push(t);return e}()),i=0;r=o[i];i++)if(Ga(r,e))return r}(e.target,i,!0);t&&s.call(t,e,t)}return void 0===a&&(a={}),e.addEventListener(t,n,a.useCapture),{destroy:function(){e.removeEventListener(t,n,a.useCapture)}}}var Ja=new x.ConsoleLogger("EventTracker"),Ya={enable:!1,events:["click"],selectorPrefix:"data-amplify-analytics-",provider:"AWSPinpoint"},Za=(Qa.prototype.configure=function(e){var t=this;if(Object.assign(this._config,e),this._config.enable){if(this._config.enable&&0===Object.keys(this._delegates).length){var n="["+this._config.selectorPrefix+"on]";this._config.events.forEach(function(e){t._delegates[e]=$a(document,e,n,t._trackFunc,{composed:!0,useCapture:!0})})}}else Object.keys(this._delegates).forEach(function(e){"function"==typeof t._delegates[e].destroy&&t._delegates[e].destroy()}),this._delegates={};return this._config},Qa.prototype._trackFunc=function(f,m){return e=this,u=function(){var n,t,r,o,i,s,a,u,c,l,p,e,d;return a=this,u=function(e){switch(e.label){case 0:return n={},t=m.getAttribute(this._config.selectorPrefix+"on").split(/\s*,\s*/),r=m.getAttribute(this._config.selectorPrefix+"name"),(o=m.getAttribute(this._config.selectorPrefix+"attrs"))&&o.split(/\s*,\s*/).forEach(function(e){var t=e.trim().split(/\s*:\s*/);n[t[0]]=t[1]}),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return i=e.sent(),[3,3];case 2:i=this._config.attributes,e.label=3;case 3:return s=Object.assign({type:f.type,target:f.target.localName+" with id "+f.target.id},i,n),Ja.debug("events needed to be recorded",t),Ja.debug("attributes needed to be attached",n),t.indexOf(f.type)<0?Ja.debug("event "+f.type+" is not selected to be recorded"):this._tracker({name:r||"event",attributes:s},this._config.provider).catch(function(e){Ja.debug("Failed to record the "+f.type+" event', "+e)}),[2]}},d={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]},e={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function h(t){return function(e){return function(t){if(c)throw new TypeError("Generator is already executing.");for(;d;)try{if(c=1,l&&(p=2&t[0]?l.return:t[0]?l.throw||((p=l.return)&&p.call(l),0):l.next)&&!(p=p.call(l,t[1])).done)return p;switch(l=0,p&&(t=[2&t[0],p.value]),t[0]){case 0:case 1:p=t;break;case 4:return d.label++,{value:t[1],done:!1};case 5:d.label++,l=t[1],t=[0];continue;case 7:t=d.ops.pop(),d.trys.pop();continue;default:if(!(p=0<(p=d.trys).length&&p[p.length-1])&&(6===t[0]||2===t[0])){d=0;continue}if(3===t[0]&&(!p||t[1]>p[0]&&t[1]<p[3])){d.label=t[1];break}if(6===t[0]&&d.label<p[1]){d.label=p[1],p=t;break}if(p&&d.label<p[2]){d.label=p[2],d.ops.push(t);break}p[2]&&d.ops.pop(),d.trys.pop();continue}t=u.call(a,d)}catch(e){t=[6,e],l=0}finally{c=p=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},Qa);function Qa(e,t){x.JS.browserOrNode().isBrowser&&window.addEventListener?(this._config=Object.assign({},Ya,t),this._tracker=e,this._delegates={},this._trackFunc=this._trackFunc.bind(this),Ja.debug("initialize pageview tracker with opts",this._config),this.configure(this._config)):Ja.debug("not in the supported web environment")}function Xa(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function eu(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var tu=new x.ConsoleLogger("SessionTracker"),nu={enable:!1,provider:"AWSPinpoint"},ru=!1,ou=(iu.prototype._envCheck=function(){if(!x.JS.browserOrNode().isBrowser)return!1;if(!document||!document.addEventListener)return tu.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this._hidden="hidden",this._visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this._hidden="msHidden",this._visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return tu.debug("not in the supported web environment"),!1;this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"}return!0},iu.prototype._trackFunc=function(){return Xa(this,void 0,void 0,function(){var t,n;return eu(this,function(e){switch(e.label){case 0:return"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return n=Object.assign({},t),document.visibilityState===this._hidden?this._tracker({name:"_session.stop",attributes:n},this._config.provider).catch(function(e){tu.debug("record session stop event failed.",e)}):this._tracker({name:"_session.start",attributes:n},this._config.provider).catch(function(e){tu.debug("record session start event failed.",e)}),[2]}})})},iu.prototype._trackBeforeUnload=function(e){var n=this;("function"==typeof this._config.attributes?Promise.resolve(this._config.attributes()):Promise.resolve(this._config.attributes)).then(function(e){var t=Object.assign({},e);n._tracker({name:"_session.stop",attributes:t,immediate:!0},n._config.provider).catch(function(e){tu.debug("record session stop event failed.",e)})})},iu.prototype._sendInitialEvent=function(){return Xa(this,void 0,void 0,function(){var t,n;return eu(this,function(e){switch(e.label){case 0:return ru?(tu.debug("the start session has been sent when the page is loaded"),[2]):(ru=!0,"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]);case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return n=Object.assign({},t),this._tracker({name:"_session.start",attributes:n},this._config.provider).catch(function(e){tu.debug("record session start event failed.",e)}),[2]}})})},iu.prototype.configure=function(e){return this._envCheck()&&(Object.assign(this._config,e),this._config.enable&&!this._hasEnabled?(this._sendInitialEvent(),document.addEventListener(this._visibilityChange,this._trackFunc,!1),window.addEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!0):!this._config.enable&&this._hasEnabled&&(document.removeEventListener(this._visibilityChange,this._trackFunc,!1),window.removeEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!1)),this._config},iu);function iu(e,t){this._config=Object.assign({},nu,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),this._trackBeforeUnload=this._trackBeforeUnload.bind(this),this.configure(this._config)}function su(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function au(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var uu=function(){return(uu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},cu=new x.ConsoleLogger("AnalyticsClass"),lu="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",pu={pageView:qa,event:Za,session:ou},du=null,hu=(fu.prototype.getModuleName=function(){return"Analytics"},fu.prototype.configure=function(e){var n=this;if(!e)return this._config;cu.debug("configure Analytics",e);var t=x.Parser.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,t.Analytics,e),this._config.disabled&&(this._disabled=!0),this._pluggables.forEach(function(e){var t="AWSPinpoint"!==e.getProviderName()||n._config.AWSPinpoint?n._config[e.getProviderName()]:n._config;e.configure(uu({disabled:n._config.disabled},t))}),0===this._pluggables.length&&this.addPluggable(new Ta),void 0===this._config.autoSessionRecord&&(this._config.autoSessionRecord=!0),x.Hub.dispatch("analytics",{event:"configured",data:null,message:"The Analytics category has been configured successfully"},"Analytics",lu),cu.debug("current configuration",this._config),this._config},fu.prototype.addPluggable=function(e){if(e&&"Analytics"===e.getCategory()){this._pluggables.push(e);var t="AWSPinpoint"!==e.getProviderName()||this._config.AWSPinpoint?this._config[e.getProviderName()]:this._config,n=uu({disabled:this._config.disabled},t);return e.configure(n),n}},fu.prototype.getPluggable=function(e){for(var t=0;t<this._pluggables.length;t+=1){var n=this._pluggables[t];if(n.getProviderName()===e)return n}return cu.debug("No plugin found with providerName",e),null},fu.prototype.removePluggable=function(e){for(var t=0;t<this._pluggables.length&&this._pluggables[t].getProviderName()!==e;)t+=1;return t===this._pluggables.length?void cu.debug("No plugin found with providerName",e):void this._pluggables.splice(t,t+1)},fu.prototype.disable=function(){this._disabled=!0},fu.prototype.enable=function(){this._disabled=!1},fu.prototype.startSession=function(n){return su(this,void 0,void 0,function(){var t;return au(this,function(e){return t={event:{name:"_session.start"},provider:n},[2,this._sendEvent(t)]})})},fu.prototype.stopSession=function(n){return su(this,void 0,void 0,function(){var t;return au(this,function(e){return t={event:{name:"_session.stop"},provider:n},[2,this._sendEvent(t)]})})},fu.prototype.record=function(r,o,i){return su(this,void 0,void 0,function(){var t,n;return au(this,function(e){return this.isAnalyticsConfigured()?(n="string"==typeof r?{event:{name:r,attributes:o,metrics:i},provider:"AWSPinpoint"}:{event:r,provider:o},[2,this._sendEvent(n)]):(t="Analytics has not been configured",cu.debug(t),[2,Promise.reject(new Error(t))])})})},fu.prototype.updateEndpoint=function(n,r){return su(this,void 0,void 0,function(){var t;return au(this,function(e){return t=uu(uu({},n),{name:"_update_endpoint"}),[2,this.record(t,r)]})})},fu.prototype._sendEvent=function(r){var e=this;if(!this.isAnalyticsConfigured()){var t="Analytics has not been configured";return cu.debug(t),Promise.reject(new Error(t))}if(this._disabled)return cu.debug("Analytics has been disabled"),Promise.resolve();var o=r.provider?r.provider:"AWSPinpoint";return new Promise(function(t,n){e._pluggables.forEach(function(e){e.getProviderName()===o&&e.record(r,{resolve:t,reject:n})})})},fu.prototype.autoTrack=function(e,t){if(pu[e]){"session"===e&&(this._config.autoSessionRecord=t.enable);var n=this._trackers[e];n?n.configure(t):this._trackers[e]=new pu[e](this.record,t)}else cu.debug("invalid tracker type")},fu.prototype.isAnalyticsConfigured=function(){return this._config&&0<Object.entries(this._config).length},fu);function fu(){this._config={},this._pluggables=[],this._disabled=!1,this._trackers={},(du=this).record=this.record.bind(this),x.Hub.listen("auth",Su),x.Hub.listen("storage",Su),x.Hub.listen("analytics",Su),x.Amplify.register(this)}var mu,gu,yu,vu,bu=!1,wu=!1,_u=!1,Su=function(e){var t=e.channel,n=e.payload;switch(cu.debug("on hub capsule "+t,n),t){case"auth":Eu(n);break;case"storage":Cu(n);break;case"analytics":Iu(n)}},Cu=function(e){var t=e.data,n=t.attrs,r=t.metrics;n&&_u&&du.record({name:"Storage",attributes:n,metrics:r}).catch(function(e){cu.debug("Failed to send the storage event automatically",e)})},Eu=function(e){var t=e.event;if(t){var n=function(n){return su(void 0,void 0,void 0,function(){var t;return au(this,function(e){switch(e.label){case 0:if(!wu||!_u)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,du.record({name:"_userauth."+n})];case 2:return[2,e.sent()];case 3:return t=e.sent(),cu.debug("Failed to send the "+n+" event automatically",t),[3,4];case 4:return[2]}})})};switch(t){case"signIn":return n("sign_in");case"signUp":return n("sign_up");case"signOut":return n("sign_out");case"signIn_failure":return n("auth_fail");case"configured":wu=!0,_u&&Au()}}},Iu=function(e){var t=e.event;if(t)switch(t){case"pinpointProvider_configured":_u=!0,wu&&_u&&Au()}},Au=function(){var e=du.configure();!bu&&e.autoSessionRecord&&(du.updateEndpoint({immediate:!0}).catch(function(e){cu.debug("Failed to update the endpoint",e)}),bu=!0),du.autoTrack("session",{enable:e.autoSessionRecord})},Pu=new hu;function ku(t){return t&&["provider","customState"].find(function(e){return t.hasOwnProperty(e)})}function Ou(e){return void 0!==e.redirectSignIn}(gu=mu=mu||{}).Cognito="COGNITO",gu.Google="Google",gu.Facebook="Facebook",gu.Amazon="LoginWithAmazon",(vu=yu=yu||{}).NoConfig="noConfig",vu.MissingAuthConfig="missingAuthConfig",vu.EmptyUsername="emptyUsername",vu.InvalidUsername="invalidUsername",vu.EmptyPassword="emptyPassword",vu.EmptyCode="emptyCode",vu.SignUpError="signUpError",vu.NoMFA="noMFA",vu.InvalidMFA="invalidMFA",vu.EmptyChallengeResponse="emptyChallengeResponse",vu.NoUserSession="noUserSession",vu.Default="default";var Tu,xu=((Tu=Fu.prototype).getUsername=function(){return this.username},Tu.getPassword=function(){return this.password},Tu.getValidationData=function(){return this.validationData},Tu.getAuthParameters=function(){return this.authParameters},Tu.getClientMetadata=function(){return this.clientMetadata},Fu),Nu="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Uu=[],Mu=[],Ru="undefined"!=typeof Uint8Array?Uint8Array:Array,Du=!1;function Fu(e){var t=e||{},n=t.ValidationData,r=t.Username,o=t.Password,i=t.AuthParameters,s=t.ClientMetadata;this.validationData=n||{},this.authParameters=i||{},this.clientMetadata=s||{},this.username=r,this.password=o}function Lu(){Du=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)Uu[t]=e[t],Mu[e.charCodeAt(t)]=t;Mu["-".charCodeAt(0)]=62,Mu["_".charCodeAt(0)]=63}function ju(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16)+(e[i+1]<<8)+e[i+2],o.push(Uu[r>>18&63]+Uu[r>>12&63]+Uu[r>>6&63]+Uu[63&r]);return o.join("")}function Bu(e){var t;Du||Lu();for(var n=e.length,r=n%3,o="",i=[],s=0,a=n-r;s<a;s+=16383)i.push(ju(e,s,a<s+16383?a:s+16383));return 1==r?(t=e[n-1],o+=Uu[t>>2],o+=Uu[t<<4&63],o+="=="):2==r&&(t=(e[n-2]<<8)+e[n-1],o+=Uu[t>>10],o+=Uu[t>>4&63],o+=Uu[t<<2&63],o+="="),i.push(o),i.join("")}function Vu(e,t,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,c=u>>1,l=-7,p=n?o-1:0,d=n?-1:1,h=e[t+p];for(p+=d,i=h&(1<<-l)-1,h>>=-l,l+=a;0<l;i=256*i+e[t+p],p+=d,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=r;0<l;s=256*s+e[t+p],p+=d,l-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),i-=c}return(h?-1:1)*s*Math.pow(2,i-r)}function qu(e,t,n,r,o,i){var s,a,u,c=8*i-o-1,l=(1<<c)-1,p=l>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),2<=(t+=1<=s+p?d/u:d*Math.pow(2,1-p))*u&&(s++,u/=2),l<=s+p?(a=0,s=l):1<=s+p?(a=(t*u-1)*Math.pow(2,o),s+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,o),s=0));8<=o;e[n+h]=255&a,h+=f,a/=256,o-=8);for(s=s<<o|a,c+=o;0<c;e[n+h]=255&s,h+=f,s/=256,c-=8);e[n+h-f]|=128*m}var zu={}.toString,Hu=Array.isArray||function(e){return"[object Array]"==zu.call(e)};function Ku(){return Wu.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Gu(e,t){if(Ku()<t)throw new RangeError("Invalid typed array length");return Wu.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Wu.prototype:(null===e&&(e=new Wu(t)),e.length=t),e}function Wu(e,t,n){if(!(Wu.TYPED_ARRAY_SUPPORT||this instanceof Wu))return new Wu(e,t,n);if("number"!=typeof e)return $u(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Yu(this,e)}function $u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),Wu.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Wu.prototype:e=Zu(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!Wu.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|ec(t,n),o=(e=Gu(e,r)).write(t,n);return o!==r&&(e=e.slice(0,o)),e}(e,t,n):function(e,t){if(Xu(t)){var n=0|Qu(t.length);return 0===(e=Gu(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?Gu(e,0):Zu(e,t);if("Buffer"===t.type&&Hu(t.data))return Zu(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function Ju(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Yu(e,t){if(Ju(t),e=Gu(e,t<0?0:0|Qu(t)),!Wu.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function Zu(e,t){var n=t.length<0?0:0|Qu(t.length);e=Gu(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function Qu(e){if(e>=Ku())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ku().toString(16)+" bytes");return 0|e}function Xu(e){return null!=e&&e._isBuffer}function ec(e,t){if(Xu(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return _c(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Sc(e).length;default:if(r)return _c(e).length;t=(""+t).toLowerCase(),r=!0}}function tc(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function nc(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=Wu.from(t,r)),Xu(t))return 0===t.length?-1:rc(e,t,n,r,o);if("number"==typeof t)return t&=255,Wu.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):rc(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function rc(e,t,n,r,o){var i,s=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a/=s=2,u/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var l=-1;for(i=n;i<a;i++)if(c(e,i)===c(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===u)return l*s}else-1!==l&&(i-=i-l),l=-1}else for(a<n+u&&(n=a-u),i=n;0<=i;i--){for(var p=!0,d=0;d<u;d++)if(c(e,i+d)!==c(t,d)){p=!1;break}if(p)return i}return-1}function oc(e,t,n,r){n=Number(n)||0;var o=e.length-n;(!r||o<(r=Number(r)))&&(r=o);var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");i/2<r&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function ic(e,t,n,r){return Cc(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function sc(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,s,a,u,c=e[o],l=null,p=239<c?4:223<c?3:191<c?2:1;if(o+p<=n)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(i=e[o+1]))&&127<(u=(31&c)<<6|63&i)&&(l=u);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&i)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,p=1):65535<l&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=p}return function(e){var t=e.length;if(t<=ac)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ac));return n}(r)}Wu.TYPED_ARRAY_SUPPORT=void 0===Nu.TYPED_ARRAY_SUPPORT||Nu.TYPED_ARRAY_SUPPORT,Wu.poolSize=8192,Wu._augment=function(e){return e.__proto__=Wu.prototype,e},Wu.from=function(e,t,n){return $u(null,e,t,n)},Wu.TYPED_ARRAY_SUPPORT&&(Wu.prototype.__proto__=Uint8Array.prototype,Wu.__proto__=Uint8Array),Wu.alloc=function(e,t,n){return o=t,i=n,Ju(r=e),r<=0||void 0===o?Gu(null,r):"string"==typeof i?Gu(null,r).fill(o,i):Gu(null,r).fill(o);var r,o,i},Wu.allocUnsafe=function(e){return Yu(null,e)},Wu.allocUnsafeSlow=function(e){return Yu(null,e)},Wu.isBuffer=function(e){return null!=e&&(!!e._isBuffer||Ec(e)||"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Ec(e.slice(0,0)))},Wu.compare=function(e,t){if(!Xu(e)||!Xu(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},Wu.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Wu.concat=function(e,t){if(!Hu(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Wu.alloc(0);var n;if(void 0===t)for(n=t=0;n<e.length;++n)t+=e[n].length;var r=Wu.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(!Xu(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},Wu.byteLength=ec,Wu.prototype._isBuffer=!0,Wu.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)tc(this,t,t+1);return this},Wu.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)tc(this,t,t+3),tc(this,t+1,t+2);return this},Wu.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)tc(this,t,t+7),tc(this,t+1,t+6),tc(this,t+2,t+5),tc(this,t+3,t+4);return this},Wu.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?sc(this,0,e):function(e,t,n){var r,o,i,s=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return lc(this,t,n);case"utf8":case"utf-8":return sc(this,t,n);case"ascii":return uc(this,t,n);case"latin1":case"binary":return cc(this,t,n);case"base64":return r=this,i=n,0===(o=t)&&i===r.length?Bu(r):Bu(r.slice(o,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pc(this,t,n);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}.apply(this,arguments)},Wu.prototype.equals=function(e){if(!Xu(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Wu.compare(this,e)},Wu.prototype.inspect=function(){var e="";return 0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... ")),"<Buffer "+e+">"},Wu.prototype.compare=function(e,t,n,r,o){if(!Xu(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(o<=r&&n<=t)return 0;if(o<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(i,s),u=this.slice(r,o),c=e.slice(t,n),l=0;l<a;++l)if(u[l]!==c[l]){i=u[l],s=c[l];break}return i<s?-1:s<i?1:0},Wu.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Wu.prototype.indexOf=function(e,t,n){return nc(this,e,t,n,!0)},Wu.prototype.lastIndexOf=function(e,t,n){return nc(this,e,t,n,!1)},Wu.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o,i,s,a=this.length-t;if((void 0===n||a<n)&&(n=a),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var u,c,l,p,d=!1;;)switch(r){case"hex":return oc(this,e,t,n);case"utf8":case"utf-8":return l=t,p=n,Cc(_c(e,this.length-l),this,l,p);case"ascii":return ic(this,e,t,n);case"latin1":case"binary":return ic(this,e,t,n);case"base64":return u=t,c=n,Cc(Sc(e),this,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i=t,s=n,Cc(function(e,t){for(var n,r,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,o=n%256,i.push(o),i.push(r);return i}(e,(o=this).length-i),o,i,s);default:if(d)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),d=!0}},Wu.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ac=4096;function uc(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function cc(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function lc(e,t,n){var r,o=e.length;(!t||t<0)&&(t=0),(!n||n<0||o<n)&&(n=o);for(var i="",s=t;s<n;++s)i+=(r=e[s])<16?"0"+r.toString(16):r.toString(16);return i}function pc(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function dc(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function hc(e,t,n,r,o,i){if(!Xu(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function fc(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function mc(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function gc(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function yc(e,t,n,r,o){return o||gc(e,0,n,4),qu(e,t,n,r,23,4),n+4}function vc(e,t,n,r,o){return o||gc(e,0,n,8),qu(e,t,n,r,52,8),n+8}Wu.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),Wu.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=Wu.prototype;else{var o=t-e;n=new Wu(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},Wu.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||dc(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},Wu.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||dc(e,t,this.length);for(var r=this[e+--t],o=1;0<t&&(o*=256);)r+=this[e+--t]*o;return r},Wu.prototype.readUInt8=function(e,t){return t||dc(e,1,this.length),this[e]},Wu.prototype.readUInt16LE=function(e,t){return t||dc(e,2,this.length),this[e]|this[e+1]<<8},Wu.prototype.readUInt16BE=function(e,t){return t||dc(e,2,this.length),this[e]<<8|this[e+1]},Wu.prototype.readUInt32LE=function(e,t){return t||dc(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Wu.prototype.readUInt32BE=function(e,t){return t||dc(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Wu.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||dc(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return(o*=128)<=r&&(r-=Math.pow(2,8*t)),r},Wu.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||dc(e,t,this.length);for(var r=t,o=1,i=this[e+--r];0<r&&(o*=256);)i+=this[e+--r]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*t)),i},Wu.prototype.readInt8=function(e,t){return t||dc(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Wu.prototype.readInt16LE=function(e,t){t||dc(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Wu.prototype.readInt16BE=function(e,t){t||dc(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Wu.prototype.readInt32LE=function(e,t){return t||dc(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Wu.prototype.readInt32BE=function(e,t){return t||dc(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Wu.prototype.readFloatLE=function(e,t){return t||dc(e,4,this.length),Vu(this,e,!0,23,4)},Wu.prototype.readFloatBE=function(e,t){return t||dc(e,4,this.length),Vu(this,e,!1,23,4)},Wu.prototype.readDoubleLE=function(e,t){return t||dc(e,8,this.length),Vu(this,e,!0,52,8)},Wu.prototype.readDoubleBE=function(e,t){return t||dc(e,8,this.length),Vu(this,e,!1,52,8)},Wu.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||hc(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},Wu.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||hc(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+n},Wu.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||hc(this,e,t,1,255,0),Wu.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Wu.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||hc(this,e,t,2,65535,0),Wu.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):fc(this,e,t,!0),t+2},Wu.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||hc(this,e,t,2,65535,0),Wu.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):fc(this,e,t,!1),t+2},Wu.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||hc(this,e,t,4,4294967295,0),Wu.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):mc(this,e,t,!0),t+4},Wu.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||hc(this,e,t,4,4294967295,0),Wu.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):mc(this,e,t,!1),t+4},Wu.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);hc(this,e,t,n,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},Wu.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);hc(this,e,t,n,o-1,-o)}var i=n-1,s=1,a=0;for(this[t+i]=255&e;0<=--i&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},Wu.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||hc(this,e,t,1,127,-128),Wu.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Wu.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||hc(this,e,t,2,32767,-32768),Wu.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):fc(this,e,t,!0),t+2},Wu.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||hc(this,e,t,2,32767,-32768),Wu.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):fc(this,e,t,!1),t+2},Wu.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||hc(this,e,t,4,2147483647,-2147483648),Wu.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):mc(this,e,t,!0),t+4},Wu.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||hc(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Wu.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):mc(this,e,t,!1),t+4},Wu.prototype.writeFloatLE=function(e,t,n){return yc(this,e,t,!0,n)},Wu.prototype.writeFloatBE=function(e,t,n){return yc(this,e,t,!1,n)},Wu.prototype.writeDoubleLE=function(e,t,n){return vc(this,e,t,!0,n)},Wu.prototype.writeDoubleBE=function(e,t,n){return vc(this,e,t,!1,n)},Wu.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),t=t||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;0<=o;--o)e[o+t]=this[o+n];else if(i<1e3||!Wu.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},Wu.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Wu.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(i=t;i<n;++i)this[i]=e;else{var s=Xu(e)?e:_c(new Wu(e,r).toString()),a=s.length;for(i=0;i<n-t;++i)this[i+t]=s[i%a]}return this};var bc,wc=/[^+\/0-9A-Za-z-_]/g;function _c(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],s=0;s<r;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!o){if(56319<n){-1<(t-=3)&&i.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&i.push(239,191,189);continue}o=n;continue}if(n<56320){-1<(t-=3)&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,n<128){if(--t<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Sc(e){return function(e){var t,n,r,o,i;Du||Lu();var s=e.length;if(0<s%4)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[s-2]?2:"="===e[s-1]?1:0,i=new Ru(3*s/4-o),n=0<o?s-4:s;var a=0;for(t=0;t<n;t+=4)r=Mu[e.charCodeAt(t)]<<18|Mu[e.charCodeAt(t+1)]<<12|Mu[e.charCodeAt(t+2)]<<6|Mu[e.charCodeAt(t+3)],i[a++]=r>>16&255,i[a++]=r>>8&255,i[a++]=255&r;return 2==o?(r=Mu[e.charCodeAt(t)]<<2|Mu[e.charCodeAt(t+1)]>>4,i[a++]=255&r):1==o&&(r=Mu[e.charCodeAt(t)]<<10|Mu[e.charCodeAt(t+1)]<<4|Mu[e.charCodeAt(t+2)]>>2,i[a++]=r>>8&255,i[a++]=255&r),i}(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(wc,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Cc(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function Ec(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function Ic(e,t){null!=e&&this.fromString(e,t)}function Ac(){return new Ic(null)}var Pc="undefined"!=typeof navigator;bc=Pc&&"Microsoft Internet Explorer"==navigator.appName?(Ic.prototype.am=function(e,t,n,r,o,i){for(var s=32767&t,a=t>>15;0<=--i;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*s;o=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&o))>>>30)+(l>>>15)+a*c+(o>>>30),n[r++]=1073741823&u}return o},30):Pc&&"Netscape"!=navigator.appName?(Ic.prototype.am=function(e,t,n,r,o,i){for(;0<=--i;){var s=t*this[e++]+n[r]+o;o=Math.floor(s/67108864),n[r++]=67108863&s}return o},26):(Ic.prototype.am=function(e,t,n,r,o,i){for(var s=16383&t,a=t>>14;0<=--i;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*s;o=((u=s*u+((16383&l)<<14)+n[r]+o)>>28)+(l>>14)+a*c,n[r++]=268435455&u}return o},28),Ic.prototype.DB=bc,Ic.prototype.DM=(1<<bc)-1,Ic.prototype.DV=1<<bc,Ic.prototype.FV=Math.pow(2,52),Ic.prototype.F1=52-bc,Ic.prototype.F2=2*bc-52;var kc,Oc,Tc=new Array;for(kc="0".charCodeAt(0),Oc=0;Oc<=9;++Oc)Tc[kc++]=Oc;for(kc="a".charCodeAt(0),Oc=10;Oc<36;++Oc)Tc[kc++]=Oc;for(kc="A".charCodeAt(0),Oc=10;Oc<36;++Oc)Tc[kc++]=Oc;function xc(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function Nc(e){var t=Ac();return t.fromInt(e),t}function Uc(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function Mc(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Rc(e){return Wu.from(P.lib.WordArray.random(e).toString(),"hex")}Mc.prototype.convert=function(e){var t=Ac();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(Ic.ZERO)&&this.m.subTo(t,t),t},Mc.prototype.revert=function(e){var t=Ac();return e.copyTo(t),this.reduce(t),t},Mc.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},Mc.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},Mc.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},Ic.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s},Ic.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},Ic.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var r,o=e.length,i=!1,s=0;0<=--o;){var a=null==(r=Tc[e.charCodeAt(o)])?-1:r;a<0?"-"==e.charAt(o)&&(i=!0):(i=!1,0==s?this[this.t++]=a:s+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,(s+=n)>=this.DB&&(s-=this.DB))}this.clamp(),i&&Ic.ZERO.subTo(this,this)},Ic.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t},Ic.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;0<=n;--n)t[n+e]=this[n];for(n=e-1;0<=n;--n)t[n]=0;t.t=this.t+e,t.s=this.s},Ic.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},Ic.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,o=this.DB-r,i=(1<<o)-1,s=Math.floor(e/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;0<=n;--n)t[n+s+1]=this[n]>>o|a,a=(this[n]&i)<<r;for(n=s-1;0<=n;--n)t[n]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},Ic.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,o=this.DB-r,i=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&i)<<o,t[s-n]=this[s]>>r;0<r&&(t[this.t-n-1]|=(this.s&i)<<o),t.t=this.t-n,t.clamp()}},Ic.prototype.subTo=function(e,t){for(var n=0,r=0,o=Math.min(e.t,this.t);n<o;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:0<r&&(t[n++]=r),t.t=n,t.clamp()},Ic.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),o=n.t;for(t.t=o+r.t;0<=--o;)t[o]=0;for(o=0;o<r.t;++o)t[o+n.t]=n.am(0,r[o],t,o,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&Ic.ZERO.subTo(t,t)},Ic.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;0<=--n;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},Ic.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var o=this.abs();if(o.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=Ac());var i=Ac(),s=this.s,a=e.s,u=this.DB-Uc(r[r.t-1]);0<u?(r.lShiftTo(u,i),o.lShiftTo(u,n)):(r.copyTo(i),o.copyTo(n));var c=i.t,l=i[c-1];if(0!=l){var p=l*(1<<this.F1)+(1<c?i[c-2]>>this.F2:0),d=this.FV/p,h=(1<<this.F1)/p,f=1<<this.F2,m=n.t,g=m-c,y=null==t?Ac():t;for(i.dlShiftTo(g,y),0<=n.compareTo(y)&&(n[n.t++]=1,n.subTo(y,n)),Ic.ONE.dlShiftTo(c,y),y.subTo(i,i);i.t<c;)i[i.t++]=0;for(;0<=--g;){var v=n[--m]==l?this.DM:Math.floor(n[m]*d+(n[m-1]+f)*h);if((n[m]+=i.am(0,v,n,g,0,c))<v)for(i.dlShiftTo(g,y),n.subTo(y,n);n[m]<--v;)n.subTo(y,n)}null!=t&&(n.drShiftTo(c,t),s!=a&&Ic.ZERO.subTo(t,t)),n.t=c,n.clamp(),0<u&&n.rShiftTo(u,n),s<0&&Ic.ZERO.subTo(n,n)}}},Ic.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},Ic.prototype.addTo=function(e,t){for(var n=0,r=0,o=Math.min(e.t,this.t);n<o;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,0<r?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},Ic.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,r=(1<<t)-1,o=!1,i="",s=this.t,a=this.DB-s*this.DB%t;if(0<s--)for(a<this.DB&&0<(n=this[s]>>a)&&(o=!0,i=xc(n));0<=s;)a<t?(n=(this[s]&(1<<a)-1)<<t-a,n|=this[--s]>>(a+=this.DB-t)):(n=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),0<n&&(o=!0),o&&(i+=xc(n));return o?i:"0"},Ic.prototype.negate=function(){var e=Ac();return Ic.ZERO.subTo(this,e),e},Ic.prototype.abs=function(){return this.s<0?this.negate():this},Ic.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;0<=--n;)if(0!=(t=this[n]-e[n]))return t;return 0},Ic.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Uc(this[this.t-1]^this.s&this.DM)},Ic.prototype.mod=function(e){var t=Ac();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(Ic.ZERO)&&e.subTo(t,t),t},Ic.prototype.equals=function(e){return 0==this.compareTo(e)},Ic.prototype.add=function(e){var t=Ac();return this.addTo(e,t),t},Ic.prototype.subtract=function(e){var t=Ac();return this.subTo(e,t),t},Ic.prototype.multiply=function(e){var t=Ac();return this.multiplyTo(e,t),t},Ic.prototype.divide=function(e){var t=Ac();return this.divRemTo(e,t,null),t},Ic.prototype.modPow=function(e,t,n){var r,o=e.bitLength(),i=Nc(1),s=new Mc(t);if(o<=0)return i;r=o<18?1:o<48?3:o<144?4:o<768?5:6;var a=new Array,u=3,c=r-1,l=(1<<r)-1;if(a[1]=s.convert(this),1<r){var p=Ac();for(s.sqrTo(a[1],p);u<=l;)a[u]=Ac(),s.mulTo(p,a[u-2],a[u]),u+=2}var d,h,f=e.t-1,m=!0,g=Ac();for(o=Uc(e[f])-1;0<=f;){for(c<=o?d=e[f]>>o-c&l:(d=(e[f]&(1<<o+1)-1)<<c-o,0<f&&(d|=e[f-1]>>this.DB+o-c)),u=r;0==(1&d);)d>>=1,--u;if((o-=u)<0&&(o+=this.DB,--f),m)a[d].copyTo(i),m=!1;else{for(;1<u;)s.sqrTo(i,g),s.sqrTo(g,i),u-=2;0<u?s.sqrTo(i,g):(h=i,i=g,g=h),s.mulTo(g,a[d],i)}for(;0<=f&&0==(e[f]&1<<o);)s.sqrTo(i,g),h=i,i=g,g=h,--o<0&&(o=this.DB-1,--f)}var y=s.revert(i);return n(null,y),y},Ic.ZERO=Nc(0),Ic.ONE=Nc(1);var Dc,Fc,Lc=((Fc=Vc.prototype).getSmallAValue=function(){return this.smallAValue},Fc.getLargeAValue=function(n){var r=this;this.largeAValue?n(null,this.largeAValue):this.calculateA(this.smallAValue,function(e,t){e&&n(e,null),r.largeAValue=t,n(null,r.largeAValue)})},Fc.generateRandomSmallA=function(){return new Ic(Rc(128).toString("hex"),16).mod(this.N)},Fc.generateRandomString=function(){return Rc(40).toString("base64")},Fc.getRandomPassword=function(){return this.randomPassword},Fc.getSaltDevices=function(){return this.SaltToHashDevices},Fc.getVerifierDevices=function(){return this.verifierDevices},Fc.generateHashDevice=function(e,t,n){var r=this;this.randomPassword=this.generateRandomString();var o=""+e+t+":"+this.randomPassword,i=this.hash(o),s=Rc(16).toString("hex");this.SaltToHashDevices=this.padHex(new Ic(s,16)),this.g.modPow(new Ic(this.hexHash(this.SaltToHashDevices+i),16),this.N,function(e,t){e&&n(e,null),r.verifierDevices=r.padHex(t),n(null,null)})},Fc.calculateA=function(e,n){var r=this;this.g.modPow(e,this.N,function(e,t){e&&n(e,null),t.mod(r.N).equals(Ic.ZERO)&&n(new Error("Illegal paramater. A mod N cannot be 0."),null),n(null,t)})},Fc.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new Ic(this.UHexHash,16)},Fc.hash=function(e){var t=e instanceof Wu?P.lib.WordArray.create(e):e,n=O(t).toString();return new Array(64-n.length).join("0")+n},Fc.hexHash=function(e){return this.hash(Wu.from(e,"hex"))},Fc.computehkdf=function(e,t){var n=P.lib.WordArray.create(Wu.concat([this.infoBits,Wu.from(String.fromCharCode(1),"utf8")])),r=e instanceof Wu?P.lib.WordArray.create(e):e,o=t instanceof Wu?P.lib.WordArray.create(t):t,i=T(r,o),s=T(n,i);return Wu.from(s.toString(),"hex").slice(0,16)},Fc.getPasswordAuthenticationKey=function(e,t,n,r,o){var i=this;if(n.mod(this.N).equals(Ic.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(Ic.ZERO))throw new Error("U cannot be zero.");var s=""+this.poolName+e+":"+t,a=this.hash(s),u=new Ic(this.hexHash(this.padHex(r)+a),16);this.calculateS(u,n,function(e,t){e&&o(e,null);var n=i.computehkdf(Wu.from(i.padHex(t),"hex"),Wu.from(i.padHex(i.UValue.toString(16)),"hex"));o(null,n)})},Fc.calculateS=function(n,r,o){var i=this;this.g.modPow(n,this.N,function(e,t){e&&o(e,null),r.subtract(i.k.multiply(t)).modPow(i.smallAValue.add(i.UValue.multiply(n)),i.N,function(e,t){e&&o(e,null),o(null,t.mod(i.N))})})},Fc.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},Fc.padHex=function(e){var t=e.toString(16);return t.length%2==1?t="0"+t:-1!=="89ABCDEFabcdef".indexOf(t[0])&&(t="00"+t),t},Vc),jc=((Dc=Bc.prototype).getJwtToken=function(){return this.jwtToken},Dc.getExpiration=function(){return this.payload.exp},Dc.getIssuedAt=function(){return this.payload.iat},Dc.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(Wu.from(e,"base64").toString("utf8"))}catch(e){return{}}},Bc);function Bc(e){this.jwtToken=e||"",this.payload=this.decodePayload()}function Vc(e){this.N=new Ic("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new Ic("2",16),this.k=new Ic(this.hexHash("00"+this.N.toString(16)+"0"+this.g.toString(16)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=Wu.from("Caldera Derived Key","utf8"),this.poolName=e}var qc,zc,Hc,Kc=(Hc=qc=jc,(zc=Gc).prototype=Object.create(Hc.prototype),(zc.prototype.constructor=zc).__proto__=Hc,Gc);function Gc(e){var t=(void 0===e?{}:e).AccessToken;return qc.call(this,t||"")||this}var Wc,$c,Jc,Yc,Zc,Qc,Xc=(Qc=Yc=jc,(Zc=vl).prototype=Object.create(Qc.prototype),(Zc.prototype.constructor=Zc).__proto__=Qc,vl),el=(yl.prototype.getToken=function(){return this.token},yl),tl=((Jc=gl.prototype).getIdToken=function(){return this.idToken},Jc.getRefreshToken=function(){return this.refreshToken},Jc.getAccessToken=function(){return this.accessToken},Jc.getClockDrift=function(){return this.clockDrift},Jc.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},Jc.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},gl),nl=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],rl=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ol=(ml.prototype.getNowString=function(){var e=new Date,t=rl[e.getUTCDay()],n=nl[e.getUTCMonth()],r=e.getUTCDate(),o=e.getUTCHours();o<10&&(o="0"+o);var i=e.getUTCMinutes();i<10&&(i="0"+i);var s=e.getUTCSeconds();return s<10&&(s="0"+s),t+" "+n+" "+r+" "+o+":"+i+":"+s+" UTC "+e.getUTCFullYear()},ml),il=(($c=fl.prototype).getValue=function(){return this.Value},$c.setValue=function(e){return this.Value=e,this},$c.getName=function(){return this.Name},$c.setName=function(e){return this.Name=e,this},$c.toString=function(){return JSON.stringify(this)},$c.toJSON=function(){return{Name:this.Name,Value:this.Value}},fl),sl={},al=(hl.setItem=function(e,t){return sl[e]=t,sl[e]},hl.getItem=function(e){return Object.prototype.hasOwnProperty.call(sl,e)?sl[e]:void 0},hl.removeItem=function(e){return delete sl[e]},hl.clear=function(){return sl={}},hl),ul=(dl.prototype.getStorage=function(){return this.storageWindow},dl),cl="undefined"!=typeof navigator?navigator.userAgent:"nodejs",ll=((Wc=pl.prototype).setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},Wc.getSignInUserSession=function(){return this.signInUserSession},Wc.getUsername=function(){return this.username},Wc.getAuthenticationFlowType=function(){return this.authenticationFlowType},Wc.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},Wc.initiateAuth=function(e,o){var i=this,t=e.getAuthParameters();t.USERNAME=this.username;var n=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),r={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:n};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",r,function(e,t){if(e)return o.onFailure(e);var n=t.ChallengeName,r=t.ChallengeParameters;return"CUSTOM_CHALLENGE"===n?(i.Session=t.Session,o.customChallenge(r)):(i.signInUserSession=i.getCognitoUserSession(t.AuthenticationResult),i.cacheTokens(),o.onSuccess(i.signInUserSession))})},Wc.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},Wc.authenticateUserDefaultAuth=function(r,p){var o,i,d=this,h=new Lc(this.pool.getUserPoolId().split("_")[1]),f=new ol,s={};null!=this.deviceKey&&(s.DEVICE_KEY=this.deviceKey),s.USERNAME=this.username,h.getLargeAValue(function(e,t){e&&p.onFailure(e),s.SRP_A=t.toString(16),"CUSTOM_AUTH"===d.authenticationFlowType&&(s.CHALLENGE_NAME="SRP_A");var l=0!==Object.keys(r.getValidationData()).length?r.getValidationData():r.getClientMetadata(),n={AuthFlow:d.authenticationFlowType,ClientId:d.pool.getClientId(),AuthParameters:s,ClientMetadata:l};d.getUserContextData(d.username)&&(n.UserContextData=d.getUserContextData(d.username)),d.client.request("InitiateAuth",n,function(e,u){if(e)return p.onFailure(e);var c=u.ChallengeParameters;d.username=c.USER_ID_FOR_SRP,o=new Ic(c.SRP_B,16),i=new Ic(c.SALT,16),d.getCachedDeviceKeyAndPassword(),h.getPasswordAuthenticationKey(d.username,r.getPassword(),o,i,function(e,t){e&&p.onFailure(e);var n=f.getNowString(),r=P.lib.WordArray.create(Wu.concat([Wu.from(d.pool.getUserPoolId().split("_")[1],"utf8"),Wu.from(d.username,"utf8"),Wu.from(c.SECRET_BLOCK,"base64"),Wu.from(n,"utf8")])),o=P.lib.WordArray.create(t),i=N.stringify(T(r,o)),s={};s.USERNAME=d.username,s.PASSWORD_CLAIM_SECRET_BLOCK=c.SECRET_BLOCK,s.TIMESTAMP=n,s.PASSWORD_CLAIM_SIGNATURE=i,null!=d.deviceKey&&(s.DEVICE_KEY=d.deviceKey);var a={ChallengeName:"PASSWORD_VERIFIER",ClientId:d.pool.getClientId(),ChallengeResponses:s,Session:u.Session,ClientMetadata:l};d.getUserContextData()&&(a.UserContextData=d.getUserContextData()),function n(r,o){return d.client.request("RespondToAuthChallenge",r,function(e,t){return e&&"ResourceNotFoundException"===e.code&&-1!==e.message.toLowerCase().indexOf("device")?(s.DEVICE_KEY=null,d.deviceKey=null,d.randomPassword=null,d.deviceGroupKey=null,d.clearCachedDeviceKeyAndPassword(),n(r,o)):o(e,t)})}(a,function(e,t){return e?p.onFailure(e):d.authenticateUserInternal(t,h,p)})})})})},Wc.authenticateUserPlainUsernamePassword=function(e,n){var r=this,t={};if(t.USERNAME=this.username,t.PASSWORD=e.getPassword(),t.PASSWORD){var o=new Lc(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(t.DEVICE_KEY=this.deviceKey);var i=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),s={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:i};this.getUserContextData(this.username)&&(s.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",s,function(e,t){return e?n.onFailure(e):r.authenticateUserInternal(t,o,n)})}else n.onFailure(new Error("PASSWORD parameter is required"))},Wc.authenticateUserInternal=function(n,r,o){var i=this,e=n.ChallengeName,t=n.ChallengeParameters;if("SMS_MFA"===e)return this.Session=n.Session,o.mfaRequired(e,t);if("SELECT_MFA_TYPE"===e)return this.Session=n.Session,o.selectMFAType(e,t);if("MFA_SETUP"===e)return this.Session=n.Session,o.mfaSetup(e,t);if("SOFTWARE_TOKEN_MFA"===e)return this.Session=n.Session,o.totpRequired(e,t);if("CUSTOM_CHALLENGE"===e)return this.Session=n.Session,o.customChallenge(t);if("NEW_PASSWORD_REQUIRED"===e){this.Session=n.Session;var s=null,a=null,u=[],c=r.getNewPasswordRequiredChallengeUserAttributePrefix();if(t&&(s=JSON.parse(n.ChallengeParameters.userAttributes),a=JSON.parse(n.ChallengeParameters.requiredAttributes)),a)for(var l=0;l<a.length;l++)u[l]=a[l].substr(c.length);return o.newPasswordRequired(s,u)}if("DEVICE_SRP_AUTH"!==e){this.signInUserSession=this.getCognitoUserSession(n.AuthenticationResult),this.challengeName=e,this.cacheTokens();var p=n.AuthenticationResult.NewDeviceMetadata;if(null==p)return o.onSuccess(this.signInUserSession);r.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){if(e)return o.onFailure(e);var t={Salt:Wu.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:Wu.from(r.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=t.PasswordVerifier,i.deviceGroupKey=p.DeviceGroupKey,i.randomPassword=r.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:p.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:t,DeviceName:cl},function(e,t){return e?o.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?o.onSuccess(i.signInUserSession,t.UserConfirmationNecessary):o.onSuccess(i.signInUserSession))})})}else this.getDeviceResponse(o)},Wc.completeNewPasswordChallenge=function(e,t,n,r){var o=this;if(!e)return n.onFailure(new Error("New password is required."));var i=new Lc(this.pool.getUserPoolId().split("_")[1]),s=i.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};t&&Object.keys(t).forEach(function(e){a[s+e]=t[e]}),a.NEW_PASSWORD=e,a.USERNAME=this.username;var u={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,function(e,t){return e?n.onFailure(e):o.authenticateUserInternal(t,i,n)})},Wc.getDeviceResponse=function(l,r){var p=this,o=new Lc(this.deviceGroupKey),d=new ol,i={};i.USERNAME=this.username,i.DEVICE_KEY=this.deviceKey,o.getLargeAValue(function(e,t){e&&l.onFailure(e),i.SRP_A=t.toString(16);var n={ChallengeName:"DEVICE_SRP_AUTH",ClientId:p.pool.getClientId(),ChallengeResponses:i,ClientMetadata:r};p.getUserContextData()&&(n.UserContextData=p.getUserContextData()),p.client.request("RespondToAuthChallenge",n,function(e,u){if(e)return l.onFailure(e);var c=u.ChallengeParameters,t=new Ic(c.SRP_B,16),n=new Ic(c.SALT,16);o.getPasswordAuthenticationKey(p.deviceKey,p.randomPassword,t,n,function(e,t){if(e)return l.onFailure(e);var n=d.getNowString(),r=P.lib.WordArray.create(Wu.concat([Wu.from(p.deviceGroupKey,"utf8"),Wu.from(p.deviceKey,"utf8"),Wu.from(c.SECRET_BLOCK,"base64"),Wu.from(n,"utf8")])),o=P.lib.WordArray.create(t),i=N.stringify(T(r,o)),s={};s.USERNAME=p.username,s.PASSWORD_CLAIM_SECRET_BLOCK=c.SECRET_BLOCK,s.TIMESTAMP=n,s.PASSWORD_CLAIM_SIGNATURE=i,s.DEVICE_KEY=p.deviceKey;var a={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:p.pool.getClientId(),ChallengeResponses:s,Session:u.Session};p.getUserContextData()&&(a.UserContextData=p.getUserContextData()),p.client.request("RespondToAuthChallenge",a,function(e,t){return e?l.onFailure(e):(p.signInUserSession=p.getCognitoUserSession(t.AuthenticationResult),p.cacheTokens(),l.onSuccess(p.signInUserSession))})})})})},Wc.confirmRegistration=function(e,t,n,r){var o={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:r};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",o,function(e){return e?n(e,null):n(null,"SUCCESS")})},Wc.sendCustomChallengeAnswer=function(e,n,t){var r=this,o={};o.USERNAME=this.username,o.ANSWER=e;var i=new Lc(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey);var s={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:t};this.getUserContextData()&&(s.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",s,function(e,t){return e?n.onFailure(e):r.authenticateUserInternal(t,i,n)})},Wc.sendMFACode=function(e,o,t,n){var i=this,r={};r.USERNAME=this.username,r.SMS_MFA_CODE=e;var s=t||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===s&&(r.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey);var a={ChallengeName:s,ChallengeResponses:r,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",a,function(e,n){if(e)return o.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(i.signInUserSession=i.getCognitoUserSession(n.AuthenticationResult),i.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return o.onSuccess(i.signInUserSession);var r=new Lc(i.pool.getUserPoolId().split("_")[1]);r.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){if(e)return o.onFailure(e);var t={Salt:Wu.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:Wu.from(r.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=t.PasswordVerifier,i.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.randomPassword=r.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:t,DeviceName:cl},function(e,t){return e?o.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?o.onSuccess(i.signInUserSession,t.UserConfirmationNecessary):o.onSuccess(i.signInUserSession))})})}else i.getDeviceResponse(o)})},Wc.changePassword=function(e,t,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},function(e){return e?n(e,null):n(null,"SUCCESS")})},Wc.enableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);var e=[];e.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},Wc.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n(e,null):n(null,"SUCCESS")})},Wc.disableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},Wc.deleteUser=function(t,e){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:e},function(e){return e?t(e,null):(n.clearCachedUser(),t(null,"SUCCESS"))})},Wc.updateAttributes=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},function(e){return e?t(e,null):t(null,"SUCCESS")})},Wc.getUserAttributes=function(s){if(null==this.signInUserSession||!this.signInUserSession.isValid())return s(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){if(e)return s(e,null);for(var n=[],r=0;r<t.UserAttributes.length;r++){var o={Name:t.UserAttributes[r].Name,Value:t.UserAttributes[r].Value},i=new il(o);n.push(i)}return s(null,n)})},Wc.getMFAOptions=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n(e,null):n(null,t.MFAOptions)})},Wc.getUserData=function(r,e){var o=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),r(new Error("User is not authenticated"),null);var t=!!e&&e.bypassCache,n=this.storage.getItem(this.userDataKey);if(!n||t)this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,n){if(e)return r(e,null);o.cacheUserData(n);var t=o.signInUserSession.getRefreshToken();if(!t||!t.getToken())return r(null,n);o.refreshSession(t,function(e,t){return e?r(e,null):r(null,n)})});else try{return r(null,JSON.parse(n))}catch(e){return this.clearCachedUserData(),r(e,null)}},Wc.deleteAttributes=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},Wc.resendConfirmationCode=function(n,e){var t={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e};this.client.request("ResendConfirmationCode",t,function(e,t){return e?n(e,null):n(null,t)})},Wc.getSession=function(e){if(null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var t="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,n=t+".idToken",r=t+".accessToken",o=t+".refreshToken",i=t+".clockDrift";if(this.storage.getItem(n)){var s=new Xc({IdToken:this.storage.getItem(n)}),a=new Kc({AccessToken:this.storage.getItem(r)}),u=new el({RefreshToken:this.storage.getItem(o)}),c=parseInt(this.storage.getItem(i),0)||0,l=new tl({IdToken:s,AccessToken:a,RefreshToken:u,ClockDrift:c});if(l.isValid())return this.signInUserSession=l,e(null,this.signInUserSession);if(!u.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(u,e)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},Wc.refreshSession=function(r,o,e){var i=this,t={};t.REFRESH_TOKEN=r.getToken();var n="CognitoIdentityServiceProvider."+this.pool.getClientId(),s=n+".LastAuthUser";if(this.storage.getItem(s)){this.username=this.storage.getItem(s);var a=n+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(a),t.DEVICE_KEY=this.deviceKey}var u={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:t,ClientMetadata:e};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",u,function(e,t){if(e)return"NotAuthorizedException"===e.code&&i.clearCachedUser(),o(e,null);if(t){var n=t.AuthenticationResult;return Object.prototype.hasOwnProperty.call(n,"RefreshToken")||(n.RefreshToken=r.getToken()),i.signInUserSession=i.getCognitoUserSession(n),i.cacheTokens(),o(null,i.signInUserSession)}})},Wc.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",o=e+"."+this.username+".clockDrift",i=e+".LastAuthUser";this.storage.setItem(t,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(r,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(o,""+this.signInUserSession.getClockDrift()),this.storage.setItem(i,this.username)},Wc.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},Wc.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},Wc.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},Wc.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.setItem(t,this.deviceKey),this.storage.setItem(n,this.randomPassword),this.storage.setItem(r,this.deviceGroupKey)},Wc.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.getItem(t)&&(this.deviceKey=this.storage.getItem(t),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(r))},Wc.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",r=e+".deviceGroupKey";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r)},Wc.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",o=e+".LastAuthUser",i=e+"."+this.username+".clockDrift";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(o),this.storage.removeItem(i)},Wc.getCognitoUserSession=function(e){var t=new Xc(e),n=new Kc(e),r=new el(e);return new tl({IdToken:t,AccessToken:n,RefreshToken:r})},Wc.forgotPassword=function(n,e){var t={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e};this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",t,function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess(t)})},Wc.confirmPassword=function(e,t,n,r){var o={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:r};this.getUserContextData()&&(o.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",o,function(e){return e?n.onFailure(e):n.onSuccess()})},Wc.getAttributeVerificationCode=function(e,n,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess()})},Wc.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")})},Wc.getDevice=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},Wc.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},Wc.forgetDevice=function(t){var n=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:t.onFailure,onSuccess:function(e){return n.deviceKey=null,n.deviceGroupKey=null,n.randomPassword=null,n.clearCachedDeviceKeyAndPassword(),t.onSuccess(e)}})},Wc.setDeviceStatusRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},Wc.setDeviceStatusNotRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},Wc.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("ListDevices",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e,PaginationToken:t},function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},Wc.globalSignOut=function(t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t.onFailure(e):(n.clearCachedUser(),t.onSuccess("SUCCESS"))})},Wc.signOut=function(){this.signInUserSession=null,this.clearCachedUser()},Wc.sendMFASelectionAnswer=function(n,r){var o=this,e={};e.USERNAME=this.username,e.ANSWER=n;var t={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:e,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",t,function(e,t){return e?r.onFailure(e):(o.Session=t.Session,"SMS_MFA"===n?r.mfaRequired(t.challengeName,t.challengeParameters):"SOFTWARE_TOKEN_MFA"===n?r.totpRequired(t.challengeName,t.challengeParameters):void 0)})},Wc.getUserContextData=function(){return this.pool.getUserContextData(this.username)},Wc.associateSoftwareToken=function(n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n.onFailure(e):n.associateSecretCode(t.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(e,t){return e?n.onFailure(e):(r.Session=t.Session,n.associateSecretCode(t.SecretCode))})},Wc.verifySoftwareToken=function(e,t,o){var i=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},function(e,t){return e?o.onFailure(e):o.onSuccess(t)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},function(e,t){if(e)return o.onFailure(e);i.Session=t.Session;var n={};n.USERNAME=i.username;var r={ChallengeName:"MFA_SETUP",ClientId:i.pool.getClientId(),ChallengeResponses:n,Session:i.Session};i.getUserContextData()&&(r.UserContextData=i.getUserContextData()),i.client.request("RespondToAuthChallenge",r,function(e,t){return e?o.onFailure(e):(i.signInUserSession=i.getCognitoUserSession(t.AuthenticationResult),i.cacheTokens(),o.onSuccess(i.signInUserSession))})})},pl);function pl(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new ul).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}function dl(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=al}}function hl(){}function fl(e){var t=void 0===e?{}:e,n=t.Name,r=t.Value;this.Name=n||"",this.Value=r||""}function ml(){}function gl(e){var t=void 0===e?{}:e,n=t.IdToken,r=t.RefreshToken,o=t.AccessToken,i=t.ClockDrift;if(null==o||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=r,this.accessToken=o,this.clockDrift=void 0===i?this.calculateClockDrift():i}function yl(e){var t=(void 0===e?{}:e).RefreshToken;this.token=t||""}function vl(e){var t=(void 0===e?{}:e).IdToken;return Yc.call(this,t||"")||this}function bl(){}bl.prototype.userAgent="aws-amplify/0.1.x js";var wl,_l,Sl=(ql.prototype.request=function(e,t,o){var i,n={headers:{"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":bl.prototype.userAgent},method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)};fetch(this.endpoint,n).then(function(e){return i=e},function(e){if(e instanceof TypeError)throw new Error("Network error");throw e}).then(function(e){return e.json().catch(function(){return{}})}).then(function(e){if(i.ok)return o(null,e);var t=(e.__type||e.code).split("#").pop(),n={code:t,name:t,message:e.message||e.Message||null};return o(n)}).catch(function(e){if(!(i&&i.headers&&i.headers.get("x-amzn-errortype"))){if(e instanceof Error&&"Network error"===e.message){var t={code:"NetworkError",name:e.name,message:e.message};return o(t)}return o(e)}try{var n=i.headers.get("x-amzn-errortype").split(":")[0],r={code:n,name:n,statusCode:i.status,message:i.status?i.status.toString():null};return o(r)}catch(t){return o(e)}})},ql),Cl=((_l=Vl.prototype).getUserPoolId=function(){return this.userPoolId},_l.getClientId=function(){return this.clientId},_l.signUp=function(o,e,t,n,i,r){var s=this,a={ClientId:this.clientId,Username:o,Password:e,UserAttributes:t,ValidationData:n,ClientMetadata:r};this.getUserContextData(o)&&(a.UserContextData=this.getUserContextData(o)),this.client.request("SignUp",a,function(e,t){if(e)return i(e,null);var n={Username:o,Pool:s,Storage:s.storage},r={user:new ll(n),userConfirmed:t.UserConfirmed,userSub:t.UserSub,codeDeliveryDetails:t.CodeDeliveryDetails};return i(null,r)})},_l.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",t=this.storage.getItem(e);if(t){var n={Username:t,Pool:this,Storage:this.storage};return new ll(n)}return null},_l.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var n=t.getData(e,this.userPoolId,this.clientId);if(n)return{EncodedData:n}}return{}}},Vl),El=((wl=Bl.prototype).setItem=function(e,t){return U.set(e,t,{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure}),U.get(e)},wl.getItem=function(e){return U.get(e)},wl.removeItem=function(e){return U.remove(e,{path:this.path,domain:this.domain,secure:this.secure})},wl.clear=function(){var e,t=U.get();for(e=0;e<t.length;++e)U.remove(t[e]);return{}},Bl),Il=2147483647,Al=36,Pl=1,kl=26,Ol=38,Tl=700,xl=72,Nl=128,Ul="-",Ml=/[^\x20-\x7E]/,Rl=/[\x2E\u3002\uFF0E\uFF61]/g,Dl={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Fl=Al-Pl,Ll=Math.floor,jl=String.fromCharCode;function Bl(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0}function Vl(e){var t=e||{},n=t.UserPoolId,r=t.ClientId,o=t.endpoint,i=t.AdvancedSecurityDataCollectionFlag;if(!n||!r)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(n))throw new Error("Invalid UserPoolId format.");var s=n.split("_")[0];this.userPoolId=n,this.clientId=r,this.client=new Sl(s,o),this.advancedSecurityDataCollectionFlag=!1!==i,this.storage=e.Storage||(new ul).getStorage()}function ql(e,t){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/"}function zl(e){throw new RangeError(Dl[e])}function Hl(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function Kl(e,t,n){var r=0;for(e=n?Ll(e/Tl):e>>1,e+=Ll(e/t);Fl*kl>>1<e;r+=Al)e=Ll(e/Fl);return Ll(r+(Fl+1)*e/(e+Ol))}function Gl(e){return null===e}function Wl(e){return"string"==typeof e}function $l(e){return void 0===e}function Jl(e){return"object"==typeof e&&null!==e}var Yl=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function Zl(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function Ql(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var Xl=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t};function ep(e,t,n,r){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var i=/\+/g;e=e.split(t);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var a=e.length;0<s&&s<a&&(a=s);for(var u=0;u<a;++u){var c,l,p,d,h=e[u].replace(i,"%20"),f=h.indexOf(n);l=0<=f?(c=h.substr(0,f),h.substr(f+1)):(c=h,""),p=decodeURIComponent(c),d=decodeURIComponent(l),Object.prototype.hasOwnProperty.call(o,p)?Yl(o[p])?o[p].push(d):o[p]=[o[p],d]:o[p]=d}return o}function tp(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var np=/^([a-z0-9.+-]+:)/i,rp=/:[0-9]*$/,op=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,ip=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),sp=["'"].concat(ip),ap=["%","/","?",";","#"].concat(sp),up=["/","?","#"],cp=/^[+a-z0-9A-Z_-]{0,63}$/,lp=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,pp={javascript:!0,"javascript:":!0},dp={javascript:!0,"javascript:":!0},hp={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function fp(e,t,n){if(e&&Jl(e)&&e instanceof tp)return e;var r=new tp;return r.parse(e,t,n),r}function mp(e,t,n,r){if(!Wl(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),i=-1!==o&&o<t.indexOf("#")?"?":"#",s=t.split(i);s[0]=s[0].replace(/\\/g,"/");var a=t=s.join(i);if(a=a.trim(),!r&&1===t.split("#").length){var u=op.exec(a);if(u)return e.path=a,e.href=a,e.pathname=u[1],u[2]?(e.search=u[2],e.query=n?ep(e.search.substr(1)):e.search.substr(1)):n&&(e.search="",e.query={}),e}var c,l,p,d,h,f,m,g,y=np.exec(a);if(y){var v=(y=y[0]).toLowerCase();e.protocol=v,a=a.substr(y.length)}if(r||y||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var b="//"===a.substr(0,2);!b||y&&dp[y]||(a=a.substr(2),e.slashes=!0)}if(!dp[y]&&(b||y&&!hp[y])){var w,_,S=-1;for(c=0;c<up.length;c++)-1!==(l=a.indexOf(up[c]))&&(-1===S||l<S)&&(S=l);for(-1!==(_=-1===S?a.lastIndexOf("@"):a.lastIndexOf("@",S))&&(w=a.slice(0,_),a=a.slice(_+1),e.auth=decodeURIComponent(w)),S=-1,c=0;c<ap.length;c++)-1!==(l=a.indexOf(ap[c]))&&(-1===S||l<S)&&(S=l);-1===S&&(S=a.length),e.host=a.slice(0,S),a=a.slice(S),yp(e),e.hostname=e.hostname||"";var C="["===e.hostname[0]&&"]"===e.hostname[e.hostname.length-1];if(!C){var E=e.hostname.split(/\./);for(c=0,p=E.length;c<p;c++){var I=E[c];if(I&&!I.match(cp)){for(var A="",P=0,k=I.length;P<k;P++)127<I.charCodeAt(P)?A+="x":A+=I[P];if(!A.match(cp)){var O=E.slice(0,c),T=E.slice(c+1),x=I.match(lp);x&&(O.push(x[1]),T.unshift(x[2])),T.length&&(a="/"+T.join(".")+a),e.hostname=O.join(".");break}}}}255<e.hostname.length?e.hostname="":e.hostname=e.hostname.toLowerCase(),C||(e.hostname=(h=e.hostname,f=function(e){return Ml.test(e)?"xn--"+function(e){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m,g=[];for(d=(e=function(e){for(var t,n,r=[],o=0,i=e.length;o<i;)55296<=(t=e.charCodeAt(o++))&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}(e)).length,t=Nl,i=xl,s=n=0;s<d;++s)(p=e[s])<128&&g.push(jl(p));for(r=o=g.length,o&&g.push(Ul);r<d;){for(a=Il,s=0;s<d;++s)t<=(p=e[s])&&p<a&&(a=p);for(a-t>Ll((Il-n)/(h=r+1))&&zl("overflow"),n+=(a-t)*h,t=a,s=0;s<d;++s)if((p=e[s])<t&&++n>Il&&zl("overflow"),p==t){for(u=n,c=Al;!(u<(l=c<=i?Pl:i+kl<=c?kl:c-i));c+=Al)m=u-l,f=Al-l,g.push(jl(Hl(l+m%f,0))),u=Ll(m/f);g.push(jl(Hl(u,0))),i=Kl(n,h,r==o),n=0,++r}++n,++t}return g.join("")}(e):e},m=h.split("@"),g="",1<m.length&&(g=m[0]+"@",h=m[1]),g+function(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}((h=h.replace(Rl,".")).split("."),f).join("."))),d=e.port?":"+e.port:"";var N=e.hostname||"";e.host=N+d,e.href+=e.host,C&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!pp[v])for(c=0,p=sp.length;c<p;c++){var U=sp[c];if(-1!==a.indexOf(U)){var M=encodeURIComponent(U);M===U&&(M=escape(U)),a=a.split(U).join(M)}}var R=a.indexOf("#");-1!==R&&(e.hash=a.substr(R),a=a.slice(0,R));var D=a.indexOf("?");if(-1!==D?(e.search=a.substr(D),e.query=a.substr(D+1),n&&(e.query=ep(e.query)),a=a.slice(0,D)):n&&(e.search="",e.query={}),a&&(e.pathname=a),hp[v]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){d=e.pathname||"";var F=e.search||"";e.path=d+F}return e.href=gp(e),e}function gp(e){var t=e.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var n,r,o,i=e.protocol||"",s=e.pathname||"",a=e.hash||"",u=!1,c="";e.host?u=t+e.host:e.hostname&&(u=t+(-1===e.hostname.indexOf(":")?e.hostname:"["+this.hostname+"]"),e.port&&(u+=":"+e.port)),e.query&&Jl(e.query)&&Object.keys(e.query).length&&(n=e.query,r=r||"&",o=o||"=",null===n&&(n=void 0),c="object"==typeof n?Ql(Xl(n),function(e){var t=encodeURIComponent(Zl(e))+o;return Yl(n[e])?Ql(n[e],function(e){return t+encodeURIComponent(Zl(e))}).join(r):t+encodeURIComponent(Zl(n[e]))}).join(r):"");var l=e.search||c&&"?"+c||"";return i&&":"!==i.substr(-1)&&(i+=":"),e.slashes||(!i||hp[i])&&!1!==u?(u="//"+(u||""),s&&"/"!==s.charAt(0)&&(s="/"+s)):u=u||"",a&&"#"!==a.charAt(0)&&(a="#"+a),l&&"?"!==l.charAt(0)&&(l="?"+l),i+u+(s=s.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(l=l.replace("#","%23"))+a}function yp(e){var t=e.host,n=rp.exec(t);n&&(":"!==(n=n[0])&&(e.port=n.substr(1)),t=t.substr(0,t.length-n.length)),t&&(e.hostname=t)}function vp(e){var t=window.open(e,"_self");return t?Promise.resolve(t):Promise.reject()}function bp(e,t,n){x.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",Ep)}tp.prototype.parse=function(e,t,n){return mp(this,e,t,n)},tp.prototype.format=function(){return gp(this)},tp.prototype.resolve=function(e){return this.resolveObject(fp(e,!1,!0)).format()},tp.prototype.resolveObject=function(e){if(Wl(e)){var t=new tp;t.parse(e,!1,!0),e=t}for(var n,r=new tp,o=Object.keys(this),i=0;i<o.length;i++){var s=o[i];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),u=0;u<a.length;u++){var c=a[u];"protocol"!==c&&(r[c]=e[c])}return hp[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!hp[e.protocol]){for(var l=Object.keys(e),p=0;p<l.length;p++){var d=l[p];r[d]=e[d]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||dp[e.protocol])r.pathname=e.pathname;else{for(n=(e.pathname||"").split("/");n.length&&!(e.host=n.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==n[0]&&n.unshift(""),n.length<2&&n.unshift(""),r.pathname=n.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var h=r.pathname||"",f=r.search||"";r.path=h+f}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var m,g=r.pathname&&"/"===r.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),v=y||g||r.host&&e.pathname,b=v,w=r.pathname&&r.pathname.split("/")||[],_=r.protocol&&!hp[r.protocol];if(n=e.pathname&&e.pathname.split("/")||[],_&&(r.hostname="",r.port=null,r.host&&(""===w[0]?w[0]=r.host:w.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===n[0]?n[0]=e.host:n.unshift(e.host)),e.host=null),v=v&&(""===n[0]||""===w[0])),y)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,w=n;else if(n.length)(w=w||[]).pop(),w=w.concat(n),r.search=e.search,r.query=e.query;else if(null!=e.search)return _&&(r.hostname=r.host=w.shift(),(m=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=m.shift(),r.host=r.hostname=m.shift())),r.search=e.search,r.query=e.query,Gl(r.pathname)&&Gl(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=w.slice(-1)[0],C=(r.host||e.host||1<w.length)&&("."===S||".."===S)||""===S,E=0,I=w.length;0<=I;I--)"."===(S=w[I])?w.splice(I,1):".."===S?(w.splice(I,1),E++):E&&(w.splice(I,1),E--);if(!v&&!b)for(;E--;)w.unshift("..");!v||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),C&&"/"!==w.join("/").substr(-1)&&w.push("");var A=""===w[0]||w[0]&&"/"===w[0].charAt(0);return _&&(r.hostname=r.host=!A&&w.length?w.shift():"",(m=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=m.shift(),r.host=r.hostname=m.shift())),(v=v||r.host&&w.length)&&!A&&w.unshift(""),w.length?r.pathname=w.join("/"):(r.pathname=null,r.path=null),Gl(r.pathname)&&Gl(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},tp.prototype.parseHost=function(){return yp(this)};function wp(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function _p(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Sp(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var Cp=function(){return(Cp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ep="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Ip=new x.ConsoleLogger("OAuth"),Ap=(Pp.prototype.oauthSignIn=function(e,t,n,r,o,i){void 0===e&&(e="code"),void 0===o&&(o=mu.Cognito);var s,a=this._generateState(32),u=i?a+"-"+i:a;s=encodeURIComponent(u),window.sessionStorage.setItem("oauth_state",s);var c=this._generateRandom(128);window.sessionStorage.setItem("ouath_pkce_key",c);var l=this._generateChallenge(c),p="https://"+t+"/oauth2/authorize?"+Object.entries(Cp(Cp({redirect_uri:n,response_type:e,client_id:r,identity_provider:o,scopes:this._scopes,state:u},"code"===e?{code_challenge:l}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map(function(e){var t=Sp(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)}).join("&");Ip.debug("Redirecting to "+p),this._urlOpener(p,n)},Pp.prototype._handleCodeFlow=function(f){return wp(this,void 0,void 0,function(){var n,r,o,i,s,a,u,c,l,p,d,h;return _p(this,function(e){switch(e.label){case 0:return(n=(fp(f).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n,r=Sp(t,2),o=r[0],i=r[1];return Cp(Cp({},e),((n={})[o]=i,n))},{code:void 0}).code)?(bp("codeFlow",{},"Retrieving tokens from "+(r="https://"+this._config.domain+"/oauth2/token")),o=Ou(this._config)?this._cognitoClientId:this._config.clientID,i=Ou(this._config)?this._config.redirectSignIn:this._config.redirectUri,t=window.sessionStorage.getItem("ouath_pkce_key"),window.sessionStorage.removeItem("ouath_pkce_key"),a=Cp({grant_type:"authorization_code",code:n,client_id:o,redirect_uri:i},(s=t)?{code_verifier:s}:{}),Ip.debug("Calling token endpoint: "+r+" with",a),u=Object.entries(a).map(function(e){var t=Sp(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)}).join("&"),[4,fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})]):[2];case 1:return[4,e.sent().json()];case 2:if(c=e.sent(),l=c.access_token,p=c.refresh_token,d=c.id_token,h=c.error)throw new Error(h);return[2,{accessToken:l,refreshToken:p,idToken:d}]}var t})})},Pp.prototype._handleImplicitFlow=function(o){return wp(this,void 0,void 0,function(){var t,n,r;return _p(this,function(e){return t=fp(o).hash.substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n,r=Sp(t,2),o=r[0],i=r[1];return Cp(Cp({},e),((n={})[o]=i,n))},{id_token:void 0,access_token:void 0}),n=t.id_token,r=t.access_token,bp("implicitFlow",{},"Got tokens from "+o),Ip.debug("Retrieving implicit tokens from "+o+" with"),[2,{accessToken:r,idToken:n,refreshToken:null}]})})},Pp.prototype.handleAuthResponse=function(u){return wp(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return _p(this,function(e){switch(e.label){case 0:if(e.trys.push([0,5,,6]),t=u?Cp(Cp({},(fp(u).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=Sp(t,2),r=n[0],o=n[1];return e[r]=o,e},{})),(fp(u).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=Sp(t,2),r=n[0],o=n[1];return e[r]=o,e},{})):{},n=t.error,r=t.error_description,n)throw new Error(r);return o=this._validateState(t),Ip.debug("Starting "+this._config.responseType+" flow with "+u),"code"!==this._config.responseType?[3,2]:(i=[{}],[4,this._handleCodeFlow(u)]);case 1:return[2,Cp.apply(void 0,[Cp.apply(void 0,i.concat([e.sent()])),{state:o}])];case 2:return s=[{}],[4,this._handleImplicitFlow(u)];case 3:return[2,Cp.apply(void 0,[Cp.apply(void 0,s.concat([e.sent()])),{state:o}])];case 4:return[3,6];case 5:throw a=e.sent(),Ip.error("Error handling auth response.",a),a;case 6:return[2]}})})},Pp.prototype._validateState=function(e){if(e){var t,n=(t=window.sessionStorage.getItem("oauth_state"),window.sessionStorage.removeItem("oauth_state"),t),r=e.state;if(n&&n!==r)throw new Error("Invalid state in OAuth flow");return r}},Pp.prototype.signOut=function(){return wp(this,void 0,void 0,function(){var t,n,r;return _p(this,function(e){return t="https://"+this._config.domain+"/logout?",n=Ou(this._config)?this._cognitoClientId:this._config.oauth.clientID,r=Ou(this._config)?this._config.redirectSignOut:this._config.returnTo,bp("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+(t+=Object.entries({client_id:n,logout_uri:encodeURIComponent(r)}).map(function(e){var t=Sp(e,2);return t[0]+"="+t[1]}).join("&"))),Ip.debug("Signing out from "+t),[2,this._urlOpener(t)]})})},Pp.prototype._generateState=function(e){for(var t="",n=e,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";0<n;--n)t+=r[Math.round(Math.random()*(r.length-1))];return t},Pp.prototype._generateChallenge=function(e){return this._base64URL(O(e))},Pp.prototype._base64URL=function(e){return e.toString(N).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},Pp.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(t)},Pp.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e.byteLength;r+=1){var o=e[r]%t.length;n.push(t[o])}return n.join("")},Pp);function Pp(e){var t=e.config,n=e.cognitoClientId,r=e.scopes,o=void 0===r?[]:r;this._urlOpener=t.urlOpener||vp,this._config=t,this._cognitoClientId=n,this._scopes=o}var kp,Op,Tp=(kp=function(e,t){return(kp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}kp(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),xp=new x.ConsoleLogger("AuthError"),Np="Authentication Error",Up=(Tp(Mp,Op=Error),Mp);function Mp(e){var t=this,n=Hp[e],r=n.message,o=n.log;return(t=Op.call(this,r)||this).constructor=Mp,Object.setPrototypeOf(t,Mp.prototype),t.name="AuthError",t.log=o||r,xp.error(t.log),t}var Rp,Dp=(Tp(Fp,Rp=Up),Fp);function Fp(e){var t=Rp.call(this,e)||this;return t.constructor=Fp,Object.setPrototypeOf(t,Fp.prototype),t.name="NoUserPoolError",t}function Lp(e,t,n){x.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",Wp)}function jp(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Bp(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Vp(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var qp,zp,Hp={noConfig:{message:Np,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of aws-amplify or amplify packages in your node_modules.\n                Try deleting your node_modules folder and reinstalling the dependencies with `yarn install`\n        "},missingAuthConfig:{message:Np,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties. \n            Did you run `amplify push` after adding auth via `amplify add auth`?\n            See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n        "},emptyUsername:{message:"Username cannot be empty"},invalidUsername:{message:"The username should either be a string or one of the sign in types"},emptyPassword:{message:"Password cannot be empty"},emptyCode:{message:"Confirmation code cannot be empty"},signUpError:{message:"Error creating account",log:"The first parameter should either be non-null string or object"},noMFA:{message:"No valid MFA method provided"},invalidMFA:{message:"Invalid MFA type"},emptyChallengeResponse:{message:"Challenge response cannot be empty"},noUserSession:{message:"Failed to get the session because the user is empty"},default:{message:Np}},Kp=new x.ConsoleLogger("AuthClass"),Gp="aws.cognito.signin.user.admin",Wp="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default";function $p(e){var t=this;this.userPool=null,this.user=null,this.configure(e),this.currentUserCredentials=this.currentUserCredentials.bind(this),x.Hub.listen("auth",function(e){switch(e.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}}),x.Amplify.register(this)}(zp=qp=qp||{}).Cognito="COGNITO",zp.Google="Google",zp.Facebook="Facebook",zp.Amazon="LoginWithAmazon";var Jp,Yp=($p.prototype.getModuleName=function(){return"Auth"},$p.prototype.configure=function(e){var n=this;if(!e)return this._config||{};Kp.debug("configure Auth");var t=Object.assign({},this._config,x.Parser.parseMobilehubConfig(e).Auth,e);this._config=t;var r=this._config,o=r.userPoolId,i=r.userPoolWebClientId,s=r.cookieStorage,a=r.oauth,u=r.region,c=r.identityPoolId,l=r.mandatorySignIn,p=r.refreshHandlers,d=r.identityPoolRegion,h=r.clientMetadata;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw Kp.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=s?new El(s):(new x.StorageHelper).getStorage();if(this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),o){var f={UserPoolId:o,ClientId:i};f.Storage=this._storage,this.userPool=new Cl(f)}x.Credentials.configure({mandatorySignIn:l,region:d||u,userPoolId:o,identityPoolId:c,refreshHandlers:p,storage:this._storage});var m=a?Ou(this._config.oauth)?a:a.awsCognito:void 0;if(m){var g=Object.assign({cognitoClientId:i,UserPoolId:o,domain:m.domain,scopes:m.scope,redirectSignIn:m.redirectSignIn,redirectSignOut:m.redirectSignOut,responseType:m.responseType,Storage:this._storage,urlOpener:m.urlOpener,clientMetadata:h},m.options);this._oAuthHandler=new Ap({scopes:g.scopes,config:g,cognitoClientId:g.cognitoClientId});var y={};!function(){if(x.JS.browserOrNode().isBrowser&&window.location)e={url:window.location.href},t=e.url,y[t]||(y[t]=!0,n._handleAuthResponse(t));else if(!x.JS.browserOrNode().isNode)throw new Error("Not supported");var e,t}()}return Lp("configured",null,"The Auth category has been configured successfully"),this._config},$p.prototype.signUp=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this.userPool)return this.rejectNoUserPool();var o,i=null,s=null,a=[],u=null;if(e&&"string"==typeof e){i=e,s=n?n[0]:null;var c=n?n[1]:null,l=n?n[2]:null;c&&a.push({Name:"email",Value:c}),l&&a.push({Name:"phone_number",Value:l})}else{if(!e||"object"!=typeof e)return this.rejectAuthError(yu.SignUpError);i=e.username,s=e.password,e&&e.clientMetadata?o=e.clientMetadata:this._config.clientMetadata&&(o=this._config.clientMetadata);var p=e.attributes;p&&Object.keys(p).map(function(e){var t={Name:e,Value:p[e]};a.push(t)}),u=e.validationData||null}return i?s?(Kp.debug("signUp attrs:",a),Kp.debug("signUp validation data:",u),new Promise(function(n,r){t.userPool.signUp(i,s,a,u,function(e,t){e?(Lp("signUp_failure",e,i+" failed to signup"),r(e)):(Lp("signUp",t,i+" has signed up successfully"),n(t))},o)})):this.rejectAuthError(yu.EmptyPassword):this.rejectAuthError(yu.EmptyUsername)},$p.prototype.confirmSignUp=function(e,t,n){if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(yu.EmptyUsername);if(!t)return this.rejectAuthError(yu.EmptyCode);var o,i=this.createCognitoUser(e),s=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?o=n.clientMetadata:this._config.clientMetadata&&(o=this._config.clientMetadata),new Promise(function(n,r){i.confirmRegistration(t,s,function(e,t){e?r(e):n(t)},o)})},$p.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(yu.EmptyUsername);var o=this.createCognitoUser(e);return new Promise(function(n,r){o.resendConfirmationCode(function(e,t){e?r(e):n(t)},t)})},$p.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var r=null,o=null,i={};if("string"==typeof e)r=e,o=t;else{if(!e.username)return this.rejectAuthError(yu.InvalidUsername);void 0!==t&&Kp.warn("The password should be defined under the first parameter object!"),r=e.username,o=e.password,i=e.validationData}if(!r)return this.rejectAuthError(yu.EmptyUsername);var s=new xu({Username:r,Password:o,ValidationData:i,ClientMetadata:n});return o?this.signInWithPassword(s):this.signInWithoutPassword(s)},$p.prototype.authCallbacks=function(s,a,u){var e=this,c=this;return{onSuccess:function(i){return jp(e,void 0,void 0,function(){var t,n,r,o;return Bp(this,function(e){switch(e.label){case 0:Kp.debug(i),delete s.challengeName,delete s.challengeParam,e.label=1;case 1:return e.trys.push([1,4,5,9]),[4,x.Credentials.clear()];case 2:return e.sent(),[4,x.Credentials.set(i,"session")];case 3:return t=e.sent(),Kp.debug("succeed to get cognito credentials",t),[3,9];case 4:return n=e.sent(),Kp.debug("cannot get cognito credentials",n),[3,9];case 5:return e.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return r=e.sent(),Lp("signIn",c.user=r,"A user "+s.getUsername()+" has been signed in"),a(r),[3,8];case 7:return o=e.sent(),Kp.error("Failed to get the signed in user",o),u(o),[3,8];case 8:return[7];case 9:return[2]}})})},onFailure:function(e){Kp.debug("signIn failure",e),Lp("signIn_failure",e,s.getUsername()+" failed to signin"),u(e)},customChallenge:function(e){Kp.debug("signIn custom challenge answer required"),s.challengeName="CUSTOM_CHALLENGE",s.challengeParam=e,a(s)},mfaRequired:function(e,t){Kp.debug("signIn MFA required"),s.challengeName=e,s.challengeParam=t,a(s)},mfaSetup:function(e,t){Kp.debug("signIn mfa setup",e),s.challengeName=e,s.challengeParam=t,a(s)},newPasswordRequired:function(e,t){Kp.debug("signIn new password"),s.challengeName="NEW_PASSWORD_REQUIRED",s.challengeParam={userAttributes:e,requiredAttributes:t},a(s)},totpRequired:function(e,t){Kp.debug("signIn totpRequired"),s.challengeName=e,s.challengeParam=t,a(s)},selectMFAType:function(e,t){Kp.debug("signIn selectMFAType",e),s.challengeName=e,s.challengeParam=t,a(s)}}},$p.prototype.signInWithPassword=function(n){var r=this,o=this.createCognitoUser(n.getUsername());return new Promise(function(e,t){o.authenticateUser(n,r.authCallbacks(o,e,t))})},$p.prototype.signInWithoutPassword=function(n){var r=this,o=this.createCognitoUser(n.getUsername());return o.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise(function(e,t){o.initiateAuth(n,r.authCallbacks(o,e,t))})},$p.prototype.getMFAOptions=function(e){return new Promise(function(n,r){e.getMFAOptions(function(e,t){if(e)return Kp.debug("get MFA Options failed",e),void r(e);Kp.debug("get MFA options success",t),n(t)})})},$p.prototype.getPreferredMFA=function(t,n){var i=this;return new Promise(function(r,o){var e=!!n&&n.bypassCache;t.getUserData(function(e,t){if(e)return Kp.debug("getting preferred mfa failed",e),void o(e);var n=i._getMfaTypeFromUserData(t);return n?void r(n):void o("invalid MFA Type")},{bypassCache:e})})},$p.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;if(n)t=n;else{var r=e.UserMFASettingList;r?0===r.length?t="NOMFA":Kp.debug("invalid case for getPreferredMFA",e):t=e.MFAOptions?"SMS_MFA":"NOMFA"}return t},$p.prototype._getUserData=function(e,t){return new Promise(function(n,r){e.getUserData(function(e,t){return e?(Kp.debug("getting user data failed",e),void r(e)):void n(t)},t)})},$p.prototype.setPreferredMFA=function(s,a){return jp(this,void 0,void 0,function(){var t,n,i,r,o;return Bp(this,function(e){switch(e.label){case 0:return[4,this._getUserData(s,{bypassCache:!0})];case 1:switch(t=e.sent(),i=n=null,a){case"TOTP":return[3,2];case"SMS":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return i={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return n={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return r=t.UserMFASettingList,[4,this._getMfaTypeFromUserData(t)];case 5:if("NOMFA"===(o=e.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===o)n={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==o)return[2,this.rejectAuthError(yu.InvalidMFA)];i={PreferredMfa:!1,Enabled:!1}}return r&&0!==r.length&&r.forEach(function(e){"SMS_MFA"===e?n={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(i={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return Kp.debug("no validmfa method provided"),[2,this.rejectAuthError(yu.NoMFA)];case 7:return[2,new Promise(function(r,o){s.setUserMfaPreference(n,i,function(e,n){if(e)return Kp.debug("Set user mfa preference error",e),o(e);Kp.debug("Set user mfa success",n),Kp.debug("Caching the latest user data into local"),s.getUserData(function(e,t){return e?(Kp.debug("getting user data failed",e),o(e)):r(n)},{bypassCache:!0})})})]}})})},$p.prototype.disableSMS=function(e){return new Promise(function(n,r){e.disableMFA(function(e,t){if(e)return Kp.debug("disable mfa failed",e),void r(e);Kp.debug("disable mfa succeed",t),n(t)})})},$p.prototype.enableSMS=function(e){return new Promise(function(n,r){e.enableMFA(function(e,t){if(e)return Kp.debug("enable mfa failed",e),void r(e);Kp.debug("enable mfa succeed",t),n(t)})})},$p.prototype.setupTOTP=function(e){return new Promise(function(t,n){e.associateSoftwareToken({onFailure:function(e){Kp.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){Kp.debug("associateSoftwareToken sucess",e),t(e)}})})},$p.prototype.verifyTotpToken=function(e,r){return Kp.debug("verfication totp token",e,r),new Promise(function(t,n){e.verifySoftwareToken(r,"My TOTP device",{onFailure:function(e){Kp.debug("verifyTotpToken failed",e),n(e)},onSuccess:function(e){Kp.debug("verifyTotpToken success",e),t(e)}})})},$p.prototype.confirmSignIn=function(i,e,n,r){var s=this;if(void 0===r&&(r=this._config.clientMetadata),!e)return this.rejectAuthError(yu.EmptyCode);var a=this;return new Promise(function(o,t){i.sendMFACode(e,{onSuccess:function(r){return jp(s,void 0,void 0,function(){var t,n;return Bp(this,function(e){switch(e.label){case 0:Kp.debug(r),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,x.Credentials.clear()];case 2:return e.sent(),[4,x.Credentials.set(r,"session")];case 3:return t=e.sent(),Kp.debug("succeed to get cognito credentials",t),[3,6];case 4:return n=e.sent(),Kp.debug("cannot get cognito credentials",n),[3,6];case 5:return Lp("signIn",a.user=i,i+" has signed in"),o(i),[7];case 6:return[2]}})})},onFailure:function(e){Kp.debug("confirm signIn failure",e),t(e)}},n,r)})},$p.prototype.completeNewPassword=function(i,e,n,r){var s=this;if(void 0===r&&(r=this._config.clientMetadata),!e)return this.rejectAuthError(yu.EmptyPassword);var a=this;return new Promise(function(o,t){i.completeNewPasswordChallenge(e,n,{onSuccess:function(r){return jp(s,void 0,void 0,function(){var t,n;return Bp(this,function(e){switch(e.label){case 0:Kp.debug(r),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,x.Credentials.clear()];case 2:return e.sent(),[4,x.Credentials.set(r,"session")];case 3:return t=e.sent(),Kp.debug("succeed to get cognito credentials",t),[3,6];case 4:return n=e.sent(),Kp.debug("cannot get cognito credentials",n),[3,6];case 5:return Lp("signIn",a.user=i,i+" has signed in"),o(i),[7];case 6:return[2]}})})},onFailure:function(e){Kp.debug("completeNewPassword failure",e),Lp("completeNewPassword_failure",e,s.user+" failed to complete the new password flow"),t(e)},mfaRequired:function(e,t){Kp.debug("signIn MFA required"),i.challengeName=e,i.challengeParam=t,o(i)},mfaSetup:function(e,t){Kp.debug("signIn mfa setup",e),i.challengeName=e,i.challengeParam=t,o(i)}},r)})},$p.prototype.sendCustomChallengeAnswer=function(n,r,o){var i=this;return void 0===o&&(o=this._config.clientMetadata),this.userPool?r?new Promise(function(e,t){n.sendCustomChallengeAnswer(r,i.authCallbacks(n,e,t),o)}):this.rejectAuthError(yu.EmptyChallengeResponse):this.rejectNoUserPool()},$p.prototype.updateUserAttributes=function(i,s,a){void 0===a&&(a=this._config.clientMetadata);var u=[],e=this;return new Promise(function(r,o){e.userSession(i).then(function(e){for(var t in s)if("sub"!==t&&t.indexOf("_verified")<0){var n={Name:t,Value:s[t]};u.push(n)}i.updateAttributes(u,function(e,t){return e?o(e):r(t)},a)})})},$p.prototype.userAttributes=function(t){var e=this;return new Promise(function(n,r){e.userSession(t).then(function(e){t.getUserAttributes(function(e,t){e?r(e):n(t)})})})},$p.prototype.verifiedContact=function(e){var o=this;return this.userAttributes(e).then(function(e){var t=o.attributesToObject(e),n={},r={};return t.email&&(t.email_verified?r.email=t.email:n.email=t.email),t.phone_number&&(t.phone_number_verified?r.phone_number=t.phone_number:n.phone_number=t.phone_number),{verified:r,unverified:n}})},$p.prototype.currentUserPoolUser=function(o){var e=this;if(!this.userPool)return this.rejectNoUserPool();var p=this;return new Promise(function(c,l){e._storageSync.then(function(){var u=p.userPool.getCurrentUser();if(!u)return Kp.debug("Failed to get user from user pool"),void l("No current user");u.getSession(function(e,t){if(e)return Kp.debug("Failed to get the user session",e),void l(e);var n=!!o&&o.bypassCache,r=t.getAccessToken().decodePayload().scope;if(!(void 0===r?"":r).split(" ").includes(Gp))return Kp.debug("Unable to get the user data because the "+Gp+" is not in the scopes of the access token"),c(u);u.getUserData(function(e,t){if(e)return Kp.debug("getting user data failed",e),void("User is disabled."===e.message||"User does not exist."===e.message||"Access Token has been revoked"===e.message?l(e):c(u));for(var n=t.PreferredMfaSetting||"NOMFA",r=[],o=0;o<t.UserAttributes.length;o++){var i={Name:t.UserAttributes[o].Name,Value:t.UserAttributes[o].Value},s=new il(i);r.push(s)}var a=p.attributesToObject(r);return Object.assign(u,{attributes:a,preferredMFA:n}),c(u)},{bypassCache:n})})}).catch(function(e){return Kp.debug("Failed to sync cache info into memory",e),l(e)})})},$p.prototype.currentAuthenticatedUser=function(i){return jp(this,void 0,void 0,function(){var t,n,r,o;return Bp(this,function(e){switch(e.label){case 0:Kp.debug("getting current authenticated user"),t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw n=e.sent(),Kp.debug("Failed to sync cache info into memory",n),n;case 4:try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user}catch(e){Kp.debug("cannot load federated user from auth storage")}return t?(this.user=t,Kp.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:Kp.debug("get current authenticated userpool user"),r=null,e.label=6;case 6:return e.trys.push([6,8,,9]),[4,this.currentUserPoolUser(i)];case 7:return r=e.sent(),[3,9];case 8:throw"No userPool"===(o=e.sent())&&Kp.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),Kp.debug("The user is not authenticated by the error",o),"not authenticated";case 9:return this.user=r,[2,this.user]}})})},$p.prototype.currentSession=function(){var r=this;return Kp.debug("Getting current session"),this.userPool?new Promise(function(t,n){r.currentUserPoolUser().then(function(e){r.userSession(e).then(function(e){t(e)}).catch(function(e){Kp.debug("Failed to get the current session",e),n(e)})}).catch(function(e){Kp.debug("Failed to get the current user",e),n(e)})}):Promise.reject()},$p.prototype.userSession=function(o){return o?new Promise(function(n,r){Kp.debug("Getting the session from this user:",o),o.getSession(function(e,t){return e?(Kp.debug("Failed to get the session from user",o),void r(e)):(Kp.debug("Succeed to get the user session",t),void n(t))})}):(Kp.debug("the user is null"),this.rejectAuthError(yu.NoUserSession))},$p.prototype.currentUserCredentials=function(){return jp(this,void 0,void 0,function(){var t,n;return Bp(this,function(e){switch(e.label){case 0:Kp.debug("Getting current user credentials"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw t=e.sent(),Kp.debug("Failed to sync cache info into memory",t),t;case 4:n=null;try{n=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){Kp.debug("failed to get or parse item aws-amplify-federatedInfo",e)}return n?[2,x.Credentials.refreshFederatedToken(n)]:[2,this.currentSession().then(function(e){return Kp.debug("getting session success",e),x.Credentials.set(e,"session")}).catch(function(e){return Kp.debug("getting session failed",e),x.Credentials.set(null,"guest")})]}})})},$p.prototype.currentCredentials=function(){return Kp.debug("getting current credntials"),x.Credentials.get()},$p.prototype.verifyUserAttribute=function(n,r,o){return void 0===o&&(o=this._config.clientMetadata),new Promise(function(e,t){n.getAttributeVerificationCode(r,{onSuccess:function(){return e()},onFailure:function(e){return t(e)},clientMetadata:o})})},$p.prototype.verifyUserAttributeSubmit=function(e,r,o){return o?new Promise(function(t,n){e.verifyAttribute(r,o,{onSuccess:function(e){t(e)},onFailure:function(e){n(e)}})}):this.rejectAuthError(yu.EmptyCode)},$p.prototype.verifyCurrentUserAttribute=function(t){var n=this;return n.currentUserPoolUser().then(function(e){return n.verifyUserAttribute(e,t)})},$p.prototype.verifyCurrentUserAttributeSubmit=function(t,n){var r=this;return r.currentUserPoolUser().then(function(e){return r.verifyUserAttributeSubmit(e,t,n)})},$p.prototype.cognitoIdentitySignOut=function(s,a){return jp(this,void 0,void 0,function(){var t,o,i=this;return Bp(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._storageSync];case 1:return e.sent(),[3,3];case 2:throw t=e.sent(),Kp.debug("Failed to sync cache info into memory",t),t;case 3:return o=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise(function(n,r){if(!s||!s.global)return Kp.debug("user sign out",a),a.signOut(),o?n(i._oAuthHandler.signOut()):n();Kp.debug("user global sign out",a),a.getSession(function(e,t){if(e)return Kp.debug("failed to get the user session",e),r(e);a.globalSignOut({onSuccess:function(e){return Kp.debug("global sign out success"),o?n(i._oAuthHandler.signOut()):n()},onFailure:function(e){return Kp.debug("global sign out failed",e),r(e)}})})})]}})})},$p.prototype.signOut=function(n){return jp(this,void 0,void 0,function(){var t;return Bp(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return e.sent(),[3,3];case 2:return e.sent(),Kp.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(n,t)]:[3,5]:[3,7];case 4:return e.sent(),[3,6];case 5:Kp.debug("no current Cognito user"),e.label=6;case 6:return[3,8];case 7:Kp.debug("no Congito User pool"),e.label=8;case 8:return Lp("signOut",this.user,"A user has been signed out"),this.user=null,[2]}})})},$p.prototype.cleanCachedItems=function(){return jp(this,void 0,void 0,function(){return Bp(this,function(e){switch(e.label){case 0:return[4,x.Credentials.clear()];case 1:return e.sent(),[2]}})})},$p.prototype.changePassword=function(t,o,i,s){var e=this;return void 0===s&&(s=this._config.clientMetadata),new Promise(function(n,r){e.userSession(t).then(function(e){t.changePassword(o,i,function(e,t){return e?(Kp.debug("change password failure",e),r(e)):n(t)},s)})})},$p.prototype.forgotPassword=function(r,e){if(void 0===e&&(e=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!r)return this.rejectAuthError(yu.EmptyUsername);var o=this.createCognitoUser(r);return new Promise(function(t,n){o.forgotPassword({onSuccess:function(){t()},onFailure:function(e){Kp.debug("forgot password failure",e),Lp("forgotPassword_failure",e,r+" forgotPassword failed"),n(e)},inputVerificationCode:function(e){Lp("forgotPassword",o,r+" has initiated forgot password flow"),t(e)}},e)})},$p.prototype.forgotPasswordSubmit=function(n,r,o,i){if(void 0===i&&(i=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!n)return this.rejectAuthError(yu.EmptyUsername);if(!r)return this.rejectAuthError(yu.EmptyCode);if(!o)return this.rejectAuthError(yu.EmptyPassword);var s=this.createCognitoUser(n);return new Promise(function(e,t){s.confirmPassword(r,o,{onSuccess:function(){Lp("forgotPasswordSubmit",s,n+" forgotPasswordSubmit successful"),e()},onFailure:function(e){Lp("forgotPasswordSubmit_failure",e,n+" forgotPasswordSubmit failed"),t(e)}},i)})},$p.prototype.currentUserInfo=function(){return jp(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return Bp(this,function(e){switch(e.label){case 0:return(t=x.Credentials.getCredSource())&&"aws"!==t&&"userPool"!==t?[3,9]:[4,this.currentUserPoolUser().catch(function(e){return Kp.debug(e)})];case 1:if(!(a=e.sent()))return[2,null];e.label=2;case 2:return e.trys.push([2,8,,9]),[4,this.userAttributes(a)];case 3:n=e.sent(),r=this.attributesToObject(n),o=null,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return o=e.sent(),[3,7];case 6:return i=e.sent(),Kp.debug("Failed to retrieve credentials while getting current user info",i),[3,7];case 7:return[2,{id:o?o.identityId:void 0,username:a.getUsername(),attributes:r}];case 8:return s=e.sent(),Kp.debug("currentUserInfo error",s),[2,{}];case 9:return"federated"===t?[2,(a=this.user)||{}]:[2]}})})},$p.prototype.federatedSignIn=function(h,f,m){return jp(this,void 0,void 0,function(){var n,r,o,i,s,a,u,c,l,p,d;return Bp(this,function(e){switch(e.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===h&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return ku(h)||(t=h)&&["customProvider","customState"].find(function(e){return t.hasOwnProperty(e)})||void 0===h?(n=h||{provider:qp.Cognito},s=ku(n)?n.provider:n.customProvider,ku(n),r=n.customState,this._config.userPoolId&&(o=Ou(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,i=Ou(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,i,o,s,r)),[3,4]):[3,1];case 1:s=h;try{(a=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&Kp.warn("There is already a signed in user: "+a+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(e){}return u=f.token,c=f.identity_id,l=f.expires_at,[4,x.Credentials.set({provider:s,token:u,identity_id:c,user:m,expires_at:l},"federation")];case 2:return p=e.sent(),[4,this.currentAuthenticatedUser()];case 3:return Lp("signIn",d=e.sent(),"A user "+d.username+" has been signed in"),Kp.debug("federated sign in credentials",p),[2,p];case 4:return[2]}var t})})},$p.prototype._handleAuthResponse=function(f){return jp(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h;return Bp(this,function(e){switch(e.label){case 0:if(!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(Lp("parsingCallbackUrl",{url:f},"The callback url is being parsed"),t=f||(x.JS.browserOrNode().isBrowser?window.location.href:""),n=!!(fp(t).query||"").split("&").map(function(e){return e.split("=")}).find(function(e){var t=Vp(e,1)[0];return"code"===t||"error"===t}),r=!!(fp(t).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).find(function(e){var t=Vp(e,1)[0];return"access_token"===t||"error"===t}),!n&&!r)return[3,6];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),e.label=1;case 1:return e.trys.push([1,5,,6]),[4,this._oAuthHandler.handleAuthResponse(t)];case 2:return o=e.sent(),i=o.accessToken,s=o.idToken,a=o.refreshToken,u=o.state,c=new tl({IdToken:new Xc({IdToken:s}),RefreshToken:new el({RefreshToken:a}),AccessToken:new Kc({AccessToken:i})}),l=void 0,this._config.identityPoolId?[4,x.Credentials.set(c,"session")]:[3,4];case 3:l=e.sent(),Kp.debug("AWS credentials",l),e.label=4;case 4:return p=/-/.test(u),Lp("signIn",d=this.createCognitoUser(c.getIdToken().decodePayload()["cognito:username"]),"A user "+d.getUsername()+" has been signed in"),Lp("cognitoHostedUI",d,"A user "+d.getUsername()+" has been signed in via Cognito Hosted UI"),p&&Lp("customOAuthState",u.split("-").splice(1).join("-"),"State for user "+d.getUsername()),d.setSignInUserSession(c),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),[2,l];case 5:return h=e.sent(),Kp.debug("Error in cognito hosted auth response",h),Lp("signIn_failure",h,"The OAuth response flow failed"),Lp("cognitoHostedUI_failure",h,"A failure occurred when returning to the Cognito Hosted UI"),Lp("customState_failure",h,"A failure occurred when returning state"),[3,6];case 6:return[2]}})})},$p.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},$p.prototype.attributesToObject=function(e){var t={};return e&&e.map(function(e){"true"===e.Value?t[e.Name]=!0:"false"===e.Value?t[e.Name]=!1:t[e.Name]=e.Value}),t},$p.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;var n=this._config.authenticationFlowType,r=new ll(t);return n&&r.setAuthenticationFlowType(n),r},$p.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},$p.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?yu.NoConfig:yu.MissingAuthConfig},$p.prototype.rejectAuthError=function(e){return Promise.reject(new Up(e))},$p.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new Dp(e))},new $p(null)),Zp="s3.{region}.amazonaws.com",Qp=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Xp=new Set(["cn-north-1","cn-northwest-1"]),ed=new Set(["us-iso-east-1"]),td=new Set(["us-isob-east-1"]),nd=new Set(["us-gov-west-1","us-gov-east-1"]),rd=te(te({},{apiVersion:"2006-03-01",disableHostPrefix:!1,signingName:"s3",regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-east-1":n={hostname:"s3.ap-east-1.amazonaws.com"};break;case"ap-northeast-1":n={hostname:"s3.ap-northeast-1.amazonaws.com"};break;case"ap-northeast-2":n={hostname:"s3.ap-northeast-2.amazonaws.com"};break;case"ap-south-1":n={hostname:"s3.ap-south-1.amazonaws.com"};break;case"ap-southeast-1":n={hostname:"s3.ap-southeast-1.amazonaws.com"};break;case"ap-southeast-2":n={hostname:"s3.ap-southeast-2.amazonaws.com"};break;case"ca-central-1":n={hostname:"s3.ca-central-1.amazonaws.com"};break;case"cn-north-1":n={hostname:"s3.cn-north-1.amazonaws.com.cn"};break;case"cn-northwest-1":n={hostname:"s3.cn-northwest-1.amazonaws.com.cn"};break;case"eu-central-1":n={hostname:"s3.eu-central-1.amazonaws.com"};break;case"eu-north-1":n={hostname:"s3.eu-north-1.amazonaws.com"};break;case"eu-west-1":n={hostname:"s3.eu-west-1.amazonaws.com"};break;case"eu-west-2":n={hostname:"s3.eu-west-2.amazonaws.com"};break;case"eu-west-3":n={hostname:"s3.eu-west-3.amazonaws.com"};break;case"fips-us-gov-west-1":n={hostname:"s3-fips-us-gov-west-1.amazonaws.com",signingRegion:"us-gov-west-1"};break;case"me-south-1":n={hostname:"s3.me-south-1.amazonaws.com"};break;case"s3-external-1":n={hostname:"s3-external-1.amazonaws.com",signingRegion:"us-east-1"};break;case"sa-east-1":n={hostname:"s3.sa-east-1.amazonaws.com"};break;case"us-east-1":n={hostname:"s3.amazonaws.com"};break;case"us-east-2":n={hostname:"s3.us-east-2.amazonaws.com"};break;case"us-gov-east-1":n={hostname:"s3.us-gov-east-1.amazonaws.com"};break;case"us-gov-west-1":n={hostname:"s3.us-gov-west-1.amazonaws.com"};break;case"us-iso-east-1":n={hostname:"s3.us-iso-east-1.c2s.ic.gov"};break;case"us-isob-east-1":n={hostname:"s3.us-isob-east-1.sc2s.sgov.gov"};break;case"us-west-1":n={hostname:"s3.us-west-1.amazonaws.com"};break;case"us-west-2":n={hostname:"s3.us-west-2.amazonaws.com"};break;default:Qp.has(e)&&(n={hostname:Zp.replace("{region}",e)}),Xp.has(e)&&(n={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e)}),ed.has(e)&&(n={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e)}),td.has(e)&&(n={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e)}),nd.has(e)&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:Zp.replace("{region}",e)})}return Promise.resolve(n)},signingEscapePath:!1}),{requestHandler:new i.NodeHttpHandler,sha256:o.Hash.bind(null,"sha256"),urlParser:s.parseUrl,bodyLengthChecker:a.calculateBodyLength,streamCollector:u.streamCollector,base64Decoder:l.fromBase64,base64Encoder:l.toBase64,utf8Decoder:c.fromUtf8,utf8Encoder:c.toUtf8,defaultUserAgent:p.defaultUserAgent("@aws-sdk/client-s3","1.0.0-beta.3"),runtime:"node",credentialDefaultProvider:n.defaultProvider,regionDefaultProvider:r.defaultProvider,md5:o.Hash.bind(null,"md5"),streamHasher:M.fileStreamHasher,eventStreamSerdeProvider:I.eventStreamSerdeProvider}),od=(ee(id,Jp=_.Client),id.prototype.destroy=function(){},id);function id(e){var t=this,n=te(te({},rd),e),r=d.resolveRegionConfig(n),o=d.resolveEndpointsConfig(r),i=y.resolveAwsAuthConfig(o),s=g.resolveRetryConfig(i),a=w.resolveUserAgentConfig(s),u=R.resolveBucketEndpointConfig(a),c=m.resolveHostHeaderConfig(u),l=A.resolveEventStreamSerdeConfig(c);return(t=Jp.call(this,l)||this).config=l,t.middlewareStack.use(y.getAwsAuthPlugin(t.config)),t.middlewareStack.use(g.getRetryPlugin(t.config)),t.middlewareStack.use(w.getUserAgentPlugin(t.config)),t.middlewareStack.use(f.getContentLengthPlugin(t.config)),t.middlewareStack.use(F.getValidateBucketNamePlugin(t.config)),t.middlewareStack.use(D.getAddExpectContinuePlugin(t.config)),t.middlewareStack.use(m.getHostHeaderPlugin(t.config)),t}function sd(a,u){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s;return se(this,function(e){if(t={"Content-Type":"application/xml"},void 0!==a.RequestPayer&&(t["x-amz-request-payer"]=a.RequestPayer),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",_.extendedEncodeURIComponent(r)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return _.extendedEncodeURIComponent(e)}).join("/")),o={},void 0!==a.UploadId&&(o.uploadId=a.UploadId),void 0!==a.MultipartUpload&&(s=function(e){var t=new L.XmlNode("CompletedMultipartUpload");void 0!==e.Parts&&function(e){var t,n,r,o,i=[];try{for(var s=ae(e),a=s.next();!a.done;a=s.next()){var u=a.value,c=(r=u,o=void 0,o=new L.XmlNode("CompletedPart"),void 0!==r.ETag&&o.addChildNode(new L.XmlNode("ETag").addChildNode(new L.XmlText(r.ETag)).withName("ETag")),void 0!==r.PartNumber&&o.addChildNode(new L.XmlNode("PartNumber").addChildNode(new L.XmlText(String(r.PartNumber))).withName("PartNumber")),o);i.push(c.withName("member"))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i}(e.Parts).map(function(e){e=e.withName("Part"),t.addChildNode(e)});return t}(a.MultipartUpload),i='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=s.toString()),[2,new S.HttpRequest(te(te({},u.endpoint),{protocol:"https",method:"POST",headers:t,path:n,query:o,body:i}))]})})}function ad(n,r){return ie(this,void 0,void 0,function(){var t;return se(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&400<=n.statusCode?[2,function(l,p){return ie(this,void 0,void 0,function(){var t,r,o,i,s,a,u,c;return se(this,function(e){switch(e.label){case 0:return r=[te({},l)],o={},[4,hd(l.body,p)];case 1:switch(t=te.apply(void 0,r.concat([(o.body=e.sent(),o)])),s="UnknownError",s=fd(l,t.body)){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return a=[{}],[4,(n=t,ie(void 0,void 0,void 0,function(){var t;return se(this,function(e){return t={name:"NoSuchUpload",$fault:"client",$metadata:gd(n)},n.body,[2,t]})}))];case 3:return i=te.apply(void 0,[te.apply(void 0,a.concat([e.sent()])),{name:s,$metadata:gd(l)}]),[3,5];case 4:u=t.body,s=u.code||u.Code||s,i=te(te({},u),{name:""+s,message:u.message||u.Message||s,$fault:"client",$metadata:gd(l)}),e.label=5;case 5:return c=i.message||i.Message||s,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}var n})})}(n,r)]:(t={$metadata:gd(n),__type:"AbortMultipartUploadOutput",RequestCharged:void 0},void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,pd(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})})}function ud(r,o){return ie(this,void 0,void 0,function(){var t,n;return se(this,function(e){return 200!==r.statusCode&&400<=r.statusCode?[2,function(l,p){return ie(this,void 0,void 0,function(){var t,r,o,i,s,a,u,c;return se(this,function(e){switch(e.label){case 0:return r=[te({},l)],o={},[4,hd(l.body,p)];case 1:switch(t=te.apply(void 0,r.concat([(o.body=e.sent(),o)])),s="UnknownError",s=fd(l,t.body)){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,2]}return[3,4];case 2:return a=[{}],[4,(n=t,ie(void 0,void 0,void 0,function(){var t;return se(this,function(e){return t={name:"NoSuchKey",$fault:"client",$metadata:gd(n)},n.body,[2,t]})}))];case 3:return i=te.apply(void 0,[te.apply(void 0,a.concat([e.sent()])),{name:s,$metadata:gd(l)}]),[3,5];case 4:u=t.body,s=u.code||u.Code||s,i=te(te({},u),{name:""+s,message:u.message||u.Message||s,$fault:"client",$metadata:gd(l)}),e.label=5;case 5:return c=i.message||i.Message||s,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}var n})})}(r,o)]:(t={$metadata:gd(r),__type:"GetObjectOutput",AcceptRanges:void 0,Body:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==r.headers["accept-ranges"]&&(t.AcceptRanges=r.headers["accept-ranges"]),void 0!==r.headers["cache-control"]&&(t.CacheControl=r.headers["cache-control"]),void 0!==r.headers["content-disposition"]&&(t.ContentDisposition=r.headers["content-disposition"]),void 0!==r.headers["content-encoding"]&&(t.ContentEncoding=r.headers["content-encoding"]),void 0!==r.headers["content-language"]&&(t.ContentLanguage=r.headers["content-language"]),void 0!==r.headers["content-length"]&&(t.ContentLength=parseInt(r.headers["content-length"],10)),void 0!==r.headers["content-range"]&&(t.ContentRange=r.headers["content-range"]),void 0!==r.headers["content-type"]&&(t.ContentType=r.headers["content-type"]),void 0!==r.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===r.headers["x-amz-delete-marker"]),void 0!==r.headers.etag&&(t.ETag=r.headers.etag),void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),void 0!==r.headers.expires&&(t.Expires=new Date(r.headers.expires)),void 0!==r.headers["last-modified"]&&(t.LastModified=new Date(r.headers["last-modified"])),void 0!==r.headers["x-amz-missing-meta"]&&(t.MissingMeta=parseInt(r.headers["x-amz-missing-meta"],10)),void 0!==r.headers["x-amz-object-lock-legal-hold"]&&(t.ObjectLockLegalHoldStatus=r.headers["x-amz-object-lock-legal-hold"]),void 0!==r.headers["x-amz-object-lock-mode"]&&(t.ObjectLockMode=r.headers["x-amz-object-lock-mode"]),void 0!==r.headers["x-amz-object-lock-retain-until-date"]&&(t.ObjectLockRetainUntilDate=new Date(r.headers["x-amz-object-lock-retain-until-date"])),void 0!==r.headers["x-amz-mp-parts-count"]&&(t.PartsCount=parseInt(r.headers["x-amz-mp-parts-count"],10)),void 0!==r.headers["x-amz-replication-status"]&&(t.ReplicationStatus=r.headers["x-amz-replication-status"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),void 0!==r.headers["x-amz-restore"]&&(t.Restore=r.headers["x-amz-restore"]),void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-storage-class"]&&(t.StorageClass=r.headers["x-amz-storage-class"]),void 0!==r.headers["x-amz-tagging-count"]&&(t.TagCount=parseInt(r.headers["x-amz-tagging-count"],10)),void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),void 0!==r.headers["x-amz-website-redirect-location"]&&(t.WebsiteRedirectLocation=r.headers["x-amz-website-redirect-location"]),Object.keys(r.headers).forEach(function(e){void 0===t.Metadata&&(t.Metadata={}),e.startsWith("x-amz-meta-")&&(t.Metadata[e.substring(11)]=r.headers[e])}),n=r.body,t.Body=n,[2,Promise.resolve(t)])})})}function cd(s,a){return ie(this,void 0,void 0,function(){var t,o,i;return se(this,function(e){switch(e.label){case 0:return 200!==s.statusCode&&400<=s.statusCode?[2,function(l,p){return ie(this,void 0,void 0,function(){var t,r,o,i,s,a,u,c;return se(this,function(e){switch(e.label){case 0:return r=[te({},l)],o={},[4,hd(l.body,p)];case 1:switch(t=te.apply(void 0,r.concat([(o.body=e.sent(),o)])),s="UnknownError",s=fd(l,t.body)){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return a=[{}],[4,(n=t,ie(void 0,void 0,void 0,function(){var t;return se(this,function(e){return t={name:"NoSuchBucket",$fault:"client",$metadata:gd(n)},n.body,[2,t]})}))];case 3:return i=te.apply(void 0,[te.apply(void 0,a.concat([e.sent()])),{name:s,$metadata:gd(l)}]),[3,5];case 4:u=t.body,s=u.code||u.Code||s,i=te(te({},u),{name:""+s,message:u.message||u.Message||s,$fault:"client",$metadata:gd(l)}),e.label=5;case 5:return c=i.message||i.Message||s,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}var n})})}(s,a)]:(t={$metadata:gd(s),__type:"ListObjectsOutput",CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,hd(s.body,a)]);case 1:return""===(o=e.sent()).CommonPrefixes&&(t.CommonPrefixes=[]),void 0!==o.CommonPrefixes&&(i=o.CommonPrefixes instanceof Array?o.CommonPrefixes:[o.CommonPrefixes],t.CommonPrefixes=(n=[],(i||[]).map(function(e){var t;n.push((t={__type:"CommonPrefix",Prefix:void 0},void 0!==e.Prefix&&(t.Prefix=e.Prefix),t))}),n)),""===o.Contents&&(t.Contents=[]),void 0!==o.Contents&&(i=o.Contents instanceof Array?o.Contents:[o.Contents],t.Contents=(r=[],(i||[]).map(function(e){var t,n;r.push((n={__type:"Object",ETag:void 0,Key:void 0,LastModified:void 0,Owner:void 0,Size:void 0,StorageClass:void 0},void 0!==(t=e).ETag&&(n.ETag=t.ETag),void 0!==t.Key&&(n.Key=t.Key),void 0!==t.LastModified&&(n.LastModified=new Date(t.LastModified)),void 0!==t.Owner&&(n.Owner=dd(t.Owner)),void 0!==t.Size&&(n.Size=parseInt(t.Size)),void 0!==t.StorageClass&&(n.StorageClass=t.StorageClass),n))}),r)),void 0!==o.Delimiter&&(t.Delimiter=o.Delimiter),void 0!==o.EncodingType&&(t.EncodingType=o.EncodingType),void 0!==o.IsTruncated&&(t.IsTruncated="true"==o.IsTruncated),void 0!==o.Marker&&(t.Marker=o.Marker),void 0!==o.MaxKeys&&(t.MaxKeys=parseInt(o.MaxKeys)),void 0!==o.Name&&(t.Name=o.Name),void 0!==o.NextMarker&&(t.NextMarker=o.NextMarker),void 0!==o.Prefix&&(t.Prefix=o.Prefix),[2,Promise.resolve(t)]}var r,n})})}function ld(a,u){return ie(this,void 0,void 0,function(){var o,i,s;return se(this,function(e){switch(e.label){case 0:return 200!==a.statusCode&&400<=a.statusCode?[2,function(u,c){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return se(this,function(e){switch(e.label){case 0:return n=[te({},u)],r={},[4,hd(u.body,c)];case 1:return t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=fd(u,t.body),s=t.body,i=s.code||s.Code||i,o=te(te({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:gd(u)}),a=o.message||o.Message||i,o.message=a,delete o.Message,[2,Promise.reject(Object.assign(new Error(a),o))]}})})}(a,u)]:(o={$metadata:gd(a),__type:"ListPartsOutput",AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==a.headers["x-amz-abort-date"]&&(o.AbortDate=new Date(a.headers["x-amz-abort-date"])),void 0!==a.headers["x-amz-abort-rule-id"]&&(o.AbortRuleId=a.headers["x-amz-abort-rule-id"]),void 0!==a.headers["x-amz-request-charged"]&&(o.RequestCharged=a.headers["x-amz-request-charged"]),[4,hd(a.body,u)]);case 1:return void 0!==(i=e.sent()).Bucket&&(o.Bucket=i.Bucket),void 0!==i.Initiator&&(o.Initiator=(t=i.Initiator,n={__type:"Initiator",DisplayName:void 0,ID:void 0},void 0!==t.DisplayName&&(n.DisplayName=t.DisplayName),void 0!==t.ID&&(n.ID=t.ID),n)),void 0!==i.IsTruncated&&(o.IsTruncated="true"==i.IsTruncated),void 0!==i.Key&&(o.Key=i.Key),void 0!==i.MaxParts&&(o.MaxParts=parseInt(i.MaxParts)),void 0!==i.NextPartNumberMarker&&(o.NextPartNumberMarker=parseInt(i.NextPartNumberMarker)),void 0!==i.Owner&&(o.Owner=dd(i.Owner)),void 0!==i.PartNumberMarker&&(o.PartNumberMarker=parseInt(i.PartNumberMarker)),""===i.Part&&(o.Parts=[]),void 0!==i.Part&&(s=i.Part instanceof Array?i.Part:[i.Part],o.Parts=(r=[],(s||[]).map(function(e){var t,n;r.push((n={__type:"Part",ETag:void 0,LastModified:void 0,PartNumber:void 0,Size:void 0},void 0!==(t=e).ETag&&(n.ETag=t.ETag),void 0!==t.LastModified&&(n.LastModified=new Date(t.LastModified)),void 0!==t.PartNumber&&(n.PartNumber=parseInt(t.PartNumber)),void 0!==t.Size&&(n.Size=parseInt(t.Size)),n))}),r)),void 0!==i.StorageClass&&(o.StorageClass=i.StorageClass),void 0!==i.UploadId&&(o.UploadId=i.UploadId),[2,Promise.resolve(o)]}var t,n,r})})}function pd(e,t){return e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}function dd(e,t){var n={__type:"Owner",DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),void 0!==e.ID&&(n.ID=e.ID),n}function hd(e,t){return pd(e,n=t).then(function(e){return n.utf8Encoder(e)}).then(function(e){if(e.length){var t=j.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(e,t){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}}),n=Object.keys(t)[0],r=t[n];return r["#text"]&&(r[n]=r["#text"],delete r["#text"]),r}return{}});var n}function fd(e,t){return void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":""}var md,gd=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},yd=(ee(vd,md=_.Command),vd.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(C.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(R.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},vd.prototype.serialize=function(e,t){return function(i,s){return ie(this,void 0,void 0,function(){var t,n,r,o;return se(this,function(e){if(t={"Content-Type":""},void 0!==i.RequestPayer&&(t["x-amz-request-payer"]=i.RequestPayer),n="/{Bucket}/{Key+}",void 0===i.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=i.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",_.extendedEncodeURIComponent(r)),void 0===i.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=i.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return _.extendedEncodeURIComponent(e)}).join("/")),o={"x-id":"AbortMultipartUpload"},void 0!==i.UploadId&&(o.uploadId=i.UploadId),[2,new S.HttpRequest(te(te({},s.endpoint),{protocol:"https",method:"DELETE",headers:t,path:n,query:o,body:void 0}))]})})}(e,t)},vd.prototype.deserialize=function(e,t){return ad(e,t)},vd);function vd(e){var t=md.call(this)||this;return t.input=e,t}var bd,wd=(ee(_d,bd=_.Command),_d.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(C.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(R.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},_d.prototype.serialize=function(e,t){return sd(e,t)},_d.prototype.deserialize=function(e,t){return function(r,o){return ie(this,void 0,void 0,function(){var t,n;return se(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&400<=r.statusCode?[2,function(u,c){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return se(this,function(e){switch(e.label){case 0:return n=[te({},u)],r={},[4,hd(u.body,c)];case 1:return t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=fd(u,t.body),s=t.body,i=s.code||s.Code||i,o=te(te({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:gd(u)}),a=o.message||o.Message||i,o.message=a,delete o.Message,[2,Promise.reject(Object.assign(new Error(a),o))]}})})}(r,o)]:(t={$metadata:gd(r),__type:"CompleteMultipartUploadOutput",Bucket:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),[4,hd(r.body,o)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.ETag&&(t.ETag=n.ETag),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.Location&&(t.Location=n.Location),[2,Promise.resolve(t)]}})})}(e,t)},_d);function _d(e){var t=bd.call(this)||this;return t.input=e,t}var Sd,Cd=(ee(Ed,Sd=_.Command),Ed.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(C.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(B.getSsecPlugin(t)),this.middlewareStack.use(R.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Ed.prototype.serialize=function(e,t){return function(i,s){return ie(this,void 0,void 0,function(){var t,n,r,o;return se(this,function(e){if(t={"Content-Type":""},void 0!==i.ACL&&(t["x-amz-acl"]=i.ACL),void 0!==i.CacheControl&&(t["Cache-Control"]=i.CacheControl),void 0!==i.ContentDisposition&&(t["Content-Disposition"]=i.ContentDisposition),void 0!==i.ContentEncoding&&(t["Content-Encoding"]=i.ContentEncoding),void 0!==i.ContentLanguage&&(t["Content-Language"]=i.ContentLanguage),void 0!==i.ContentType&&(t["Content-Type"]=i.ContentType),void 0!==i.Expires&&(t.Expires=_.dateToUtcString(i.Expires).toString()),void 0!==i.GrantFullControl&&(t["x-amz-grant-full-control"]=i.GrantFullControl),void 0!==i.GrantRead&&(t["x-amz-grant-read"]=i.GrantRead),void 0!==i.GrantReadACP&&(t["x-amz-grant-read-acp"]=i.GrantReadACP),void 0!==i.GrantWriteACP&&(t["x-amz-grant-write-acp"]=i.GrantWriteACP),void 0!==i.ObjectLockLegalHoldStatus&&(t["x-amz-object-lock-legal-hold"]=i.ObjectLockLegalHoldStatus),void 0!==i.ObjectLockMode&&(t["x-amz-object-lock-mode"]=i.ObjectLockMode),void 0!==i.ObjectLockRetainUntilDate&&(t["x-amz-object-lock-retain-until-date"]=(i.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()),void 0!==i.RequestPayer&&(t["x-amz-request-payer"]=i.RequestPayer),void 0!==i.SSECustomerAlgorithm&&(t["x-amz-server-side-encryption-customer-algorithm"]=i.SSECustomerAlgorithm),void 0!==i.SSECustomerKey&&(t["x-amz-server-side-encryption-customer-key"]=i.SSECustomerKey),void 0!==i.SSECustomerKeyMD5&&(t["x-amz-server-side-encryption-customer-key-MD5"]=i.SSECustomerKeyMD5),void 0!==i.SSEKMSEncryptionContext&&(t["x-amz-server-side-encryption-context"]=i.SSEKMSEncryptionContext),void 0!==i.SSEKMSKeyId&&(t["x-amz-server-side-encryption-aws-kms-key-id"]=i.SSEKMSKeyId),void 0!==i.ServerSideEncryption&&(t["x-amz-server-side-encryption"]=i.ServerSideEncryption),void 0!==i.StorageClass&&(t["x-amz-storage-class"]=i.StorageClass),void 0!==i.Tagging&&(t["x-amz-tagging"]=i.Tagging),void 0!==i.WebsiteRedirectLocation&&(t["x-amz-website-redirect-location"]=i.WebsiteRedirectLocation),void 0!==i.Metadata&&Object.keys(i.Metadata).forEach(function(e){t["x-amz-meta-"+e]=i.Metadata[e]}),n="/{Bucket}/{Key+}",void 0===i.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=i.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",_.extendedEncodeURIComponent(r)),void 0===i.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=i.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return _.extendedEncodeURIComponent(e)}).join("/")),o={uploads:""},[2,new S.HttpRequest(te(te({},s.endpoint),{protocol:"https",method:"POST",headers:t,path:n,query:o,body:void 0}))]})})}(e,t)},Ed.prototype.deserialize=function(e,t){return function(r,o){return ie(this,void 0,void 0,function(){var t,n;return se(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&400<=r.statusCode?[2,function(u,c){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return se(this,function(e){switch(e.label){case 0:return n=[te({},u)],r={},[4,hd(u.body,c)];case 1:return t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=fd(u,t.body),s=t.body,i=s.code||s.Code||i,o=te(te({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:gd(u)}),a=o.message||o.Message||i,o.message=a,delete o.Message,[2,Promise.reject(Object.assign(new Error(a),o))]}})})}(r,o)]:(t={$metadata:gd(r),__type:"CreateMultipartUploadOutput",AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==r.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(r.headers["x-amz-abort-date"])),void 0!==r.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=r.headers["x-amz-abort-rule-id"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==r.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=r.headers["x-amz-server-side-encryption-context"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),[4,hd(r.body,o)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.UploadId&&(t.UploadId=n.UploadId),[2,Promise.resolve(t)]}})})}(e,t)},Ed);function Ed(e){var t=Sd.call(this)||this;return t.input=e,t}var Id,Ad=(ee(Pd,Id=_.Command),Pd.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(C.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(R.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Pd.prototype.serialize=function(e,t){return function(i,s){return ie(this,void 0,void 0,function(){var t,n,r,o;return se(this,function(e){if(t={"Content-Type":""},void 0!==i.BypassGovernanceRetention&&(t["x-amz-bypass-governance-retention"]=i.BypassGovernanceRetention.toString()),void 0!==i.MFA&&(t["x-amz-mfa"]=i.MFA),void 0!==i.RequestPayer&&(t["x-amz-request-payer"]=i.RequestPayer),n="/{Bucket}/{Key+}",void 0===i.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=i.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",_.extendedEncodeURIComponent(r)),void 0===i.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=i.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return _.extendedEncodeURIComponent(e)}).join("/")),o={"x-id":"DeleteObject"},void 0!==i.VersionId&&(o.versionId=i.VersionId),[2,new S.HttpRequest(te(te({},s.endpoint),{protocol:"https",method:"DELETE",headers:t,path:n,query:o,body:void 0}))]})})}(e,t)},Pd.prototype.deserialize=function(e,t){return function(n,r){return ie(this,void 0,void 0,function(){var t;return se(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&400<=n.statusCode?[2,function(u,c){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return se(this,function(e){switch(e.label){case 0:return n=[te({},u)],r={},[4,hd(u.body,c)];case 1:return t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=fd(u,t.body),s=t.body,i=s.code||s.Code||i,o=te(te({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:gd(u)}),a=o.message||o.Message||i,o.message=a,delete o.Message,[2,Promise.reject(Object.assign(new Error(a),o))]}})})}(n,r)]:(t={$metadata:gd(n),__type:"DeleteObjectOutput",DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==n.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===n.headers["x-amz-delete-marker"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),[4,pd(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})})}(e,t)},Pd);function Pd(e){var t=Id.call(this)||this;return t.input=e,t}var kd,Od=(ee(Td,kd=_.Command),Td.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(C.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(B.getSsecPlugin(t)),this.middlewareStack.use(R.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Td.prototype.serialize=function(e,t){return function(i,s){return ie(this,void 0,void 0,function(){var t,n,r,o;return se(this,function(e){if(t={"Content-Type":""},void 0!==i.IfMatch&&(t["If-Match"]=i.IfMatch),void 0!==i.IfModifiedSince&&(t["If-Modified-Since"]=_.dateToUtcString(i.IfModifiedSince).toString()),void 0!==i.IfNoneMatch&&(t["If-None-Match"]=i.IfNoneMatch),void 0!==i.IfUnmodifiedSince&&(t["If-Unmodified-Since"]=_.dateToUtcString(i.IfUnmodifiedSince).toString()),void 0!==i.Range&&(t.Range=i.Range),void 0!==i.RequestPayer&&(t["x-amz-request-payer"]=i.RequestPayer),void 0!==i.SSECustomerAlgorithm&&(t["x-amz-server-side-encryption-customer-algorithm"]=i.SSECustomerAlgorithm),void 0!==i.SSECustomerKey&&(t["x-amz-server-side-encryption-customer-key"]=i.SSECustomerKey),void 0!==i.SSECustomerKeyMD5&&(t["x-amz-server-side-encryption-customer-key-MD5"]=i.SSECustomerKeyMD5),n="/{Bucket}/{Key+}",void 0===i.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=i.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",_.extendedEncodeURIComponent(r)),void 0===i.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=i.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return _.extendedEncodeURIComponent(e)}).join("/")),o={"x-id":"GetObject"},void 0!==i.PartNumber&&(o.partNumber=i.PartNumber.toString()),void 0!==i.ResponseCacheControl&&(o["response-cache-control"]=i.ResponseCacheControl),void 0!==i.ResponseContentDisposition&&(o["response-content-disposition"]=i.ResponseContentDisposition),void 0!==i.ResponseContentEncoding&&(o["response-content-encoding"]=i.ResponseContentEncoding),void 0!==i.ResponseContentLanguage&&(o["response-content-language"]=i.ResponseContentLanguage),void 0!==i.ResponseContentType&&(o["response-content-type"]=i.ResponseContentType),void 0!==i.ResponseExpires&&(o["response-expires"]=(i.ResponseExpires.toISOString().split(".")[0]+"Z").toString()),void 0!==i.VersionId&&(o.versionId=i.VersionId),[2,new S.HttpRequest(te(te({},s.endpoint),{protocol:"https",method:"GET",headers:t,path:n,query:o,body:void 0}))]})})}(e,t)},Td.prototype.deserialize=function(e,t){return ud(e,t)},Td);function Td(e){var t=kd.call(this)||this;return t.input=e,t}var xd,Nd=(ee(Ud,xd=_.Command),Ud.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(C.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(R.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Ud.prototype.serialize=function(e,t){return function(i,s){return ie(this,void 0,void 0,function(){var t,n,r,o;return se(this,function(e){if(t={"Content-Type":""},void 0!==i.RequestPayer&&(t["x-amz-request-payer"]=i.RequestPayer),n="/{Bucket}",void 0===i.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=i.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",_.extendedEncodeURIComponent(r)),o={},void 0!==i.Delimiter&&(o.delimiter=i.Delimiter),void 0!==i.EncodingType&&(o["encoding-type"]=i.EncodingType),void 0!==i.Marker&&(o.marker=i.Marker),void 0!==i.MaxKeys&&(o["max-keys"]=i.MaxKeys.toString()),void 0!==i.Prefix&&(o.prefix=i.Prefix),[2,new S.HttpRequest(te(te({},s.endpoint),{protocol:"https",method:"GET",headers:t,path:n,query:o,body:void 0}))]})})}(e,t)},Ud.prototype.deserialize=function(e,t){return cd(e,t)},Ud);function Ud(e){var t=xd.call(this)||this;return t.input=e,t}var Md,Rd=(ee(Dd,Md=_.Command),Dd.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(C.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(R.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},Dd.prototype.serialize=function(e,t){return function(i,s){return ie(this,void 0,void 0,function(){var t,n,r,o;return se(this,function(e){if(t={"Content-Type":""},void 0!==i.RequestPayer&&(t["x-amz-request-payer"]=i.RequestPayer),n="/{Bucket}/{Key+}",void 0===i.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=i.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",_.extendedEncodeURIComponent(r)),void 0===i.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=i.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return _.extendedEncodeURIComponent(e)}).join("/")),o={"x-id":"ListParts"},void 0!==i.MaxParts&&(o["max-parts"]=i.MaxParts.toString()),void 0!==i.PartNumberMarker&&(o["part-number-marker"]=i.PartNumberMarker.toString()),void 0!==i.UploadId&&(o.uploadId=i.UploadId),[2,new S.HttpRequest(te(te({},s.endpoint),{protocol:"https",method:"GET",headers:t,path:n,query:o,body:void 0}))]})})}(e,t)},Dd.prototype.deserialize=function(e,t){return ld(e,t)},Dd);function Dd(e){var t=Md.call(this)||this;return t.input=e,t}var Fd,Ld=(ee(jd,Fd=_.Command),jd.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(C.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(B.getSsecPlugin(t)),this.middlewareStack.use(R.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},jd.prototype.serialize=function(e,t){return function(a,u){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s;return se(this,function(e){if(t={"Content-Type":"application/octet-stream"},void 0!==a.ACL&&(t["x-amz-acl"]=a.ACL),void 0!==a.CacheControl&&(t["Cache-Control"]=a.CacheControl),void 0!==a.ContentDisposition&&(t["Content-Disposition"]=a.ContentDisposition),void 0!==a.ContentEncoding&&(t["Content-Encoding"]=a.ContentEncoding),void 0!==a.ContentLanguage&&(t["Content-Language"]=a.ContentLanguage),void 0!==a.ContentLength&&(t["Content-Length"]=a.ContentLength.toString()),void 0!==a.ContentMD5&&(t["Content-MD5"]=a.ContentMD5),void 0!==a.ContentType&&(t["Content-Type"]=a.ContentType),void 0!==a.Expires&&(t.Expires=_.dateToUtcString(a.Expires).toString()),void 0!==a.GrantFullControl&&(t["x-amz-grant-full-control"]=a.GrantFullControl),void 0!==a.GrantRead&&(t["x-amz-grant-read"]=a.GrantRead),void 0!==a.GrantReadACP&&(t["x-amz-grant-read-acp"]=a.GrantReadACP),void 0!==a.GrantWriteACP&&(t["x-amz-grant-write-acp"]=a.GrantWriteACP),void 0!==a.ObjectLockLegalHoldStatus&&(t["x-amz-object-lock-legal-hold"]=a.ObjectLockLegalHoldStatus),void 0!==a.ObjectLockMode&&(t["x-amz-object-lock-mode"]=a.ObjectLockMode),void 0!==a.ObjectLockRetainUntilDate&&(t["x-amz-object-lock-retain-until-date"]=(a.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()),void 0!==a.RequestPayer&&(t["x-amz-request-payer"]=a.RequestPayer),void 0!==a.SSECustomerAlgorithm&&(t["x-amz-server-side-encryption-customer-algorithm"]=a.SSECustomerAlgorithm),void 0!==a.SSECustomerKey&&(t["x-amz-server-side-encryption-customer-key"]=a.SSECustomerKey),void 0!==a.SSECustomerKeyMD5&&(t["x-amz-server-side-encryption-customer-key-MD5"]=a.SSECustomerKeyMD5),void 0!==a.SSEKMSEncryptionContext&&(t["x-amz-server-side-encryption-context"]=a.SSEKMSEncryptionContext),void 0!==a.SSEKMSKeyId&&(t["x-amz-server-side-encryption-aws-kms-key-id"]=a.SSEKMSKeyId),void 0!==a.ServerSideEncryption&&(t["x-amz-server-side-encryption"]=a.ServerSideEncryption),void 0!==a.StorageClass&&(t["x-amz-storage-class"]=a.StorageClass),void 0!==a.Tagging&&(t["x-amz-tagging"]=a.Tagging),void 0!==a.WebsiteRedirectLocation&&(t["x-amz-website-redirect-location"]=a.WebsiteRedirectLocation),void 0!==a.Metadata&&Object.keys(a.Metadata).forEach(function(e){t["x-amz-meta-"+e]=a.Metadata[e]}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",_.extendedEncodeURIComponent(r)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return _.extendedEncodeURIComponent(e)}).join("/")),o={"x-id":"PutObject"},void 0!==a.Body&&(s=a.Body,i=s),[2,new S.HttpRequest(te(te({},u.endpoint),{protocol:"https",method:"PUT",headers:t,path:n,query:o,body:i}))]})})}(e,t)},jd.prototype.deserialize=function(e,t){return function(n,r){return ie(this,void 0,void 0,function(){var t;return se(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&400<=n.statusCode?[2,function(u,c){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return se(this,function(e){switch(e.label){case 0:return n=[te({},u)],r={},[4,hd(u.body,c)];case 1:return t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=fd(u,t.body),s=t.body,i=s.code||s.Code||i,o=te(te({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:gd(u)}),a=o.message||o.Message||i,o.message=a,delete o.Message,[2,Promise.reject(Object.assign(new Error(a),o))]}})})}(n,r)]:(t={$metadata:gd(n),__type:"PutObjectOutput",ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-expiration"]&&(t.Expiration=n.headers["x-amz-expiration"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=n.headers["x-amz-server-side-encryption-context"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),[4,pd(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})})}(e,t)},jd);function jd(e){var t=Fd.call(this)||this;return t.input=e,t}var Bd,Vd=(ee(qd,Bd=_.Command),qd.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(C.getSerdePlugin(t,this.serialize,this.deserialize)),this.middlewareStack.use(B.getSsecPlugin(t)),this.middlewareStack.use(R.getBucketEndpointPlugin(t));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},qd.prototype.serialize=function(e,t){return function(a,u){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s;return se(this,function(e){if(t={"Content-Type":"application/octet-stream"},void 0!==a.ContentLength&&(t["Content-Length"]=a.ContentLength.toString()),void 0!==a.ContentMD5&&(t["Content-MD5"]=a.ContentMD5),void 0!==a.RequestPayer&&(t["x-amz-request-payer"]=a.RequestPayer),void 0!==a.SSECustomerAlgorithm&&(t["x-amz-server-side-encryption-customer-algorithm"]=a.SSECustomerAlgorithm),void 0!==a.SSECustomerKey&&(t["x-amz-server-side-encryption-customer-key"]=a.SSECustomerKey),void 0!==a.SSECustomerKeyMD5&&(t["x-amz-server-side-encryption-customer-key-MD5"]=a.SSECustomerKeyMD5),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((r=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",_.extendedEncodeURIComponent(r)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((r=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",r.split("/").map(function(e){return _.extendedEncodeURIComponent(e)}).join("/")),o={"x-id":"UploadPart"},void 0!==a.PartNumber&&(o.partNumber=a.PartNumber.toString()),void 0!==a.UploadId&&(o.uploadId=a.UploadId),void 0!==a.Body&&(s=a.Body,i=s),[2,new S.HttpRequest(te(te({},u.endpoint),{protocol:"https",method:"PUT",headers:t,path:n,query:o,body:i}))]})})}(e,t)},qd.prototype.deserialize=function(e,t){return function(n,r){return ie(this,void 0,void 0,function(){var t;return se(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&400<=n.statusCode?[2,function(u,c){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a;return se(this,function(e){switch(e.label){case 0:return n=[te({},u)],r={},[4,hd(u.body,c)];case 1:return t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=fd(u,t.body),s=t.body,i=s.code||s.Code||i,o=te(te({},s),{name:""+i,message:s.message||s.Message||i,$fault:"client",$metadata:gd(u)}),a=o.message||o.Message||i,o.message=a,delete o.Message,[2,Promise.reject(Object.assign(new Error(a),o))]}})})}(n,r)]:(t={$metadata:gd(n),__type:"UploadPartOutput",ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),[4,pd(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})})}(e,t)},qd);function qd(e){var t=Bd.call(this)||this;return t.input=e,t}var zd=new x.ConsoleLogger("axios-http-handler"),Hd="sendProgress",Kd=(Gd.prototype.destroy=function(){},Gd.prototype.handle=function(e,t){var n=this.httpOptions.requestTimeout,r=this.emitter,o=e.path;if(e.query){var i=G.buildQueryString(e.query);i&&(o+="?"+i)}var s=e.port,a=e.protocol+"//"+e.hostname+(s?":"+s:"")+o,u={};u.url=a,u.method=e.method,u.headers=e.headers,u.data=e.body,r&&(u.onUploadProgress=function(e){r.emit(Hd,e),zd.debug(e)}),this.httpOptions.bufferBody&&(u.responseType="blob");var c,l=[W.request(u).then(function(e){return{response:new S.HttpResponse({headers:e.headers,statusCode:e.status,body:e.data})}}).catch(function(e){throw zd.error(e),e}),(void 0===(c=n)&&(c=0),new Promise(function(e,t){c&&setTimeout(function(){var e=new Error("Request did not complete within "+c+" ms");e.name="TimeoutError",t(e)},c)}))];return Promise.race(l)},Gd);function Gd(e,t){void 0===e&&(e={}),this.httpOptions=e,this.emitter=t}function Wd(){}function $d(){$d.init.call(this)}function Jd(e){return void 0===e._maxListeners?$d.defaultMaxListeners:e._maxListeners}function Yd(e,t,n,r){var o,i,s,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),s=i[t]):(i=e._events=new Wd,e._eventsCount=0),s){if("function"==typeof s?s=i[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),!s.warned&&(o=Jd(e))&&0<o&&s.length>o){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,"function"==typeof console.warn?console.warn(a):console.log(a)}}else s=i[t]=n,++e._eventsCount;return e}function Zd(e,t,n){var r=!1;function o(){e.removeListener(t,o),r||(r=!0,n.apply(e,arguments))}return o.listener=n,o}function Qd(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function Xd(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}Wd.prototype=Object.create(null),($d.EventEmitter=$d).usingDomains=!1,$d.prototype.domain=void 0,$d.prototype._events=void 0,$d.prototype._maxListeners=void 0,$d.defaultMaxListeners=10,$d.init=function(){this.domain=null,$d.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Wd,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},$d.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},$d.prototype.getMaxListeners=function(){return Jd(this)},$d.prototype.emit=function(e,t,n,r){var o,i,s,a,u,c,l,p="error"===e;if(c=this._events)p=p&&null==c.error;else if(!p)return!1;if(l=this.domain,p){if(o=t,l)return(o=o||new Error('Uncaught, unspecified "error" event')).domainEmitter=this,o.domain=l,o.domainThrown=!1,l.emit("error",o),!1;if(o instanceof Error)throw o;var d=new Error('Uncaught, unspecified "error" event. ('+o+")");throw d.context=o,d}if(!(i=c[e]))return!1;var h="function"==typeof i;switch(s=arguments.length){case 1:!function(e,t){if(h)e.call(t);else for(var n=e.length,r=Xd(e,n),o=0;o<n;++o)r[o].call(t)}(i,this);break;case 2:!function(e,t,n){if(h)e.call(t,n);else for(var r=e.length,o=Xd(e,r),i=0;i<r;++i)o[i].call(t,n)}(i,this,t);break;case 3:!function(e,t,n,r){if(h)e.call(t,n,r);else for(var o=e.length,i=Xd(e,o),s=0;s<o;++s)i[s].call(t,n,r)}(i,this,t,n);break;case 4:!function(e,t,n,r,o){if(h)e.call(t,n,r,o);else for(var i=e.length,s=Xd(e,i),a=0;a<i;++a)s[a].call(t,n,r,o)}(i,this,t,n,r);break;default:for(a=new Array(s-1),u=1;u<s;u++)a[u-1]=arguments[u];!function(e,t,n){if(h)e.apply(t,n);else for(var r=e.length,o=Xd(e,r),i=0;i<r;++i)o[i].apply(t,n)}(i,this,a)}return!0},$d.prototype.addListener=function(e,t){return Yd(this,e,t,!1)},$d.prototype.on=$d.prototype.addListener,$d.prototype.prependListener=function(e,t){return Yd(this,e,t,!0)},$d.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,Zd(this,e,t)),this},$d.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,Zd(this,e,t)),this},$d.prototype.removeListener=function(e,t){var n,r,o,i,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new Wd:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length;0<i--;)if(n[i]===t||n[i].listener&&n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new Wd,this;delete r[e]}else!function(e){for(var t=o,n=t+1,r=e.length;n<r;t+=1,n+=1)e[t]=e[n];e.pop()}(n);r.removeListener&&this.emit("removeListener",e,s||t)}return this},$d.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new Wd,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new Wd:delete n[e]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new Wd,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(;this.removeListener(e,t[t.length-1]),t[0];);return this},$d.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},$d.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Qd.call(e,t)},$d.prototype.listenerCount=Qd,$d.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};function eh(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function th(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var nh={bufferBody:!0},rh=function(){return(rh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},oh=new x.ConsoleLogger("AWSS3ProviderManagedUpload"),ih="SET_CONTENT_LENGTH",sh=(ah.prototype.upload=function(){return eh(this,void 0,void 0,function(){var t,n,r,o,i,s;return th(this,function(e){switch(e.label){case 0:return[4,(t=this).validateAndSanitizeBody(this.params.Body)];case 1:return t.body=e.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize?(this.params.Body=this.body,n=new Ld(this.params),[2,this._createNewS3Client(this.opts,this.emitter).send(n)]):[3,2];case 2:return[4,this.createMultiPartUpload()];case 3:r=e.sent(),o=Math.ceil(this.totalBytesToUpload/this.minPartSize),i=0,e.label=4;case 4:return i<o?[4,this.checkIfUploadCancelled(r)]:[3,9];case 5:return e.sent(),s=this.createParts(i),[4,this.uploadParts(r,s)];case 6:return e.sent(),[4,this.checkIfUploadCancelled(r)];case 7:e.sent(),e.label=8;case 8:return i+=this.queueSize,[3,4];case 9:return[4,this.finishMultiPartUpload(r)];case 10:return[2,e.sent()]}})})},ah.prototype.createParts=function(e){for(var t=[],n=e,r=e*this.minPartSize;r<this.totalBytesToUpload&&t.length<this.queueSize;){var o=Math.min(r+this.minPartSize,this.totalBytesToUpload);t.push({bodyPart:this.body.slice(r,o),partNumber:++n,emitter:new $d,_lastUploadedBytes:0}),r+=this.minPartSize}return t},ah.prototype.createMultiPartUpload=function(){return eh(this,void 0,void 0,function(){var t,n,r;return th(this,function(e){switch(e.label){case 0:return t=new Cd({Bucket:this.params.Bucket,Key:this.params.Key}),(n=this._createNewS3Client(this.opts)).middlewareStack.remove(ih),[4,n.send(t)];case 1:return r=e.sent(),oh.debug(r.UploadId),[2,r.UploadId]}})})},ah.prototype.uploadParts=function(h,f){return eh(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d;return th(this,function(e){switch(e.label){case 0:t=[];try{for(n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(f),r=n.next();!r.done;r=n.next())o=r.value,this.setupEventListener(o),i={PartNumber:o.partNumber,Body:o.bodyPart,UploadId:h,Key:this.params.Key,Bucket:this.params.Bucket},s=new Vd(i),(a=this._createNewS3Client(this.opts,o.emitter)).middlewareStack.remove(ih),t.push(a.send(s))}catch(e){p={error:e}}finally{try{r&&!r.done&&(d=n.return)&&d.call(n)}finally{if(p)throw p.error}}e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Promise.all(t)];case 2:for(u=e.sent(),c=0;c<u.length;c++)this.multiPartMap.push({PartNumber:f[c].partNumber,ETag:u[c].ETag});return[3,4];case 3:return l=e.sent(),oh.error("error happened while uploading a part. Cancelling the multipart upload",l),this.cancelUpload(),[2];case 4:return[2]}})})},ah.prototype.finishMultiPartUpload=function(i){return eh(this,void 0,void 0,function(){var t,n,r,o;return th(this,function(e){switch(e.label){case 0:t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:i,MultipartUpload:{Parts:this.multiPartMap}},n=new wd(t),(r=this._createNewS3Client(this.opts)).middlewareStack.remove(ih),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,r.send(n)];case 2:return[2,e.sent().Key];case 3:return o=e.sent(),oh.error("error happened while finishing the upload. Cancelling the multipart upload",o),this.cancelUpload(),[2];case 4:return[2]}})})},ah.prototype.checkIfUploadCancelled=function(r){return eh(this,void 0,void 0,function(){var t,n;return th(this,function(e){switch(e.label){case 0:if(!this.cancel)return[3,5];t="Upload was cancelled.",e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.cleanup(r)];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),t+=n.errorMessage,[3,4];case 4:throw new Error(t);case 5:return[2]}})})},ah.prototype.cancelUpload=function(){this.cancel=!0},ah.prototype.cleanup=function(o){return eh(this,void 0,void 0,function(){var t,n,r;return th(this,function(e){switch(e.label){case 0:return this.body=null,this.multiPartMap=[],this.bytesUploaded=0,this.totalBytesToUpload=0,t={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:o},(n=this._createNewS3Client(this.opts)).middlewareStack.remove(ih),[4,n.send(new yd(t))];case 1:return e.sent(),[4,n.send(new Rd(t))];case 2:if((r=e.sent())&&r.Parts&&0<r.Parts.length)throw new Error("Multi Part upload clean up failed");return[2]}})})},ah.prototype.setupEventListener=function(t){var n=this;t.emitter.on(Hd,function(e){n.progressChanged(t.partNumber,e.loaded-t._lastUploadedBytes),t._lastUploadedBytes=e.loaded})},ah.prototype.progressChanged=function(e,t){this.bytesUploaded+=t,this.emitter.emit(Hd,{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:e,key:this.params.Key})},ah.prototype.byteLength=function(e){if(null==e)return 0;if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"!=typeof e.path)throw new Error("Cannot determine length of "+e)},ah.prototype.validateAndSanitizeBody=function(t){return eh(this,void 0,void 0,function(){return th(this,function(e){switch(e.label){case 0:return this.isGenericObject(t)?[2,JSON.stringify(t)]:[3,1];case 1:return this.isBlob(t)?nh.bufferBody?[4,$.streamCollector(t)]:[3,3]:[3,4];case 2:return[2,e.sent()];case 3:case 4:return[2,t]}})})},ah.prototype.isBlob=function(e){return"undefined"!=typeof Blob&&e instanceof Blob},ah.prototype.isGenericObject=function(e){if(null!==e&&"object"==typeof e)try{return!(0<=this.byteLength(e))}catch(e){return!0}return!1},ah.prototype._createNewS3Client=function(e,t){var n=e.region,r=e.credentials,o={};return e.dangerouslyConnectToHttpEndpointForTesting&&(o={endpoint:"http://localhost:20005",s3BucketEndpoint:!0,s3ForcePathStyle:!0}),new od(rh(rh({region:n,credentials:r},o),{requestHandler:new Kd(nh,t),customUserAgent:x.getAmplifyUserAgent(),urlParser:s.parseUrl}))},ah);function ah(e,t,n){this.minPartSize=5242880,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.multiPartMap=[],this.cancel=!1,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=e,this.opts=t,this.emitter=n}function uh(e,t,n,r,o){e&&x.Hub.dispatch("storage",{event:t,data:{attrs:n,metrics:r},message:o},"Storage",fh)}function ch(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function lh(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var ph={},dh=function(){return(dh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},hh=new x.ConsoleLogger("AWSS3Provider"),fh="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",mh=(gh.prototype.getCategory=function(){return gh.CATEGORY},gh.prototype.getProviderName=function(){return gh.PROVIDER_NAME},gh.prototype.configure=function(e){if(hh.debug("configure Storage",e),!e)return this._config;var t=x.Parser.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,t.Storage),this._config.bucket||hh.debug("Do not have bucket yet"),this._config},gh.prototype.get=function(C,E){return ch(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m,g,y,v,b,w,_,S;return lh(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];if(t=Object.assign({},this._config,E),n=t.bucket,r=t.download,o=t.cacheControl,i=t.contentDisposition,s=t.contentEncoding,a=t.contentLanguage,u=t.contentType,c=t.expires,l=t.track,p=this._prefix(t),d=p+C,h=this._createNewS3Client(t),hh.debug("get "+C+" from "+d),f={Bucket:n,Key:d},o&&(f.ResponseCacheControl=o),i&&(f.ResponseContentDisposition=i),s&&(f.ResponseContentEncoding=s),a&&(f.ResponseContentLanguage=a),u&&(f.ResponseContentType=u),!0!==r)return[3,5];m=new Od(f),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,h.send(m)];case 3:return g=e.sent(),uh(l,"download",{method:"get",result:"success"},{fileSize:Number(g.Body.length)},"Download success for "+C),[2,g];case 4:throw y=e.sent(),uh(l,"download",{method:"get",result:"failed"},null,"Download failed with "+y.message),y;case 5:f.Expires=c||900,f.Expires=new Date(Date.now()+1e3*f.Expires),e.label=6;case 6:return e.trys.push([6,9,,10]),v=new K.S3RequestPresigner(dh({},h.config)),[4,H.createRequest(h,new Od(f))];case 7:return b=e.sent(),_=z.formatUrl,[4,v.presign(b,f.Expires)];case 8:return w=_.apply(void 0,[e.sent()]),uh(l,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+w),[2,w];case 9:throw S=e.sent(),hh.warn("get signed url error",S),uh(l,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+C),S;case 10:return[2]}})})},gh.prototype.put=function(E,I,A){return ch(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m,g,y,v,b,w,_,S,C;return lh(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];t=Object.assign({},this._config,A),n=t.bucket,r=t.track,o=t.progressCallback,i=t.contentType,s=t.contentDisposition,a=t.cacheControl,u=t.expires,c=t.metadata,l=t.tagging,p=t.serverSideEncryption,d=t.SSECustomerAlgorithm,h=t.SSECustomerKey,f=t.SSECustomerKeyMD5,m=t.SSEKMSKeyId,g=i||"binary/octet-stream",y=this._prefix(t),v=y+E,hh.debug("put "+E+" to "+v),b={Bucket:n,Key:v,Body:I,ContentType:g},a&&(b.CacheControl=a),s&&(b.ContentDisposition=s),u&&(b.Expires=u),c&&(b.Metadata=c),l&&(b.Tagging=l),p&&(b.ServerSideEncryption=p,d&&(b.SSECustomerAlgorithm=d),h&&(b.SSECustomerKey=h),f&&(b.SSECustomerKeyMD5=f),m&&(b.SSEKMSKeyId=m)),w=new $d,_=new sh(b,t,w),e.label=2;case 2:return e.trys.push([2,4,,5]),w.on("sendProgress",function(e){o&&("function"==typeof o?o(e):hh.warn("progressCallback should be a function, not a "+typeof o))}),[4,_.upload()];case 3:return S=e.sent(),hh.debug("upload result",S),uh(r,"upload",{method:"put",result:"success"},null,"Upload success for "+E),[2,{key:E}];case 4:throw C=e.sent(),hh.warn("error uploading",C),uh(r,"upload",{method:"put",result:"failed"},null,"Error uploading "+E),C;case 5:return[2]}})})},gh.prototype.remove=function(l,p){return ch(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c;return lh(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];t=Object.assign({},this._config,p),n=t.bucket,r=t.track,o=this._prefix(t),i=o+l,s=this._createNewS3Client(t),hh.debug("remove "+l+" from "+i),a=new Ad({Bucket:n,Key:i}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,s.send(a)];case 3:return u=e.sent(),uh(r,"delete",{method:"remove",result:"success"},null,"Deleted "+l+" successfully"),[2,u];case 4:throw c=e.sent(),uh(r,"delete",{method:"remove",result:"failed"},null,"Deletion of "+l+" failed with "+c),c;case 5:return[2]}})})},gh.prototype.list=function(d,h){return ch(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p;return lh(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];t=Object.assign({},this._config,h),n=t.bucket,r=t.track,o=t.maxKeys,i=this._prefix(t),s=i+d,a=this._createNewS3Client(t),hh.debug("list "+d+" from "+s),u=new Nd({Bucket:n,Prefix:s,MaxKeys:o}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,a.send(u)];case 3:return c=e.sent(),l=c.Contents.map(function(e){return{key:e.Key.substr(i.length),eTag:e.ETag,lastModified:e.LastModified,size:e.Size}}),uh(r,"list",{method:"list",result:"success"},null,l.length+" items returned from list operation"),hh.debug("list",l),[2,l];case 4:throw p=e.sent(),hh.warn("list error",p),uh(r,"list",{method:"list",result:"failed"},null,"Listing items failed: "+p.message),p;case 5:return[2]}})})},gh.prototype._ensureCredentials=function(){var n=this;return x.Credentials.get().then(function(e){if(!e)return!1;var t=x.Credentials.shear(e);return hh.debug("set credentials for storage",t),n._config.credentials=t,!0}).catch(function(e){return hh.warn("ensure credentials error",e),!1})},gh.prototype._prefix=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},o=e.identityId||t.identityId,i=(void 0!==r.private?r.private:"private/")+o+"/",s=(void 0!==r.protected?r.protected:"protected/")+o+"/",a=void 0!==r.public?r.public:"public/";switch(n){case"private":return i;case"protected":return s;default:return a}},gh.prototype._createNewS3Client=function(e,t){var n=e.region,r=e.credentials,o={};return e.dangerouslyConnectToHttpEndpointForTesting&&(o={endpoint:"http://localhost:20005",s3BucketEndpoint:!0,s3ForcePathStyle:!0}),new od(dh(dh({region:n,credentials:r,customUserAgent:x.getAmplifyUserAgent()},o),{requestHandler:new Kd(ph,t)}))},gh.CATEGORY="Storage",gh.PROVIDER_NAME="AWSS3",gh);function gh(e){this._config=e||{},hh.debug("Storage Options",this._config)}function yh(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function vh(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var bh=function(){return(bh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},wh=new x.ConsoleLogger("StorageClass"),_h="AWSS3",Sh=(Ch.prototype.getModuleName=function(){return"Storage"},Ch.prototype.addPluggable=function(e){if(e&&"Storage"===e.getCategory())return this._pluggables.push(e),e.configure(this._config[e.getProviderName()])},Ch.prototype.getPluggable=function(t){var e=this._pluggables.find(function(e){return e.getProviderName()===t});return void 0===e?(wh.debug("No plugin found with providerName",t),null):e},Ch.prototype.removePluggable=function(t){this._pluggables=this._pluggables.filter(function(e){return e.getProviderName()!==t})},Ch.prototype.configure=function(e){var t=this;if(wh.debug("configure Storage"),!e)return this._config;function o(t){return r.some(function(e){return e===t})}var i=x.Parser.parseMobilehubConfig(e),n=Object.keys(i.Storage),r=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"];return n&&n.find(function(e){return o(e)})&&!i.Storage[_h]&&(i.Storage[_h]={}),Object.entries(i.Storage).map(function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e,2),n=t[0],r=t[1];n&&o(n)&&void 0!==r&&(i.Storage[_h][n]=r,delete i.Storage[n])}),Object.keys(i.Storage).forEach(function(e){"string"!=typeof i.Storage[e]&&(t._config[e]=bh(bh({},t._config[e]),i.Storage[e]))}),this._pluggables.forEach(function(e){e.configure(t._config[e.getProviderName()])}),0===this._pluggables.length&&this.addPluggable(new mh),this._config},Ch.prototype.get=function(o,i){return yh(this,void 0,void 0,function(){var t,n,r;return vh(this,function(e){return n=void 0===(t=(i||{}).provider)?_h:t,void 0===(r=this._pluggables.find(function(e){return e.getProviderName()===n}))&&(wh.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")),[2,r.get(o,i)]})})},Ch.prototype.put=function(o,i,s){return yh(this,void 0,void 0,function(){var t,n,r;return vh(this,function(e){return n=void 0===(t=(s||{}).provider)?_h:t,void 0===(r=this._pluggables.find(function(e){return e.getProviderName()===n}))&&(wh.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")),[2,r.put(o,i,s)]})})},Ch.prototype.remove=function(o,i){return yh(this,void 0,void 0,function(){var t,n,r;return vh(this,function(e){return n=void 0===(t=(i||{}).provider)?_h:t,void 0===(r=this._pluggables.find(function(e){return e.getProviderName()===n}))&&(wh.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")),[2,r.remove(o,i)]})})},Ch.prototype.list=function(o,i){return yh(this,void 0,void 0,function(){var t,n,r;return vh(this,function(e){return n=void 0===(t=(i||{}).provider)?_h:t,void 0===(r=this._pluggables.find(function(e){return e.getProviderName()===n}))&&(wh.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")),[2,r.list(o,i)]})})},Ch);function Ch(){this._config={},this._pluggables=[],wh.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this),x.Amplify.register(this)}function Eh(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}var Ih=function(){return(Ih=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ah=new x.ConsoleLogger("Storage"),Ph=null,kh=function(){if(Ph)return Ph;Ah.debug("Create Storage Instance, debug"),(Ph=new Sh).vault=new Sh;var n=Ph.configure;return Ph.configure=function(e){Ah.debug("storage configure called");var t=Ih({},n.call(Ph,e));Object.keys(t).forEach(function(e){"string"!=typeof t[e]&&(t[e]=Ih(Ih({},t[e]),{level:"private"}))}),Ah.debug("storage vault configure called"),Ph.vault.configure(t)},Ph}(),Oh=function(){return(Oh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Th=new x.ConsoleLogger("RestClient"),xh=(Nh.prototype.ajax=function(b,w,_){return e=this,u=function(){var n,r,o,i,s,a,u,c,l,p,d,h,f,m,g,e,y,v=this;return d=this,h=function(e){switch(e.label){case 0:return Th.debug(w+" "+b),n=this._parseUrl(b),r={method:w,url:b,host:n.host,path:n.path,headers:{},data:null,responseType:"json",timeout:0},o={},x.Platform.isReactNative&&(i=x.Platform.userAgent||"aws-amplify/0.1.x",o={"User-Agent":i}),s=Object.assign({},_),a=s.response,s.body&&(o["Content-Type"]="application/json; charset=UTF-8",r.data=JSON.stringify(s.body)),s.responseType&&(r.responseType=s.responseType),s.withCredentials&&(r.withCredentials=s.withCredentials),s.timeout&&(r.timeout=s.timeout),r.signerServiceInfo=s.signerServiceInfo,this._custom_header?[4,this._custom_header()]:[3,2];case 1:return c=e.sent(),[3,3];case 2:c=void 0,e.label=3;case 3:return u=c,r.headers=Oh(Oh(Oh({},o),u),s.headers),(l=fp(b,!0,!0)).search,p=Eh(l,["search"]),r.url=(Wl(t=Oh(Oh({},p),{query:Oh(Oh({},p.query),s.queryStringParameters||{})}))&&(t=mp({},t)),gp(t)),void 0!==r.headers.Authorization?(r.headers=Object.keys(r.headers).reduce(function(e,t){return r.headers[t]&&(e[t]=r.headers[t]),e},{}),[2,this._request(r,a)]):[2,x.Credentials.get().then(function(e){return v._signed(Oh({},r),e,a)},function(e){return Th.debug("No credentials available, the request will be unsigned"),v._request(r,a)})]}var t},y={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(f)throw new TypeError("Generator is already executing.");for(;y;)try{if(f=1,m&&(g=2&t[0]?m.return:t[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,t[1])).done)return g;switch(m=0,g&&(t=[2&t[0],g.value]),t[0]){case 0:case 1:g=t;break;case 4:return y.label++,{value:t[1],done:!1};case 5:y.label++,m=t[1],t=[0];continue;case 7:t=y.ops.pop(),y.trys.pop();continue;default:if(!(g=0<(g=y.trys).length&&g[g.length-1])&&(6===t[0]||2===t[0])){y=0;continue}if(3===t[0]&&(!g||t[1]>g[0]&&t[1]<g[3])){y.label=t[1];break}if(6===t[0]&&y.label<g[1]){y.label=g[1],g=t;break}if(g&&y.label<g[2]){y.label=g[2],y.ops.push(t);break}g[2]&&y.ops.pop(),y.trys.pop();continue}t=h.call(d,y)}catch(e){t=[6,e],m=0}finally{f=g=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},Nh.prototype.get=function(e,t){return this.ajax(e,"GET",t)},Nh.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},Nh.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},Nh.prototype.post=function(e,t){return this.ajax(e,"POST",t)},Nh.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},Nh.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},Nh.prototype.endpoint=function(t){var n=this,e=this._options.endpoints,r="";return Array.isArray(e)&&e.forEach(function(e){e.name===t&&(r=e.endpoint,"string"==typeof e.region?n._region=e.region:"string"==typeof n._options.region&&(n._region=n._options.region),"string"==typeof e.service?n._service=e.service||"execute-api":n._service="execute-api","function"==typeof e.custom_header?n._custom_header=e.custom_header:n._custom_header=void 0)}),r},Nh.prototype._signed=function(e,t,n){var r=e.signerServiceInfo,o=Eh(e,["signerServiceInfo"]),i=this._region||this._options.region,s=this._service||this._options.service,a={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},u={region:i,service:s},c=Object.assign(u,r),l=x.Signer.sign(o,a,c);return l.data&&(l.body=l.data),Th.debug("Signed Request: ",l),delete l.headers.host,W(l).then(function(e){return n?e:e.data}).catch(function(e){throw Th.debug(e),e})},Nh.prototype._request=function(e,t){return void 0===t&&(t=!1),W(e).then(function(e){return t?e:e.data}).catch(function(e){throw Th.debug(e),e})},Nh.prototype._parseUrl=function(e){var t=e.split("/");return{host:t[2],path:"/"+t.slice(3).join("/")}},Nh);function Nh(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,e.endpoints,this._options=e,Th.debug("API Options",this._options)}function Uh(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Mh(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Rh=function(){return(Rh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Dh=new x.ConsoleLogger("RestAPI"),Fh=(Lh.prototype.getModuleName=function(){return"RestAPI"},Lh.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(t,["API"]),i=Rh(Rh({},o),r);if(Dh.debug("configure Rest API",{opt:i}),i.aws_project_region){if(i.aws_cloud_logic_custom){var s=i.aws_cloud_logic_custom;i.endpoints="string"==typeof s?JSON.parse(s):s}i=Object.assign({},i,{region:i.aws_project_region,header:{}})}return Array.isArray(i.endpoints)||(i.endpoints=[]),i.endpoints.forEach(function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&(Dh.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)}),this._options=Object.assign({},this._options,i),this.createInstance(),this._options},Lh.prototype.createInstance=function(){return Dh.debug("create Rest API instance"),this._options?(this._api=new xh(this._options),!0):Promise.reject("API not configured")},Lh.prototype.get=function(r,o,i){return Uh(this,void 0,void 0,function(){var t,n;return Mh(this,function(e){switch(e.label){case 0:if(this._api)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.createInstance()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),[2,Promise.reject(t)];case 4:return 0===(n=this._api.endpoint(r)).length?[2,Promise.reject("API "+r+" does not exist")]:[2,this._api.get(n+o,i)]}})})},Lh.prototype.post=function(r,o,i){return Uh(this,void 0,void 0,function(){var t,n;return Mh(this,function(e){switch(e.label){case 0:if(this._api)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.createInstance()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),[2,Promise.reject(t)];case 4:return 0===(n=this._api.endpoint(r)).length?[2,Promise.reject("API "+r+" does not exist")]:[2,this._api.post(n+o,i)]}})})},Lh.prototype.put=function(r,o,i){return Uh(this,void 0,void 0,function(){var t,n;return Mh(this,function(e){switch(e.label){case 0:if(this._api)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.createInstance()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),[2,Promise.reject(t)];case 4:return 0===(n=this._api.endpoint(r)).length?[2,Promise.reject("API "+r+" does not exist")]:[2,this._api.put(n+o,i)]}})})},Lh.prototype.patch=function(r,o,i){return Uh(this,void 0,void 0,function(){var t,n;return Mh(this,function(e){switch(e.label){case 0:if(this._api)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.createInstance()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),[2,Promise.reject(t)];case 4:return 0===(n=this._api.endpoint(r)).length?[2,Promise.reject("API "+r+" does not exist")]:[2,this._api.patch(n+o,i)]}})})},Lh.prototype.del=function(r,o,i){return Uh(this,void 0,void 0,function(){var t,n;return Mh(this,function(e){switch(e.label){case 0:if(this._api)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.createInstance()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),[2,Promise.reject(t)];case 4:return 0===(n=this._api.endpoint(r)).length?[2,Promise.reject("API "+r+" does not exist")]:[2,this._api.del(n+o,i)]}})})},Lh.prototype.head=function(r,o,i){return Uh(this,void 0,void 0,function(){var t,n;return Mh(this,function(e){switch(e.label){case 0:if(this._api)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.createInstance()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),[2,Promise.reject(t)];case 4:return 0===(n=this._api.endpoint(r)).length?[2,Promise.reject("API "+r+" does not exist")]:[2,this._api.head(n+o,i)]}})})},Lh.prototype.endpoint=function(n){return Uh(this,void 0,void 0,function(){var t;return Mh(this,function(e){switch(e.label){case 0:if(this._api)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.createInstance()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),[2,Promise.reject(t)];case 4:return[2,this._api.endpoint(n)]}})})},Lh);function Lh(e){this._api=null,this._options=e,Q.register(this),Dh.debug("API Options",this._options)}function jh(e,t){for(var n,r=/\r\n|[\n\r]/g,o=1,i=t+1;(n=r.exec(e.body))&&n.index<t;)o+=1,i=t+1-(n.index+n[0].length);return{line:o,column:i}}function Bh(e,t){var n=e.locationOffset.column-1,r=Vh(n)+e.body,u=t.line-1,o=e.locationOffset.line-1,c=t.line+o,i=1===t.line?n:0,l=t.column+i,p=r.split(/\r\n|[\n\r]/g);return"".concat(e.name," (").concat(c,":").concat(l,")\n")+function(){var e=[["".concat(c-1,": "),p[u-1]],["".concat(c,": "),p[u]],["",Vh(l-1)+"^"],["".concat(c+1,": "),p[1+u]]].filter(function(e){return e[0],void 0!==e[1]}),o=0,t=!0,n=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var a=i.value[0];o=Math.max(o,a.length)}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}return e.map(function(e){var t,n=e[0],r=e[1];return Vh(o-(t=n).length)+t+r}).join("\n")}()}function Vh(e){return Array(e+1).join(" ")}function qh(e,t,n,r,o,i,s){var a=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,u=n;if(!u&&a){var c=a[0];u=c&&c.loc&&c.loc.source}var l,p=r;!p&&a&&(p=a.reduce(function(e,t){return t.loc&&e.push(t.loc.start),e},[])),p&&0===p.length&&(p=void 0),r&&n?l=r.map(function(e){return jh(n,e)}):a&&(l=a.reduce(function(e,t){return t.loc&&e.push(jh(t.loc.source,t.loc.start)),e},[]));var d=s||i&&i.extensions;Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:l||void 0,enumerable:Boolean(l)},path:{value:o||void 0,enumerable:Boolean(o)},nodes:{value:a||void 0},source:{value:u||void 0},positions:{value:p||void 0},originalError:{value:i},extensions:{value:d||void 0,enumerable:Boolean(d)}}),i&&i.stack?Object.defineProperty(this,"stack",{value:i.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,qh):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}new Fh(null),qh.prototype=Object.create(Error.prototype,{constructor:{value:qh},name:{value:"GraphQLError"},toString:{value:function(){return function(e){var t=[];if(e.nodes){var n=!0,r=!1,o=void 0;try{for(var i,s=e.nodes[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;a.loc&&t.push(Bh(a.loc.source,jh(a.loc.source,a.loc.start)))}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}}else if(e.source&&e.locations){var u=e.source,c=!0,l=!1,p=void 0;try{for(var d,h=e.locations[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var f=d.value;t.push(Bh(u,f))}}catch(e){l=!0,p=e}finally{try{c||null==h.return||h.return()}finally{if(l)throw p}}}return 0===t.length?e.message:[e.message].concat(t).join("\n\n")+"\n"}(this)}}});var zh={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Hh={};function Kh(e){return Boolean(e&&"string"==typeof e.kind)}function Gh(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var o=n?r.leave:r.enter;if("function"==typeof o)return o}else{var i=n?e.leave:e.enter;if(i){if("function"==typeof i)return i;var s=i[t];if("function"==typeof s)return s}}}function Wh(e){return function(e,t,n){var r=zh,o=void 0,i=Array.isArray(e),s=[e],a=-1,u=[],c=void 0,l=void 0,p=void 0,d=[],h=[],f=e;do{var m=++a===s.length,g=m&&0!==u.length;if(m){if(l=0===h.length?void 0:d[d.length-1],c=p,p=h.pop(),g){if(i)c=c.slice();else{var y={};for(var v in c)c.hasOwnProperty(v)&&(y[v]=c[v]);c=y}for(var b=0,w=0;w<u.length;w++){var _=u[w][0],S=u[w][1];i&&(_-=b),i&&null===S?(c.splice(_,1),b++):c[_]=S}}a=o.index,s=o.keys,u=o.edits,i=o.inArray,o=o.prev}else{if(l=p?i?a:s[a]:void 0,null==(c=p?p[l]:f))continue;p&&d.push(l)}var C=void 0;if(!Array.isArray(c)){if(!Kh(c))throw new Error("Invalid AST Node: "+JSON.stringify(c));var E=Gh(t,c.kind,m);if(E){if((C=E.call(t,c,l,p,d,h))===Hh)break;if(!1===C){if(!m){d.pop();continue}}else if(void 0!==C&&(u.push([l,C]),!m)){if(!Kh(C)){d.pop();continue}c=C}}}void 0===C&&g&&u.push([l,c]),m?d.pop():(o={inArray:i,index:a,keys:s,edits:u,prev:o},s=(i=Array.isArray(c))?c:r[c.kind]||[],a=-1,u=[],p&&h.push(p),p=c)}while(void 0!==o);return 0!==u.length&&(f=u[u.length-1][1]),f}(e,{leave:$h})}var $h={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return Yh(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=Qh("(",Yh(e.variableDefinitions,", "),")"),o=Yh(e.directives," "),i=e.selectionSet;return n||o||r||"query"!==t?Yh([t,Yh([n,r]),o,i]," "):i},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,o=e.directives;return t+": "+n+Qh(" = ",r)+Qh(" ",Yh(o," "))},SelectionSet:function(e){return Zh(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,o=e.directives,i=e.selectionSet;return Yh([Qh("",t,": ")+n+Qh("(",Yh(r,", "),")"),Yh(o," "),i]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+Qh(" ",Yh(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return Yh(["...",Qh("on ",t),Yh(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,o=e.directives,i=e.selectionSet;return"fragment ".concat(t).concat(Qh("(",Yh(r,", "),")")," ")+"on ".concat(n," ").concat(Qh("",Yh(o," ")," "))+i},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n,r,o,i=e.value;return e.block?(r="description"===t,o=(n=i).replace(/"""/g,'\\"""')," "!==n[0]&&"\t"!==n[0]||-1!==n.indexOf("\n")?'"""\n'.concat(r?o:Xh(o),'\n"""'):'"""'.concat(o.replace(/"$/,'"\n'),'"""')):JSON.stringify(i)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+Yh(e.values,", ")+"]"},ObjectValue:function(e){return"{"+Yh(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+Qh("(",Yh(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:function(e){var t=e.directives,n=e.operationTypes;return Yh(["schema",Yh(t," "),Zh(n)]," ")},OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:Jh(function(e){return Yh(["scalar",e.name,Yh(e.directives," ")]," ")}),ObjectTypeDefinition:Jh(function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return Yh(["type",t,Qh("implements ",Yh(n," & ")),Yh(r," "),Zh(o)]," ")}),FieldDefinition:Jh(function(e){var t=e.name,n=e.arguments,r=e.type,o=e.directives;return t+(n.every(function(e){return-1===e.indexOf("\n")})?Qh("(",Yh(n,", "),")"):Qh("(\n",Xh(Yh(n,"\n")),"\n)"))+": "+r+Qh(" ",Yh(o," "))}),InputValueDefinition:Jh(function(e){var t=e.name,n=e.type,r=e.defaultValue,o=e.directives;return Yh([t+": "+n,Qh("= ",r),Yh(o," ")]," ")}),InterfaceTypeDefinition:Jh(function(e){var t=e.name,n=e.directives,r=e.fields;return Yh(["interface",t,Yh(n," "),Zh(r)]," ")}),UnionTypeDefinition:Jh(function(e){var t=e.name,n=e.directives,r=e.types;return Yh(["union",t,Yh(n," "),r&&0!==r.length?"= "+Yh(r," | "):""]," ")}),EnumTypeDefinition:Jh(function(e){var t=e.name,n=e.directives,r=e.values;return Yh(["enum",t,Yh(n," "),Zh(r)]," ")}),EnumValueDefinition:Jh(function(e){return Yh([e.name,Yh(e.directives," ")]," ")}),InputObjectTypeDefinition:Jh(function(e){var t=e.name,n=e.directives,r=e.fields;return Yh(["input",t,Yh(n," "),Zh(r)]," ")}),DirectiveDefinition:Jh(function(e){var t=e.name,n=e.arguments,r=e.locations;return"directive @"+t+(n.every(function(e){return-1===e.indexOf("\n")})?Qh("(",Yh(n,", "),")"):Qh("(\n",Xh(Yh(n,"\n")),"\n)"))+" on "+Yh(r," | ")}),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return Yh(["extend schema",Yh(t," "),Zh(n)]," ")},ScalarTypeExtension:function(e){return Yh(["extend scalar",e.name,Yh(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,o=e.fields;return Yh(["extend type",t,Qh("implements ",Yh(n," & ")),Yh(r," "),Zh(o)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return Yh(["extend interface",t,Yh(n," "),Zh(r)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return Yh(["extend union",t,Yh(n," "),r&&0!==r.length?"= "+Yh(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return Yh(["extend enum",t,Yh(n," "),Zh(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return Yh(["extend input",t,Yh(n," "),Zh(r)]," ")}};function Jh(t){return function(e){return Yh([e.description,t(e)],"\n")}}function Yh(e,t){return e?e.filter(function(e){return e}).join(t||""):""}function Zh(e){return e&&0!==e.length?"{\n"+Xh(Yh(e,"\n"))+"\n}":""}function Qh(e,t,n){return t?e+t+(n||""):""}function Xh(e){return e&&"  "+e.replace(/\n/g,"\n  ")}function ef(e){return(ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tf(t){return t&&"object"===ef(t)?"function"==typeof t.inspect?t.inspect():Array.isArray(t)?"["+t.map(tf).join(", ")+"]":"{"+Object.keys(t).map(function(e){return"".concat(e,": ").concat(tf(t[e]))}).join(", ")+"}":"string"==typeof t?'"'+t+'"':"function"==typeof t?"[function ".concat(t.name,"]"):String(t)}function nf(e,t){if(!e)throw new Error(t)}function rf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function of(e,t,n){rf(this,"body",void 0),rf(this,"name",void 0),rf(this,"locationOffset",void 0),this.body=e,this.name=t||"GraphQL request",this.locationOffset=n||{line:1,column:1},0<this.locationOffset.line||nf(0,"line in locationOffset is 1-indexed and must be positive"),0<this.locationOffset.column||nf(0,"column in locationOffset is 1-indexed and must be positive")}function sf(e,t,n){return new qh("Syntax Error: ".concat(n),void 0,e,[t])}function af(e){for(var t=e.split(/\r\n|[\n\r]/g),n=null,r=1;r<t.length;r++){var o=t[r],i=uf(o);if(i<o.length&&(null===n||i<n)&&0===(n=i))break}if(n)for(var s=1;s<t.length;s++)t[s]=t[s].slice(n);for(;0<t.length&&cf(t[0]);)t.shift();for(;0<t.length&&cf(t[t.length-1]);)t.pop();return t.join("\n")}function uf(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);)t++;return t}function cf(e){return uf(e)===e.length}function lf(){return this.lastToken=this.token,this.token=this.lookahead()}function pf(){var e=this.token;if(e.kind!==df.EOF)for(;(e=e.next||(e.next=vf(this,e))).kind===df.COMMENT;);return e}"function"==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(of.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var df=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function hf(e){var t=e.value;return t?"".concat(e.kind,' "').concat(t,'"'):e.kind}var ff=String.prototype.charCodeAt,mf=String.prototype.slice;function gf(e,t,n,r,o,i,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=o,this.value=s,this.prev=i,this.next=null}function yf(e){return isNaN(e)?df.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function vf(e,t){var u=e.source,n=u.body,r=n.length,o=function(e,t,n){for(var r=e.length,o=t;o<r;){var i=ff.call(e,o);if(9===i||32===i||44===i||65279===i)++o;else if(10===i)++o,++n.line,n.lineStart=o;else{if(13!==i)break;10===ff.call(e,o+1)?o+=2:++o,++n.line,n.lineStart=o}}return o}(n,t.end,e),i=e.line,s=1+o-e.lineStart;if(r<=o)return new gf(df.EOF,r,r,i,s,t);var a,c=ff.call(n,o);switch(c){case 33:return new gf(df.BANG,o,o+1,i,s,t);case 35:return function(e,t,n,r){for(var o,i=u.body,s=e;null!==(o=ff.call(i,++s))&&(31<o||9===o););return new gf(df.COMMENT,e,s,t,n,r,mf.call(i,e+1,s))}(o,i,s,t);case 36:return new gf(df.DOLLAR,o,o+1,i,s,t);case 38:return new gf(df.AMP,o,o+1,i,s,t);case 40:return new gf(df.PAREN_L,o,o+1,i,s,t);case 41:return new gf(df.PAREN_R,o,o+1,i,s,t);case 46:if(46===ff.call(n,o+1)&&46===ff.call(n,o+2))return new gf(df.SPREAD,o,o+3,i,s,t);break;case 58:return new gf(df.COLON,o,o+1,i,s,t);case 61:return new gf(df.EQUALS,o,o+1,i,s,t);case 64:return new gf(df.AT,o,o+1,i,s,t);case 91:return new gf(df.BRACKET_L,o,o+1,i,s,t);case 93:return new gf(df.BRACKET_R,o,o+1,i,s,t);case 123:return new gf(df.BRACE_L,o,o+1,i,s,t);case 124:return new gf(df.PIPE,o,o+1,i,s,t);case 125:return new gf(df.BRACE_R,o,o+1,i,s,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r){for(var o=u.body,i=o.length,s=e+1,a=0;s!==i&&null!==(a=ff.call(o,s))&&(95===a||48<=a&&a<=57||65<=a&&a<=90||97<=a&&a<=122);)++s;return new gf(df.NAME,e,s,t,n,r,mf.call(o,e,s))}(o,i,s,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,o,i){var s=e.body,a=n,u=t,c=!1;if(45===a&&(a=ff.call(s,++u)),48===a){if(48<=(a=ff.call(s,++u))&&a<=57)throw sf(e,u,"Invalid number, unexpected digit after 0: ".concat(yf(a),"."))}else u=bf(e,u,a),a=ff.call(s,u);return 46===a&&(c=!0,a=ff.call(s,++u),u=bf(e,u,a),a=ff.call(s,u)),69!==a&&101!==a||(c=!0,43!==(a=ff.call(s,++u))&&45!==a||(a=ff.call(s,++u)),u=bf(e,u,a)),new gf(c?df.FLOAT:df.INT,t,u,r,o,i,mf.call(s,t,u))}(u,o,c,i,s,t);case 34:return(34===ff.call(n,o+1)&&34===ff.call(n,o+2)?function(e,t,n,r,o){for(var i=e.body,s=t+3,a=s,u=0,c="";s<i.length&&null!==(u=ff.call(i,s));){if(34===u&&34===ff.call(i,s+1)&&34===ff.call(i,s+2))return c+=mf.call(i,a,s),new gf(df.BLOCK_STRING,t,s+3,n,r,o,af(c));if(u<32&&9!==u&&10!==u&&13!==u)throw sf(e,s,"Invalid character within String: ".concat(yf(u),"."));92===u&&34===ff.call(i,s+1)&&34===ff.call(i,s+2)&&34===ff.call(i,s+3)?(c+=mf.call(i,a,s)+'"""',a=s+=4):++s}throw sf(e,s,"Unterminated string.")}:function(e,t,n,r,o){for(var i,s,a,u,c=e.body,l=t+1,p=l,d=0,h="";l<c.length&&null!==(d=ff.call(c,l))&&10!==d&&13!==d;){if(34===d)return h+=mf.call(c,p,l),new gf(df.STRING,t,l+1,n,r,o,h);if(d<32&&9!==d)throw sf(e,l,"Invalid character within String: ".concat(yf(d),"."));if(++l,92===d){switch(h+=mf.call(c,p,l-1),d=ff.call(c,l)){case 34:h+='"';break;case 47:h+="/";break;case 92:h+="\\";break;case 98:h+="\b";break;case 102:h+="\f";break;case 110:h+="\n";break;case 114:h+="\r";break;case 116:h+="\t";break;case 117:var f=(i=ff.call(c,l+1),s=ff.call(c,l+2),a=ff.call(c,l+3),u=ff.call(c,l+4),wf(i)<<12|wf(s)<<8|wf(a)<<4|wf(u));if(f<0)throw sf(e,l,"Invalid character escape sequence: "+"\\u".concat(c.slice(l+1,l+5),"."));h+=String.fromCharCode(f),l+=4;break;default:throw sf(e,l,"Invalid character escape sequence: \\".concat(String.fromCharCode(d),"."))}p=++l}}throw sf(e,l,"Unterminated string.")})(u,o,i,s,t)}throw sf(u,o,(a=c)<32&&9!==a&&10!==a&&13!==a?"Cannot contain the invalid character ".concat(yf(a),"."):39!==a?"Cannot parse the unexpected character ".concat(yf(a),"."):"Unexpected single quote character ('), did you mean to use a double quote (\")?")}function bf(e,t,n){var r=e.body,o=t,i=n;if(48<=i&&i<=57){for(;48<=(i=ff.call(r,++o))&&i<=57;);return o}throw sf(e,o,"Invalid number, expected digit but got: ".concat(yf(i),"."))}function wf(e){return 48<=e&&e<=57?e-48:65<=e&&e<=70?e-55:97<=e&&e<=102?e-87:-1}gf.prototype.toJSON=gf.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var _f=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),Sf=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function Cf(e,t){var n,r,o,i="string"==typeof e?new of(e):e;if(!(i instanceof of))throw new TypeError("Must provide Source. Received: ".concat(tf(i)));return o=(r={source:i,options:t||{},lastToken:n=new gf(df.SOF,0,0,0,0,null),token:n,line:1,lineStart:0,advance:lf,lookahead:pf}).token,{kind:_f.DOCUMENT,definitions:dm(r,df.SOF,If,df.EOF),loc:im(r,o)}}function Ef(e){var t=cm(e,df.NAME);return{kind:_f.NAME,value:t.value,loc:im(e,t)}}function If(e){if(am(e,df.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":case"fragment":return Af(e);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return Kf(e);case"extend":return function(e){var t=e.lookahead();if(t.kind===df.NAME)switch(t.value){case"schema":return function(e){var t=e.token;lm(e,"extend"),lm(e,"schema");var n=qf(e,!0),r=am(e,df.BRACE_L)?dm(e,df.BRACE_L,$f,df.BRACE_R):[];if(0!==n.length||0!==r.length)return{kind:_f.SCHEMA_EXTENSION,directives:n,operationTypes:r,loc:im(e,t)};throw pm(e)}(e);case"scalar":return function(e){var t=e.token;lm(e,"extend"),lm(e,"scalar");var n=Ef(e),r=qf(e,!0);if(0!==r.length)return{kind:_f.SCALAR_TYPE_EXTENSION,name:n,directives:r,loc:im(e,t)};throw pm(e)}(e);case"type":return function(e){var t=e.token;lm(e,"extend"),lm(e,"type");var n=Ef(e),r=Jf(e),o=qf(e,!0),i=Yf(e);if(0!==r.length||0!==o.length||0!==i.length)return{kind:_f.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:o,fields:i,loc:im(e,t)};throw pm(e)}(e);case"interface":return function(e){var t=e.token;lm(e,"extend"),lm(e,"interface");var n=Ef(e),r=qf(e,!0),o=Yf(e);if(0!==r.length||0!==o.length)return{kind:_f.INTERFACE_TYPE_EXTENSION,name:n,directives:r,fields:o,loc:im(e,t)};throw pm(e)}(e);case"union":return function(e){var t=e.token;lm(e,"extend"),lm(e,"union");var n=Ef(e),r=qf(e,!0),o=em(e);if(0!==r.length||0!==o.length)return{kind:_f.UNION_TYPE_EXTENSION,name:n,directives:r,types:o,loc:im(e,t)};throw pm(e)}(e);case"enum":return function(e){var t=e.token;lm(e,"extend"),lm(e,"enum");var n=Ef(e),r=qf(e,!0),o=tm(e);if(0!==r.length||0!==o.length)return{kind:_f.ENUM_TYPE_EXTENSION,name:n,directives:r,values:o,loc:im(e,t)};throw pm(e)}(e);case"input":return function(e){var t=e.token;lm(e,"extend"),lm(e,"input");var n=Ef(e),r=qf(e,!0),o=rm(e);if(0!==r.length||0!==o.length)return{kind:_f.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:o,loc:im(e,t)};throw pm(e)}(e)}throw pm(e,t)}(e)}else{if(am(e,df.BRACE_L))return Af(e);if(Gf(e))return Kf(e)}throw pm(e)}function Af(e){if(am(e,df.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":return Pf(e);case"fragment":return n=(t=e).token,lm(t,"fragment"),t.options.experimentalFragmentVariables?{kind:_f.FRAGMENT_DEFINITION,name:Ff(t),variableDefinitions:Of(t),typeCondition:(lm(t,"on"),Hf(t)),directives:qf(t,!1),selectionSet:Nf(t),loc:im(t,n)}:{kind:_f.FRAGMENT_DEFINITION,name:Ff(t),typeCondition:(lm(t,"on"),Hf(t)),directives:qf(t,!1),selectionSet:Nf(t),loc:im(t,n)}}else if(am(e,df.BRACE_L))return Pf(e);var t,n;throw pm(e)}function Pf(e){var t=e.token;if(am(e,df.BRACE_L))return{kind:_f.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:Nf(e),loc:im(e,t)};var n,r=kf(e);return am(e,df.NAME)&&(n=Ef(e)),{kind:_f.OPERATION_DEFINITION,operation:r,name:n,variableDefinitions:Of(e),directives:qf(e,!1),selectionSet:Nf(e),loc:im(e,t)}}function kf(e){var t=cm(e,df.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw pm(e,t)}function Of(e){return am(e,df.PAREN_L)?dm(e,df.PAREN_L,Tf,df.PAREN_R):[]}function Tf(e){var t=e.token;return e.options.experimentalVariableDefinitionDirectives?{kind:_f.VARIABLE_DEFINITION,variable:xf(e),type:(cm(e,df.COLON),zf(e)),defaultValue:um(e,df.EQUALS)?Lf(e,!0):void 0,directives:qf(e,!0),loc:im(e,t)}:{kind:_f.VARIABLE_DEFINITION,variable:xf(e),type:(cm(e,df.COLON),zf(e)),defaultValue:um(e,df.EQUALS)?Lf(e,!0):void 0,loc:im(e,t)}}function xf(e){var t=e.token;return cm(e,df.DOLLAR),{kind:_f.VARIABLE,name:Ef(e),loc:im(e,t)}}function Nf(e){var t=e.token;return{kind:_f.SELECTION_SET,selections:dm(e,df.BRACE_L,Uf,df.BRACE_R),loc:im(e,t)}}function Uf(e){return(am(e,df.SPREAD)?function(e){var t,n=e.token;return cm(e,df.SPREAD),am(e,df.NAME)&&"on"!==e.token.value?{kind:_f.FRAGMENT_SPREAD,name:Ff(e),directives:qf(e,!1),loc:im(e,n)}:("on"===e.token.value&&(e.advance(),t=Hf(e)),{kind:_f.INLINE_FRAGMENT,typeCondition:t,directives:qf(e,!1),selectionSet:Nf(e),loc:im(e,n)})}:function(e){var t,n,r=e.token,o=Ef(e);return n=um(e,df.COLON)?(t=o,Ef(e)):o,{kind:_f.FIELD,alias:t,name:n,arguments:Mf(e,!1),directives:qf(e,!1),selectionSet:am(e,df.BRACE_L)?Nf(e):void 0,loc:im(e,r)}})(e)}function Mf(e,t){var n=t?Df:Rf;return am(e,df.PAREN_L)?dm(e,df.PAREN_L,n,df.PAREN_R):[]}function Rf(e){var t=e.token;return{kind:_f.ARGUMENT,name:Ef(e),value:(cm(e,df.COLON),Lf(e,!1)),loc:im(e,t)}}function Df(e){var t=e.token;return{kind:_f.ARGUMENT,name:Ef(e),value:(cm(e,df.COLON),Bf(e)),loc:im(e,t)}}function Ff(e){if("on"===e.token.value)throw pm(e);return Ef(e)}function Lf(e,t){var n,r,o,i=e.token;switch(i.kind){case df.BRACKET_L:return r=(n=e).token,o=t?Bf:Vf,{kind:_f.LIST,values:function(e,t,n,r){cm(e,t);for(var o=[];!um(e,r);)o.push(n(e));return o}(n,df.BRACKET_L,o,df.BRACKET_R),loc:im(n,r)};case df.BRACE_L:return function(e,t){var n=e.token;cm(e,df.BRACE_L);for(var r,o,i,s=[];!um(e,df.BRACE_R);)s.push((o=t,i=(r=e).token,{kind:_f.OBJECT_FIELD,name:Ef(r),value:(cm(r,df.COLON),Lf(r,o)),loc:im(r,i)}));return{kind:_f.OBJECT,fields:s,loc:im(e,n)}}(e,t);case df.INT:return e.advance(),{kind:_f.INT,value:i.value,loc:im(e,i)};case df.FLOAT:return e.advance(),{kind:_f.FLOAT,value:i.value,loc:im(e,i)};case df.STRING:case df.BLOCK_STRING:return jf(e);case df.NAME:return"true"===i.value||"false"===i.value?(e.advance(),{kind:_f.BOOLEAN,value:"true"===i.value,loc:im(e,i)}):"null"===i.value?(e.advance(),{kind:_f.NULL,loc:im(e,i)}):(e.advance(),{kind:_f.ENUM,value:i.value,loc:im(e,i)});case df.DOLLAR:if(!t)return xf(e)}throw pm(e)}function jf(e){var t=e.token;return e.advance(),{kind:_f.STRING,value:t.value,block:t.kind===df.BLOCK_STRING,loc:im(e,t)}}function Bf(e){return Lf(e,!0)}function Vf(e){return Lf(e,!1)}function qf(e,t){for(var n=[];am(e,df.AT);)n.push((o=t,i=(r=e).token,cm(r,df.AT),{kind:_f.DIRECTIVE,name:Ef(r),arguments:Mf(r,o),loc:im(r,i)}));var r,o,i;return n}function zf(e){var t,n=e.token;return t=um(e,df.BRACKET_L)?(t=zf(e),cm(e,df.BRACKET_R),{kind:_f.LIST_TYPE,type:t,loc:im(e,n)}):Hf(e),um(e,df.BANG)?{kind:_f.NON_NULL_TYPE,type:t,loc:im(e,n)}:t}function Hf(e){var t=e.token;return{kind:_f.NAMED_TYPE,name:Ef(e),loc:im(e,t)}}function Kf(e){var t=Gf(e)?e.lookahead():e.token;if(t.kind===df.NAME)switch(t.value){case"schema":return function(e){var t=e.token;lm(e,"schema");var n=qf(e,!0),r=dm(e,df.BRACE_L,$f,df.BRACE_R);return{kind:_f.SCHEMA_DEFINITION,directives:n,operationTypes:r,loc:im(e,t)}}(e);case"scalar":return function(e){var t=e.token,n=Wf(e);lm(e,"scalar");var r=Ef(e),o=qf(e,!0);return{kind:_f.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:o,loc:im(e,t)}}(e);case"type":return function(e){var t=e.token,n=Wf(e);lm(e,"type");var r=Ef(e),o=Jf(e),i=qf(e,!0),s=Yf(e);return{kind:_f.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:o,directives:i,fields:s,loc:im(e,t)}}(e);case"interface":return function(e){var t=e.token,n=Wf(e);lm(e,"interface");var r=Ef(e),o=qf(e,!0),i=Yf(e);return{kind:_f.INTERFACE_TYPE_DEFINITION,description:n,name:r,directives:o,fields:i,loc:im(e,t)}}(e);case"union":return function(e){var t=e.token,n=Wf(e);lm(e,"union");var r=Ef(e),o=qf(e,!0),i=em(e);return{kind:_f.UNION_TYPE_DEFINITION,description:n,name:r,directives:o,types:i,loc:im(e,t)}}(e);case"enum":return function(e){var t=e.token,n=Wf(e);lm(e,"enum");var r=Ef(e),o=qf(e,!0),i=tm(e);return{kind:_f.ENUM_TYPE_DEFINITION,description:n,name:r,directives:o,values:i,loc:im(e,t)}}(e);case"input":return function(e){var t=e.token,n=Wf(e);lm(e,"input");var r=Ef(e),o=qf(e,!0),i=rm(e);return{kind:_f.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:o,fields:i,loc:im(e,t)}}(e);case"directive":return function(e){var t=e.token,n=Wf(e);lm(e,"directive"),cm(e,df.AT);var r=Ef(e),o=Qf(e);lm(e,"on");var i=function(e){um(e,df.PIPE);for(var t=[];t.push(om(e)),um(e,df.PIPE););return t}(e);return{kind:_f.DIRECTIVE_DEFINITION,description:n,name:r,arguments:o,locations:i,loc:im(e,t)}}(e)}throw pm(e,t)}function Gf(e){return am(e,df.STRING)||am(e,df.BLOCK_STRING)}function Wf(e){if(Gf(e))return jf(e)}function $f(e){var t=e.token,n=kf(e);cm(e,df.COLON);var r=Hf(e);return{kind:_f.OPERATION_TYPE_DEFINITION,operation:n,type:r,loc:im(e,t)}}function Jf(e){var t=[];if("implements"===e.token.value)for(e.advance(),um(e,df.AMP);t.push(Hf(e)),um(e,df.AMP)||e.options.allowLegacySDLImplementsInterfaces&&am(e,df.NAME););return t}function Yf(e){return e.options.allowLegacySDLEmptyFields&&am(e,df.BRACE_L)&&e.lookahead().kind===df.BRACE_R?(e.advance(),e.advance(),[]):am(e,df.BRACE_L)?dm(e,df.BRACE_L,Zf,df.BRACE_R):[]}function Zf(e){var t=e.token,n=Wf(e),r=Ef(e),o=Qf(e);cm(e,df.COLON);var i=zf(e),s=qf(e,!0);return{kind:_f.FIELD_DEFINITION,description:n,name:r,arguments:o,type:i,directives:s,loc:im(e,t)}}function Qf(e){return am(e,df.PAREN_L)?dm(e,df.PAREN_L,Xf,df.PAREN_R):[]}function Xf(e){var t=e.token,n=Wf(e),r=Ef(e);cm(e,df.COLON);var o,i=zf(e);um(e,df.EQUALS)&&(o=Bf(e));var s=qf(e,!0);return{kind:_f.INPUT_VALUE_DEFINITION,description:n,name:r,type:i,defaultValue:o,directives:s,loc:im(e,t)}}function em(e){var t=[];if(um(e,df.EQUALS))for(um(e,df.PIPE);t.push(Hf(e)),um(e,df.PIPE););return t}function tm(e){return am(e,df.BRACE_L)?dm(e,df.BRACE_L,nm,df.BRACE_R):[]}function nm(e){var t=e.token,n=Wf(e),r=Ef(e),o=qf(e,!0);return{kind:_f.ENUM_VALUE_DEFINITION,description:n,name:r,directives:o,loc:im(e,t)}}function rm(e){return am(e,df.BRACE_L)?dm(e,df.BRACE_L,Xf,df.BRACE_R):[]}function om(e){var t=e.token,n=Ef(e);if(Sf.hasOwnProperty(n.value))return n;throw pm(e,t)}function im(e,t){if(!e.options.noLocation)return new sm(t,e.lastToken,e.source)}function sm(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}function am(e,t){return e.token.kind===t}function um(e,t){var n=e.token.kind===t;return n&&e.advance(),n}function cm(e,t){var n=e.token;if(n.kind===t)return e.advance(),n;throw sf(e.source,n.start,"Expected ".concat(t,", found ").concat(hf(n)))}function lm(e,t){var n=e.token;if(n.kind===df.NAME&&n.value===t)return e.advance(),n;throw sf(e.source,n.start,'Expected "'.concat(t,'", found ').concat(hf(n)))}function pm(e,t){var n=t||e.token;return sf(e.source,n.start,"Unexpected ".concat(hf(n)))}function dm(e,t,n,r){cm(e,t);for(var o=[n(e)];!um(e,r);)o.push(n(e));return o}sm.prototype.toJSON=sm.prototype.inspect=function(){return{start:this.start,end:this.end}};var hm=J,fm=function(){return(fm=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},mm=new x.ConsoleLogger("AbstractPubSubProvider"),gm=(ym.prototype.configure=function(e){return void 0===e&&(e={}),this._config=fm(fm({},e),this._config),mm.debug("configure "+this.getProviderName(),this._config),this.options},ym.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(ym.prototype,"options",{get:function(){return fm({},this._config)},enumerable:!0,configurable:!0}),ym);function ym(e){void 0===e&&(e={}),this._config=e}function vm(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function bm(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function wm(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}var _m,Sm=(_m=function(e,t){return(_m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}_m(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Cm=function(){return(Cm=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Em=new x.ConsoleLogger("MqttOverWSProvider"),Im=(Am.prototype.get=function(n,r){return vm(this,void 0,void 0,function(){var t;return bm(this,function(e){return(t=this.promises.get(n))||(t=r(n),this.promises.set(n,t)),[2,t]})})},Object.defineProperty(Am.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),Am.prototype.remove=function(e){this.promises.delete(e)},Am);function Am(){this.promises=new Map}var Pm,km="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",Om=(Sm(Tm,Pm=gm),Object.defineProperty(Tm.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(Tm.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(Tm.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(Tm.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),Tm.prototype.getTopicForValue=function(e){return"object"==typeof e&&e[km]},Tm.prototype.getProviderName=function(){return"MqttOverWSProvider"},Tm.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,o=wm(e,["clientId","errorCode"]);if(0!==r){Em.warn(n,JSON.stringify(Cm({errorCode:r},o),null,2));var i=[],s=this._clientIdObservers.get(n);if(!s)return;s.forEach(function(n){n.error("Disconnected, error code: "+r),t._topicObservers.forEach(function(e,t){e.delete(n),0===e.size&&i.push(t)})}),this._clientIdObservers.delete(n),i.forEach(function(e){t._topicObservers.delete(e)})}},Tm.prototype.newClient=function(e){var t=e.url,o=e.clientId;return vm(this,void 0,void 0,function(){var n,r=this;return bm(this,function(e){switch(e.label){case 0:return Em.debug("Creating new MQTT client",o),(n=new Y.Client(t,o)).onMessageArrived=function(e){var t=e.destinationName,n=e.payloadString;r._onMessage(t,n)},n.onConnectionLost=function(e){var t=e.errorCode,n=wm(e,["errorCode"]);r.onDisconnect(Cm({clientId:o,errorCode:t},n))},[4,new Promise(function(e,t){n.connect({useSSL:r.isSSLEnabled,mqttVersion:3,onSuccess:function(){return e(n)},onFailure:t})})];case 1:return e.sent(),[2,n]}})})},Tm.prototype.connect=function(n,r){return void 0===r&&(r={}),vm(this,void 0,void 0,function(){var t=this;return bm(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(e){return t.newClient(Cm(Cm({},r),{clientId:e}))})];case 1:return[2,e.sent()]}})})},Tm.prototype.disconnect=function(n){return vm(this,void 0,void 0,function(){var t;return bm(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(){return null})];case 1:return(t=e.sent())&&t.isConnected()&&t.disconnect(),this.clientsQueue.remove(n),[2]}})})},Tm.prototype.publish=function(i,s){return vm(this,void 0,void 0,function(){var t,n,r,o;return bm(this,function(e){switch(e.label){case 0:return t=[].concat(i),n=JSON.stringify(s),[4,this.endpoint];case 1:return r=e.sent(),[4,this.connect(this.clientId,{url:r})];case 2:return o=e.sent(),Em.debug("Publishing to topic(s)",t.join(","),n),t.forEach(function(e){return o.send(e,n)}),[2]}})})},Tm.prototype._onMessage=function(t,n){try{var r=[];this._topicObservers.forEach(function(e,a){!function(e){for(var t=a.split("/"),n=t.length,r=e.split("/"),o=0;o<n;++o){var i=t[o],s=r[o];if("#"===i)return r.length>=n;if("+"!==i&&i!==s)return}return n===r.length}(t)||r.push(e)});var o=JSON.parse(n);"object"==typeof o&&(o[km]=t),r.forEach(function(e){e.forEach(function(e){return e.next(o)})})}catch(e){Em.warn("Error handling message",e,n)}},Tm.prototype.subscribe=function(e,u){var n=this;void 0===u&&(u={});var c=[].concat(e);return Em.debug("Subscribing to topic(s)",c.join(",")),new hm(function(i){var s;c.forEach(function(e){var t=n._topicObservers.get(e);t||(t=new Set,n._topicObservers.set(e,t)),t.add(i)});var e=u.clientId,a=void 0===e?n.clientId:e,t=n._clientIdObservers.get(a);return(t=t||new Set).add(i),n._clientIdObservers.set(a,t),vm(n,void 0,void 0,function(){var t,n,r,o;return bm(this,function(e){switch(e.label){case 0:return void 0!==(t=u.url)?[3,2]:[4,this.endpoint];case 1:return r=e.sent(),[3,3];case 2:r=t,e.label=3;case 3:n=r,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.connect(a,{url:n})];case 5:return s=e.sent(),c.forEach(function(e){s.subscribe(e)}),[3,7];case 6:return o=e.sent(),i.error(o),[3,7];case 7:return[2]}})}),function(){return Em.debug("Unsubscribing from topic(s)",c.join(",")),s&&(n._clientIdObservers.get(a).delete(i),0===n._clientIdObservers.get(a).size&&(n.disconnect(a),n._clientIdObservers.delete(a)),c.forEach(function(e){var t=n._topicObservers.get(e)||new Set;t.delete(i),0===t.size&&(n._topicObservers.delete(e),s.isConnected()&&s.unsubscribe(e))})),null}})},Tm);function Tm(e){void 0===e&&(e={});var t=Pm.call(this,Cm(Cm({},e),{clientId:e.clientId||E.v4()}))||this;return t._clientsQueue=new Im,t._topicObservers=new Map,t._clientIdObservers=new Map,t}function xm(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Nm(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Um(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var Mm,Rm,Dm=(Mm=function(e,t){return(Mm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Mm(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Fm=new x.ConsoleLogger("AWSAppSyncProvider"),Lm=(Dm(jm,Rm=Om),Object.defineProperty(jm.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),jm.prototype.getProviderName=function(){return"AWSAppSyncProvider"},jm.prototype.publish=function(e,t,n){return xm(this,void 0,void 0,function(){return Nm(this,function(e){throw new Error("Operation not supported")})})},jm.prototype._cleanUp=function(t){var n=this;Array.from(this._topicClient.entries()).filter(function(e){return Um(e,2)[1].clientId===t}).map(function(e){return Um(e,1)[0]}).forEach(function(e){return n._cleanUpForTopic(e)})},jm.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},jm.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter(function(e){return Um(e,2)[1].clientId===n}).map(function(e){return Um(e,1)[0]}).forEach(function(e){t._topicObservers.has(e)&&(t._topicObservers.get(e).forEach(function(e){e.closed||e.error(o)}),t._topicObservers.delete(e))}),this._cleanUp(n))},jm.prototype.disconnect=function(t){return xm(this,void 0,void 0,function(){return Nm(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(t,function(){return null})];case 1:return e.sent(),[4,Rm.prototype.disconnect.call(this,t)];case 2:return e.sent(),this._cleanUp(t),[2]}})})},jm.prototype.subscribe=function(e,c){var n=this;void 0===c&&(c={});var t=new hm(function(u){var s=[].concat(e);return Fm.debug("Subscribing to topic(s)",s.join(",")),xm(n,void 0,void 0,function(){var t,i,n,r,o,a=this;return Nm(this,function(e){switch(e.label){case 0:return s.forEach(function(e){a._topicObservers.has(e)||a._topicObservers.set(e,new Set),a._topicObservers.get(e).add(u)}),t=c.mqttConnections,i=void 0===t?[]:t,n=c.newSubscriptions,r=Object.entries(n).map(function(e){var t=Um(e,2),n=t[0];return[t[1].topic,n]}),this._topicAlias=new Map(function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Um(arguments[t]));return e}(Array.from(this._topicAlias.entries()),r)),o=Object.entries(s.reduce(function(e,t){var n=i.find(function(e){return-1<e.topics.indexOf(t)});if(n){var r=n.client,o=n.url;e[r]||(e[r]={url:o,topics:new Set}),e[r].topics.add(t)}return e},{})),[4,Promise.all(o.map(function(e){var t=Um(e,2),o=t[0],n=t[1],i=n.url,s=n.topics;return xm(a,void 0,void 0,function(){var t,n,r=this;return Nm(this,function(e){switch(e.label){case 0:t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.connect(o,{clientId:o,url:i})];case 2:return t=e.sent(),[3,4];case 3:return n=e.sent(),u.error({message:"Failed to connect",error:n}),u.complete(),[2,void 0];case 4:return s.forEach(function(e){t.isConnected()&&(t.subscribe(e),r._topicClient.set(e,t))}),[2,t]}})})}))];case 1:return e.sent(),[2]}})}),function(){Fm.debug("Unsubscribing from topic(s)",s.join(",")),s.forEach(function(e){var t=n._topicClient.get(e);t&&t.isConnected()&&(t.unsubscribe(e),n._topicClient.delete(e),Array.from(n._topicClient.values()).some(function(e){return e===t})||n.disconnect(t.clientId)),n._topicObservers.delete(e)})}});return hm.from(t).map(function(e){var t=n.getTopicForValue(e),i=n._topicAlias.get(t);return e.data=Object.entries(e.data).reduce(function(e,t){var n=Um(t,2),r=n[0],o=n[1];return e[i||r]=o,e},{}),e})},jm);function jm(){var e=null!==Rm&&Rm.apply(this,arguments)||this;return e._topicClient=new Map,e._topicAlias=new Map,e}function Bm(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Vm(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var qm,zm,Hm,Km,Gm,Wm,$m,Jm=(qm=function(e,t){return(qm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}qm(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ym=function(){return(Ym=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Zm=new x.Logger("AWSAppSyncRealTimeProvider"),Qm="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Xm=[400,401,403];(Hm=zm=zm||{}).GQL_CONNECTION_INIT="connection_init",Hm.GQL_CONNECTION_ERROR="connection_error",Hm.GQL_CONNECTION_ACK="connection_ack",Hm.GQL_START="start",Hm.GQL_START_ACK="start_ack",Hm.GQL_DATA="data",Hm.GQL_CONNECTION_KEEP_ALIVE="ka",Hm.GQL_STOP="stop",Hm.GQL_COMPLETE="complete",Hm.GQL_ERROR="error",(Gm=Km=Km||{})[Gm.PENDING=0]="PENDING",Gm[Gm.CONNECTED=1]="CONNECTED",Gm[Gm.FAILED=2]="FAILED",($m=Wm=Wm||{})[$m.CLOSED=0]="CLOSED",$m[$m.READY=1]="READY",$m[$m.CONNECTING=2]="CONNECTING";var eg,tg={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},ng=(Jm(rg,eg=gm),rg.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},rg.prototype.newClient=function(){throw new Error("Not used here")},rg.prototype.publish=function(e,t,n){return Bm(this,void 0,void 0,function(){return Vm(this,function(e){throw new Error("Operation not supported")})})},rg.prototype.subscribe=function(e,t){var n=this,o=t.appSyncGraphqlEndpoint;return new hm(function(e){if(o){var r=E.v4();return n._startSubscriptionWithAWSAppSyncRealTime({options:t,observer:e,subscriptionId:r}),function(){return Bm(n,void 0,void 0,function(){var t,n;return Vm(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(r)];case 1:if(e.sent(),!(t=(this.subscriptionObserverMap.get(r)||{}).subscriptionState))return[2];if(t!==Km.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(r),[3,4];case 2:return n=e.sent(),Zm.debug("Error while unsubscribing "+n),[3,4];case 3:return this._removeSubscriptionObserver(r),[7];case 4:return[2]}})})}}e.error({errors:[Ym({},new qh("Subscribe only available for AWS AppSync endpoint"))]}),e.complete()})},Object.defineProperty(rg.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),rg.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var A=e.options,P=e.observer,k=e.subscriptionId;return Bm(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m,g,y,v,b,w,_,S,C,E,I=this;return Vm(this,function(e){switch(e.label){case 0:return t=A.appSyncGraphqlEndpoint,n=A.authenticationType,r=A.query,o=A.variables,i=A.apiKey,s=A.region,a=A.graphql_headers,u=void 0===a?function(){return{}}:a,c=Km.PENDING,l={query:r,variables:o},this.subscriptionObserverMap.set(k,{observer:P,query:r,variables:o,subscriptionState:c,startAckTimeoutId:null}),p=JSON.stringify(l),h=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:i,appSyncGraphqlEndpoint:t,authenticationType:n,payload:p,canonicalUri:"",region:s})];case 1:return f=[Ym.apply(void 0,h.concat([e.sent()]))],[4,u()];case 2:d=Ym.apply(void 0,[Ym.apply(void 0,f.concat([e.sent()])),((E={})[x.USER_AGENT_HEADER]=x.Constants.userAgent,E)]),m={id:k,payload:{data:p,extensions:{authorization:Ym({},d)}},type:zm.GQL_START},g=JSON.stringify(m),e.label=3;case 3:return e.trys.push([3,5,,6]),[4,this._initializeWebSocketConnection({apiKey:i,appSyncGraphqlEndpoint:t,authenticationType:n,region:s})];case 4:return e.sent(),[3,6];case 5:return y=e.sent(),Zm.debug({err:y}),v=y.message,b=void 0===v?"":v,P.error({errors:[Ym({},new qh("Connection failed: "+b))]}),P.complete(),"function"==typeof(w=(this.subscriptionObserverMap.get(k)||{}).subscriptionFailedCallback)&&w(),[2];case 6:return _=this.subscriptionObserverMap.get(k),S=_.subscriptionFailedCallback,C=_.subscriptionReadyCallback,this.subscriptionObserverMap.set(k,{observer:P,subscriptionState:c,variables:o,query:r,subscriptionReadyCallback:C,subscriptionFailedCallback:S,startAckTimeoutId:setTimeout(function(){I._timeoutStartSubscriptionAck.call(I,k)},15e3)}),this.awsRealTimeSocket.send(g),[2]}})})},rg.prototype._waitForSubscriptionToBeConnected=function(u){return Bm(this,void 0,void 0,function(){var a=this;return Vm(this,function(e){return this.subscriptionObserverMap.get(u).subscriptionState===Km.PENDING?[2,new Promise(function(e,t){var n=a.subscriptionObserverMap.get(u),r=n.observer,o=n.subscriptionState,i=n.variables,s=n.query;a.subscriptionObserverMap.set(u,{observer:r,subscriptionState:o,variables:i,query:s,subscriptionReadyCallback:e,subscriptionFailedCallback:t})})]:[2]})})},rg.prototype._sendUnsubscriptionMessage=function(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===Wm.READY){var t={id:e,type:zm.GQL_STOP},n=JSON.stringify(t);this.awsRealTimeSocket.send(n)}}catch(e){Zm.debug({err:e})}},rg.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},rg.prototype._closeSocketIfRequired=function(){if(!(0<this.subscriptionObserverMap.size))if(this.awsRealTimeSocket)if(0<this.awsRealTimeSocket.bufferedAmount)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{Zm.debug("closing WebSocket..."),clearTimeout(this.keepAliveTimeoutId);var e=this.awsRealTimeSocket;e.onclose=void 0,e.onerror=void 0,e.close(1e3),this.awsRealTimeSocket=null,this.socketStatus=Wm.CLOSED}else this.socketStatus=Wm.CLOSED},rg.prototype._handleIncomingSubscriptionMessage=function(e){Zm.debug("subscription message from AWS AppSync RealTime: "+e.data);var t=JSON.parse(e.data),n=t.id,r=void 0===n?"":n,o=t.payload,i=t.type,s=this.subscriptionObserverMap.get(r)||{},a=s.observer,u=void 0===a?null:a,c=s.query,l=void 0===c?"":c,p=s.variables,d=void 0===p?{}:p,h=s.startAckTimeoutId,f=s.subscriptionReadyCallback,m=s.subscriptionFailedCallback;if(Zm.debug({id:r,observer:u,query:l,variables:d}),i===zm.GQL_DATA&&o&&o.data)u?u.next(o):Zm.debug("observer not found for id: "+r);else if(i!==zm.GQL_START_ACK){var g;if(i===zm.GQL_CONNECTION_KEEP_ALIVE)return clearTimeout(this.keepAliveTimeoutId),void(this.keepAliveTimeoutId=setTimeout(this._errorDisconnect.bind(this,ug.TIMEOUT_DISCONNECT),this.keepAliveTimeout));i===zm.GQL_ERROR&&(y=Km.FAILED,this.subscriptionObserverMap.set(r,{observer:u,query:l,variables:d,startAckTimeoutId:h,subscriptionReadyCallback:f,subscriptionFailedCallback:m,subscriptionState:y}),u.error({errors:[Ym({},new qh("Connection failed: "+JSON.stringify(o)))]}),clearTimeout(h),u.complete(),"function"==typeof m&&m())}else{Zm.debug("subscription ready for "+JSON.stringify({query:l,variables:d})),"function"==typeof f&&f(),clearTimeout(h),g={query:l,variables:d},x.Hub.dispatch("api",{event:"connected",data:g,message:"Connection established for subscription"},"PubSub",Qm);var y=Km.CONNECTED;this.subscriptionObserverMap.set(r,{observer:u,query:l,variables:d,startAckTimeoutId:null,subscriptionState:y,subscriptionReadyCallback:f,subscriptionFailedCallback:m})}},rg.prototype._errorDisconnect=function(n){Zm.debug("Disconnect error: "+n),this.subscriptionObserverMap.forEach(function(e){var t=e.observer;t.closed||t.error({errors:[Ym({},new qh(n))]})}),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&this.awsRealTimeSocket.close(),this.socketStatus=Wm.CLOSED},rg.prototype._timeoutStartSubscriptionAck=function(e){var t=this.subscriptionObserverMap.get(e)||{},n=t.observer,r=t.query,o=t.variables;n&&(this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:o,subscriptionState:Km.FAILED}),n&&!n.closed&&(n.error({errors:[Ym({},new qh("Subscription timeout "+JSON.stringify({query:r,variables:o})))]}),n.complete()),Zm.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:o})))},rg.prototype._initializeWebSocketConnection=function(e){var t=this,h=e.appSyncGraphqlEndpoint,f=e.authenticationType,m=e.apiKey,g=e.region;if(this.socketStatus!==Wm.READY)return new Promise(function(p,d){return Bm(t,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l;return Vm(this,function(e){switch(e.label){case 0:if(this.promiseArray.push({res:p,rej:d}),this.socketStatus!==Wm.CLOSED)return[3,5];e.label=1;case 1:return e.trys.push([1,4,,5]),this.socketStatus=Wm.CONNECTING,t=this.isSSLEnabled?"wss://":"ws://",n=h.replace("https://",t).replace("http://",t).replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),r="{}",s=(i=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:f,payload:r,canonicalUri:"/connect",apiKey:m,appSyncGraphqlEndpoint:h,region:g})];case 2:return o=s.apply(i,[e.sent()]),a=Wu.from(o).toString("base64"),u=Wu.from(r).toString("base64"),c=n+"?header="+a+"&payload="+u,[4,this._initializeRetryableHandshake({awsRealTimeUrl:c})];case 3:return e.sent(),this.promiseArray.forEach(function(e){var t=e.res;Zm.debug("Notifying connection successful"),t()}),this.socketStatus=Wm.READY,this.promiseArray=[],[3,5];case 4:return l=e.sent(),this.promiseArray.forEach(function(e){return(0,e.rej)(l)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=null,this.socketStatus=Wm.CLOSED,[3,5];case 5:return[2]}})})})},rg.prototype._initializeRetryableHandshake=function(e){var t=e.awsRealTimeUrl;return Bm(this,void 0,void 0,function(){return Vm(this,function(e){switch(e.label){case 0:return Zm.debug("Initializaling retryable Handshake"),[4,x.jitteredExponentialRetry(this._initializeHandshake.bind(this),[{awsRealTimeUrl:t}],5e3)];case 1:return e.sent(),[2]}})})},rg.prototype._initializeHandshake=function(e){var o=e.awsRealTimeUrl;return Bm(this,void 0,void 0,function(){var t,n,r,g=this;return Vm(this,function(e){switch(e.label){case 0:Zm.debug("Initializing handshake "+o),e.label=1;case 1:return e.trys.push([1,4,,5]),[4,new Promise(function(e,t){var n=new WebSocket(o,"graphql-ws");n.onerror=function(){Zm.debug("WebSocket connection error")},n.onclose=function(){t(new Error("Connection handshake error"))},n.onopen=function(){return g.awsRealTimeSocket=n,e()}})];case 2:return e.sent(),[4,new Promise(function(h,f){var m=!1;g.awsRealTimeSocket.onerror=function(e){Zm.debug("WebSocket error "+JSON.stringify(e))},g.awsRealTimeSocket.onclose=function(e){Zm.debug("WebSocket closed "+e.reason),f(new Error(JSON.stringify(e)))},g.awsRealTimeSocket.onmessage=function(e){Zm.debug("subscription message from AWS AppSyncRealTime: "+e.data+" ");var t=JSON.parse(e.data),n=t.type,r=t.payload,o=(void 0===r?{}:r).connectionTimeoutMs,i=void 0===o?3e5:o;if(n===zm.GQL_CONNECTION_ACK)return m=!0,g.keepAliveTimeout=i,g.awsRealTimeSocket.onmessage=g._handleIncomingSubscriptionMessage.bind(g),g.awsRealTimeSocket.onerror=function(e){Zm.debug(e),g._errorDisconnect(ug.CONNECTION_CLOSED)},void h("Cool, connected to AWS AppSyncRealTime");if(n===zm.GQL_CONNECTION_ERROR){var s=t.payload,a=(void 0===s?{}:s).errors,u=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(void 0===a?[]:a,1)[0],c=void 0===u?{}:u,l=c.errorType,p=void 0===l?"":l,d=c.errorCode;f({errorType:p,errorCode:void 0===d?0:d})}};var e={type:zm.GQL_CONNECTION_INIT};g.awsRealTimeSocket.send(JSON.stringify(e)),setTimeout(function(){m||f(new Error("Connection timeout: ack from AWSRealTime was not received on 15000 ms"))}.bind(g),15e3)})];case 3:return e.sent(),[3,5];case 4:throw t=e.sent(),n=t.errorType,r=t.errorCode,Xm.includes(r)?new x.NonRetryableError(n):n?new Error(n):t;case 5:return[2]}})})},rg.prototype._awsRealTimeHeaderBasedAuth=function(e){var o=e.authenticationType,i=e.payload,s=e.canonicalUri,a=e.appSyncGraphqlEndpoint,u=e.apiKey,c=e.region;return Bm(this,void 0,void 0,function(){var t,n,r;return Vm(this,function(e){switch(e.label){case 0:return t={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this)},"function"!=typeof(n=t[o])?(Zm.debug("Authentication type "+o+" not supported"),[2,""]):(r=fp(a).host,[4,n({payload:i,canonicalUri:s,appSyncGraphqlEndpoint:a,apiKey:u,region:c,host:r})]);case 1:return[2,e.sent()]}})})},rg.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return Bm(this,void 0,void 0,function(){return Vm(this,function(e){switch(e.label){case 0:return[4,Yp.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}})})},rg.prototype._awsRealTimeOPENIDHeader=function(e){var n=e.host;return Bm(this,void 0,void 0,function(){var t;return Vm(this,function(e){switch(e.label){case 0:return[4,pa.getItem("federatedInfo")];case 1:if(!(t=e.sent())||!t.token)throw new Error("No federated jwt");return[2,{Authorization:t.token,host:n}]}})})},rg.prototype._awsRealTimeApiKeyHeader=function(e){var r=e.apiKey,o=e.host;return Bm(this,void 0,void 0,function(){var t,n;return Vm(this,function(e){return t=new Date,n=t.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:o,"x-amz-date":n,"x-api-key":r}]})})},rg.prototype._awsRealTimeIAMHeader=function(e){var o=e.payload,i=e.canonicalUri,s=e.appSyncGraphqlEndpoint,a=e.region;return Bm(this,void 0,void 0,function(){var t,n,r;return Vm(this,function(e){switch(e.label){case 0:return t={region:a,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!e.sent())throw new Error("No credentials");return[4,x.Credentials.get().then(function(e){return{secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken}})];case 2:return n=e.sent(),r={url:""+s+i,data:o,method:"POST",headers:Ym({},tg)},[2,x.Signer.sign(r,n,t).headers]}})})},rg.prototype._ensureCredentials=function(){return x.Credentials.get().then(function(e){if(!e)return!1;var t=x.Credentials.shear(e);return Zm.debug("set credentials for AWSAppSyncRealTimeProvider",t),!0}).catch(function(e){return Zm.warn("ensure credentials error",e),!1})},rg);function rg(){var e=null!==eg&&eg.apply(this,arguments)||this;return e.socketStatus=Wm.CLOSED,e.keepAliveTimeout=3e5,e.subscriptionObserverMap=new Map,e.promiseArray=[],e}function og(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function ig(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var sg=new x.ConsoleLogger("PubSub");function ag(e){this._options=e,sg.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this),x.Amplify.register(this)}var ug,cg,lg=(Object.defineProperty(ag.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new Lm(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(ag.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new ng(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),ag.prototype.getModuleName=function(){return"PubSub"},ag.prototype.configure=function(e){var t=this,n=e?e.PubSub||e:{};return sg.debug("configure PubSub",{opt:n}),this._options=Object.assign({},this._options,n),this._pluggables.map(function(e){return e.configure(t._options)}),this._options},ag.prototype.addPluggable=function(t){return og(this,void 0,void 0,function(){return ig(this,function(e){return t&&"PubSub"===t.getCategory()?(this._pluggables.push(t),[2,t.configure(this._options)]):[2]})})},ag.prototype.getProviderByName=function(t){return t===x.INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER?this.awsAppSyncProvider:t===x.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER?this.awsAppSyncRealTimeProvider:this._pluggables.find(function(e){return e.getProviderName()===t})},ag.prototype.getProviders=function(e){void 0===e&&(e={});var t=e.provider;if(!t)return this._pluggables;var n=this.getProviderByName(t);if(!n)throw new Error("Could not find provider named "+t);return[n]},ag.prototype.publish=function(t,n,r){return og(this,void 0,void 0,function(){return ig(this,function(e){return[2,Promise.all(this.getProviders(r).map(function(e){return e.publish(t,n,r)}))]})})},ag.prototype.subscribe=function(t,r){sg.debug("subscribe options",r);var o=this.getProviders(r);return new hm(function(n){var e=o.map(function(e){return{provider:e,observable:e.subscribe(t,r)}}).map(function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return n.next({provider:t,value:e})},error:function(e){return n.error({provider:t,error:e})}})});return function(){return e.forEach(function(e){return e.unsubscribe()})}})},new ag(null));(cg=ug=ug||{}).CONNECTION_CLOSED="Connection closed",cg.TIMEOUT_DISCONNECT="Timeout disconnect";function pg(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function dg(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function hg(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}var fg=function(){return(fg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},mg=new x.ConsoleLogger("GraphQLAPI"),gg=(yg.prototype.getModuleName=function(){return"GraphQLAPI"},yg.prototype.configure=function(e){var t=e||{},n=t.API,r=void 0===n?{}:n,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(t,["API"]),i=fg(fg({},o),r);return mg.debug("configure GraphQL API",{opt:i}),i.aws_project_region&&(i=Object.assign({},i,{region:i.aws_project_region,header:{}})),void 0!==i.graphql_headers&&"function"!=typeof i.graphql_headers&&(mg.warn("graphql_headers should be a function"),i.graphql_headers=void 0),this._options=Object.assign({},this._options,i),this.createInstance(),this._options},yg.prototype.createInstance=function(){return mg.debug("create Rest instance"),this._options?(this._api=new xh(this._options),!0):Promise.reject("API not configured")},yg.prototype._headerBasedAuth=function(a){return pg(this,void 0,void 0,function(){var t,n,r,o,i,s;return dg(this,function(e){switch(e.label){case 0:switch(t=this._options,n=t.aws_appsync_authenticationType,r=t.aws_appsync_apiKey,o={},a||n||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,6]}return[3,8];case 1:if(!r)throw new Error("No api-key configured");return o={Authorization:null,"X-Api-Key":r},[3,9];case 2:return[4,this._ensureCredentials()];case 3:if(!e.sent())throw new Error("No credentials");return[3,9];case 4:return[4,pa.getItem("federatedInfo")];case 5:if(!(i=e.sent())||!i.token)throw new Error("No federated jwt");return o={Authorization:i.token},[3,9];case 6:return[4,Yp.currentSession()];case 7:return s=e.sent(),o={Authorization:s.getAccessToken().getJwtToken()},[3,9];case 8:return o={Authorization:null},[3,9];case 9:return[2,o]}})})},yg.prototype.getGraphqlOperationType=function(e){var t=Cf(e);return hg(t.definitions,1)[0].operation},yg.prototype.graphql=function(e,t){var n=e.query,r=e.variables,o=void 0===r?{}:r,i=e.authMode,s=Cf("string"==typeof n?n:Wh(n)),a=hg(s.definitions.filter(function(e){return"OperationDefinition"===e.kind}),1)[0],u=(void 0===a?{}:a).operation;switch(u){case"query":case"mutation":return this._graphql({query:s,variables:o,authMode:i},t);case"subscription":return this._graphqlSubscribe({query:s,variables:o,authMode:i})}throw new Error("invalid operation type: "+u)},yg.prototype._graphql=function(e,S){var C=e.query,E=e.variables,I=e.authMode;return void 0===S&&(S={}),pg(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m,g,y,v,b,w,_;return dg(this,function(e){switch(e.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:e.sent(),e.label=2;case 2:return t=this._options,n=t.aws_appsync_region,r=t.aws_appsync_graphqlEndpoint,o=t.graphql_headers,i=void 0===o?function(){return{}}:o,s=t.graphql_endpoint,a=t.graphql_endpoint_iam_region,c=[{}],(l=!s)?[4,this._headerBasedAuth(I)]:[3,4];case 3:l=e.sent(),e.label=4;case 4:return p=[fg.apply(void 0,c.concat([l]))],(d=s)?a?[4,this._headerBasedAuth(I)]:[3,6]:[3,8];case 5:return h=e.sent(),[3,7];case 6:h={Authorization:null},e.label=7;case 7:d=h,e.label=8;case 8:return f=[fg.apply(void 0,p.concat([d]))],[4,i({query:C,variables:E})];case 9:if(u=fg.apply(void 0,[fg.apply(void 0,[fg.apply(void 0,f.concat([e.sent()])),S]),!s&&((_={})["x-amz-user-agent"]=x.Constants.userAgent,_)]),m={query:Wh(C),variables:E},g={headers:u,body:m,signerServiceInfo:{service:s?"execute-api":"appsync",region:s?a:n}},!(y=s||r))throw{data:{},errors:[new qh("No graphql endpoint provided.")]};e.label=10;case 10:return e.trys.push([10,12,,13]),[4,this._api.post(y,g)];case 11:return v=e.sent(),[3,13];case 12:return b=e.sent(),v={data:{},errors:[new qh(b.message)]},[3,13];case 13:if((w=v.errors)&&w.length)throw v;return[2,v]}})})},yg.prototype._graphqlSubscribe=function(e){var t=e.query,n=e.variables,r=e.authMode,o=this._options,i=o.aws_appsync_region,s=o.aws_appsync_graphqlEndpoint,a=o.aws_appsync_authenticationType,u=o.aws_appsync_apiKey,c=o.graphql_headers,l=void 0===c?function(){return{}}:c,p=r||a||"AWS_IAM";if(lg&&"function"==typeof lg.subscribe)return lg.subscribe("",{provider:x.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER,appSyncGraphqlEndpoint:s,authenticationType:p,apiKey:u,query:Wh(t),region:i,variables:n,graphql_headers:l});throw mg.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},yg.prototype._ensureCredentials=function(){return x.Credentials.get().then(function(e){if(!e)return!1;var t=x.Credentials.shear(e);return mg.debug("set credentials for api",t),!0}).catch(function(e){return mg.warn("ensure credentials error",e),!1})},yg);function yg(e){this._api=null,this._options=e,Q.register(this),mg.debug("API Options",this._options)}new gg(null);function vg(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function bg(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var wg=function(){return(wg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},_g=new x.ConsoleLogger("API");function Sg(e){this._options=e,this._restApi=new Fh(e),this._graphqlApi=new gg(e),x.Amplify.register(this),_g.debug("API Options",this._options)}var Cg=(Sg.prototype.getModuleName=function(){return"API"},Sg.prototype.configure=function(e){this._options=Object.assign({},this._options,e);var t=this._restApi.configure(this._options),n=this._graphqlApi.configure(this._options);return wg(wg({},t),n)},Sg.prototype.get=function(t,n,r){return vg(this,void 0,void 0,function(){return bg(this,function(e){return[2,this._restApi.get(t,n,r)]})})},Sg.prototype.post=function(t,n,r){return vg(this,void 0,void 0,function(){return bg(this,function(e){return[2,this._restApi.post(t,n,r)]})})},Sg.prototype.put=function(t,n,r){return vg(this,void 0,void 0,function(){return bg(this,function(e){return[2,this._restApi.put(t,n,r)]})})},Sg.prototype.patch=function(t,n,r){return vg(this,void 0,void 0,function(){return bg(this,function(e){return[2,this._restApi.patch(t,n,r)]})})},Sg.prototype.del=function(t,n,r){return vg(this,void 0,void 0,function(){return bg(this,function(e){return[2,this._restApi.del(t,n,r)]})})},Sg.prototype.head=function(t,n,r){return vg(this,void 0,void 0,function(){return bg(this,function(e){return[2,this._restApi.head(t,n,r)]})})},Sg.prototype.endpoint=function(t){return vg(this,void 0,void 0,function(){return bg(this,function(e){return[2,this._restApi.endpoint(t)]})})},Sg.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},Sg.prototype.graphql=function(e){return this._graphqlApi.graphql(e)},new Sg(null)),Eg=function(){return(Eg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ig=new x.ConsoleLogger("AbstractInteractionsProvider"),Ag=(Pg.prototype.configure=function(e){return void 0===e&&(e={}),this._config=Eg(Eg({},this._config),e),Ig.debug("configure "+this.getProviderName(),this._config),this.options},Pg.prototype.getCategory=function(){return"Interactions"},Object.defineProperty(Pg.prototype,"options",{get:function(){return Eg({},this._config)},enumerable:!0,configurable:!0}),Pg);function Pg(e){void 0===e&&(e={}),this._config=e}var kg,Og="runtime.lex.{region}.amazonaws.com",Tg=new Set(["ap-south-1","eu-north-1","eu-west-3","eu-west-2","eu-west-1","ap-northeast-2","ap-northeast-1","me-south-1","ca-central-1","sa-east-1","ap-east-1","ap-southeast-1","ap-southeast-2","eu-central-1","us-east-1","us-east-2","us-west-1","us-west-2"]),xg=new Set(["cn-north-1","cn-northwest-1"]),Ng=new Set(["us-iso-east-1"]),Ug=new Set(["us-isob-east-1"]),Mg=new Set(["us-gov-west-1","us-gov-east-1"]),Rg=te(te({},{apiVersion:"2016-11-28",disableHostPrefix:!1,signingName:"lex",regionInfoProvider:function(e,t){var n=void 0;switch(e){case"eu-west-1":n={hostname:"runtime.lex.eu-west-1.amazonaws.com",signingService:"lex"};break;case"us-east-1":n={hostname:"runtime.lex.us-east-1.amazonaws.com",signingService:"lex"};break;case"us-west-2":n={hostname:"runtime.lex.us-west-2.amazonaws.com",signingService:"lex"};break;default:Tg.has(e)&&(n={hostname:Og.replace("{region}",e),signingService:"lex"}),xg.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com.cn".replace("{region}",e)}),Ng.has(e)&&(n={hostname:"runtime.lex.{region}.c2s.ic.gov".replace("{region}",e)}),Ug.has(e)&&(n={hostname:"runtime.lex.{region}.sc2s.sgov.gov".replace("{region}",e)}),Mg.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",e)}),void 0===n&&(n={hostname:Og.replace("{region}",e),signingService:"lex"})}return Promise.resolve(n)}}),{requestHandler:new i.NodeHttpHandler,sha256:o.Hash.bind(null,"sha256"),urlParser:s.parseUrl,bodyLengthChecker:a.calculateBodyLength,streamCollector:u.streamCollector,base64Decoder:l.fromBase64,base64Encoder:l.toBase64,utf8Decoder:c.fromUtf8,utf8Encoder:c.toUtf8,defaultUserAgent:p.defaultUserAgent("@aws-sdk/client-lex-runtime-service","1.0.0-beta.3"),runtime:"node",credentialDefaultProvider:n.defaultProvider,regionDefaultProvider:r.defaultProvider}),Dg=(ee(Fg,kg=_.Client),Fg.prototype.destroy=function(){},Fg);function Fg(e){var t=this,n=te(te({},Rg),e),r=d.resolveRegionConfig(n),o=d.resolveEndpointsConfig(r),i=y.resolveAwsAuthConfig(o),s=g.resolveRetryConfig(i),a=w.resolveUserAgentConfig(s),u=m.resolveHostHeaderConfig(a);return(t=kg.call(this,u)||this).config=u,t.middlewareStack.use(y.getAwsAuthPlugin(t.config)),t.middlewareStack.use(g.getRetryPlugin(t.config)),t.middlewareStack.use(w.getUserAgentPlugin(t.config)),t.middlewareStack.use(f.getContentLengthPlugin(t.config)),t.middlewareStack.use(m.getHostHeaderPlugin(t.config)),t}function Lg(r,o){return ie(this,void 0,void 0,function(){var t,n;return se(this,function(e){return 200!==r.statusCode&&400<=r.statusCode?[2,function(S,C){return ie(this,void 0,void 0,function(){var t,n,s,a,u,c,l,p,d,h,f,m,g,y,v,b,w,_;return se(this,function(e){switch(e.label){case 0:return n=[te({},S)],s={},[4,Yg(S.body,C)];case 1:switch(t=te.apply(void 0,n.concat([(s.body=e.sent(),s)])),u="UnknownError",u=Zg(S,t.body)){case"BadRequestException":case"com.amazonaws.commonapi.exceptions#BadRequestException":return[3,2];case"ConflictException":case"com.amazonaws.commonapi.exceptions#ConflictException":return[3,4];case"InternalFailureException":case"com.amazonaws.commonapi.exceptions#InternalFailureException":return[3,6];case"LimitExceededException":case"com.amazonaws.commonapi.exceptions#LimitExceededException":return[3,8];case"NotAcceptableException":case"com.amazonaws.commonapi.exceptions#NotAcceptableException":return[3,10];case"NotFoundException":case"com.amazonaws.commonapi.exceptions#NotFoundException":return[3,12];case"RequestTimeoutException":case"com.amazonaws.commonapi.exceptions#RequestTimeoutException":return[3,14];case"UnsupportedMediaTypeException":case"com.amazonaws.commonapi.exceptions#UnsupportedMediaTypeException":return[3,16];case"BadGatewayException":case"com.amazonaws.deepsense.runtimeservice#BadGatewayException":return[3,18];case"DependencyFailedException":case"com.amazonaws.deepsense.runtimeservice#DependencyFailedException":return[3,20];case"LoopDetectedException":case"com.amazonaws.deepsense.runtimeservice#LoopDetectedException":return[3,22]}return[3,24];case 2:return c=[{}],[4,qg(t)];case 3:return a=te.apply(void 0,[te.apply(void 0,c.concat([e.sent()])),{name:u,$metadata:ey(S)}]),[3,25];case 4:return l=[{}],[4,zg(t)];case 5:return a=te.apply(void 0,[te.apply(void 0,l.concat([e.sent()])),{name:u,$metadata:ey(S)}]),[3,25];case 6:return p=[{}],[4,Hg(t)];case 7:return a=te.apply(void 0,[te.apply(void 0,p.concat([e.sent()])),{name:u,$metadata:ey(S)}]),[3,25];case 8:return d=[{}],[4,Kg(t)];case 9:return a=te.apply(void 0,[te.apply(void 0,d.concat([e.sent()])),{name:u,$metadata:ey(S)}]),[3,25];case 10:return h=[{}],[4,(i=t,ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"NotAcceptableException",$fault:"client",$metadata:ey(i),message:void 0},void 0!==(n=i.body).message&&null!==n.message&&(t.message=n.message),[2,t]})}))];case 11:return a=te.apply(void 0,[te.apply(void 0,h.concat([e.sent()])),{name:u,$metadata:ey(S)}]),[3,25];case 12:return f=[{}],[4,Gg(t)];case 13:return a=te.apply(void 0,[te.apply(void 0,f.concat([e.sent()])),{name:u,$metadata:ey(S)}]),[3,25];case 14:return m=[{}],[4,(o=t,ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"RequestTimeoutException",$fault:"client",$metadata:ey(o),message:void 0},void 0!==(n=o.body).message&&null!==n.message&&(t.message=n.message),[2,t]})}))];case 15:return a=te.apply(void 0,[te.apply(void 0,m.concat([e.sent()])),{name:u,$metadata:ey(S)}]),[3,25];case 16:return g=[{}],[4,(r=t,ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"UnsupportedMediaTypeException",$fault:"client",$metadata:ey(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})}))];case 17:return a=te.apply(void 0,[te.apply(void 0,g.concat([e.sent()])),{name:u,$metadata:ey(S)}]),[3,25];case 18:return y=[{}],[4,Wg(t)];case 19:return a=te.apply(void 0,[te.apply(void 0,y.concat([e.sent()])),{name:u,$metadata:ey(S)}]),[3,25];case 20:return v=[{}],[4,$g(t)];case 21:return a=te.apply(void 0,[te.apply(void 0,v.concat([e.sent()])),{name:u,$metadata:ey(S)}]),[3,25];case 22:return b=[{}],[4,Jg(t)];case 23:return a=te.apply(void 0,[te.apply(void 0,b.concat([e.sent()])),{name:u,$metadata:ey(S)}]),[3,25];case 24:w=t.body,u=w.code||w.Code||u,a=te(te({},w),{name:""+u,message:w.message||w.Message||u,$fault:"client",$metadata:ey(S)}),e.label=25;case 25:return _=a.message||a.Message||u,a.message=_,delete a.Message,[2,Promise.reject(Object.assign(new Error(_),a))]}var r,o,i})})}(r,o)]:(t={$metadata:ey(r),__type:"PostContentResponse",audioStream:void 0,contentType:void 0,dialogState:void 0,inputTranscript:void 0,intentName:void 0,message:void 0,messageFormat:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},void 0!==r.headers["content-type"]&&(t.contentType=r.headers["content-type"]),void 0!==r.headers["x-amz-lex-dialog-state"]&&(t.dialogState=r.headers["x-amz-lex-dialog-state"]),void 0!==r.headers["x-amz-lex-input-transcript"]&&(t.inputTranscript=r.headers["x-amz-lex-input-transcript"]),void 0!==r.headers["x-amz-lex-intent-name"]&&(t.intentName=r.headers["x-amz-lex-intent-name"]),void 0!==r.headers["x-amz-lex-message"]&&(t.message=r.headers["x-amz-lex-message"]),void 0!==r.headers["x-amz-lex-message-format"]&&(t.messageFormat=r.headers["x-amz-lex-message-format"]),void 0!==r.headers["x-amz-lex-sentiment"]&&(t.sentimentResponse=r.headers["x-amz-lex-sentiment"]),void 0!==r.headers["x-amz-lex-session-attributes"]&&(t.sessionAttributes=new _.LazyJsonString(r.headers["x-amz-lex-session-attributes"])),void 0!==r.headers["x-amz-lex-session-id"]&&(t.sessionId=r.headers["x-amz-lex-session-id"]),void 0!==r.headers["x-amz-lex-slot-to-elicit"]&&(t.slotToElicit=r.headers["x-amz-lex-slot-to-elicit"]),void 0!==r.headers["x-amz-lex-slots"]&&(t.slots=new _.LazyJsonString(r.headers["x-amz-lex-slots"])),n=r.body,t.audioStream=n,[2,Promise.resolve(t)])})})}function jg(a,u){return ie(this,void 0,void 0,function(){var i,s;return se(this,function(e){switch(e.label){case 0:return 200!==a.statusCode&&400<=a.statusCode?[2,function(g,y){return ie(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m;return se(this,function(e){switch(e.label){case 0:return n=[te({},g)],r={},[4,Yg(g.body,y)];case 1:switch(t=te.apply(void 0,n.concat([(r.body=e.sent(),r)])),i="UnknownError",i=Zg(g,t.body)){case"BadRequestException":case"com.amazonaws.commonapi.exceptions#BadRequestException":return[3,2];case"ConflictException":case"com.amazonaws.commonapi.exceptions#ConflictException":return[3,4];case"InternalFailureException":case"com.amazonaws.commonapi.exceptions#InternalFailureException":return[3,6];case"LimitExceededException":case"com.amazonaws.commonapi.exceptions#LimitExceededException":return[3,8];case"NotFoundException":case"com.amazonaws.commonapi.exceptions#NotFoundException":return[3,10];case"BadGatewayException":case"com.amazonaws.deepsense.runtimeservice#BadGatewayException":return[3,12];case"DependencyFailedException":case"com.amazonaws.deepsense.runtimeservice#DependencyFailedException":return[3,14];case"LoopDetectedException":case"com.amazonaws.deepsense.runtimeservice#LoopDetectedException":return[3,16]}return[3,18];case 2:return s=[{}],[4,qg(t)];case 3:return o=te.apply(void 0,[te.apply(void 0,s.concat([e.sent()])),{name:i,$metadata:ey(g)}]),[3,19];case 4:return a=[{}],[4,zg(t)];case 5:return o=te.apply(void 0,[te.apply(void 0,a.concat([e.sent()])),{name:i,$metadata:ey(g)}]),[3,19];case 6:return u=[{}],[4,Hg(t)];case 7:return o=te.apply(void 0,[te.apply(void 0,u.concat([e.sent()])),{name:i,$metadata:ey(g)}]),[3,19];case 8:return c=[{}],[4,Kg(t)];case 9:return o=te.apply(void 0,[te.apply(void 0,c.concat([e.sent()])),{name:i,$metadata:ey(g)}]),[3,19];case 10:return l=[{}],[4,Gg(t)];case 11:return o=te.apply(void 0,[te.apply(void 0,l.concat([e.sent()])),{name:i,$metadata:ey(g)}]),[3,19];case 12:return p=[{}],[4,Wg(t)];case 13:return o=te.apply(void 0,[te.apply(void 0,p.concat([e.sent()])),{name:i,$metadata:ey(g)}]),[3,19];case 14:return d=[{}],[4,$g(t)];case 15:return o=te.apply(void 0,[te.apply(void 0,d.concat([e.sent()])),{name:i,$metadata:ey(g)}]),[3,19];case 16:return h=[{}],[4,Jg(t)];case 17:return o=te.apply(void 0,[te.apply(void 0,h.concat([e.sent()])),{name:i,$metadata:ey(g)}]),[3,19];case 18:f=t.body,i=f.code||f.Code||i,o=te(te({},f),{name:""+i,message:f.message||f.Message||i,$fault:"client",$metadata:ey(g)}),e.label=19;case 19:return m=o.message||o.Message||i,o.message=m,delete o.Message,[2,Promise.reject(Object.assign(new Error(m),o))]}})})}(a,u)]:(i={$metadata:ey(a),__type:"PostTextResponse",dialogState:void 0,intentName:void 0,message:void 0,messageFormat:void 0,responseCard:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},[4,Yg(a.body,u)]);case 1:return void 0!==(s=e.sent()).dialogState&&null!==s.dialogState&&(i.dialogState=s.dialogState),void 0!==s.intentName&&null!==s.intentName&&(i.intentName=s.intentName),void 0!==s.message&&null!==s.message&&(i.message=s.message),void 0!==s.messageFormat&&null!==s.messageFormat&&(i.messageFormat=s.messageFormat),void 0!==s.responseCard&&null!==s.responseCard&&(i.responseCard=(r=s.responseCard,o={__type:"ResponseCard",contentType:void 0,genericAttachments:void 0,version:void 0},void 0!==r.contentType&&null!==r.contentType&&(o.contentType=r.contentType),void 0!==r.genericAttachments&&null!==r.genericAttachments&&(o.genericAttachments=(r.genericAttachments||[]).map(function(e){return n={__type:"GenericAttachment",attachmentLinkUrl:void 0,buttons:void 0,imageUrl:void 0,subTitle:void 0,title:void 0},void 0!==(t=e).attachmentLinkUrl&&null!==t.attachmentLinkUrl&&(n.attachmentLinkUrl=t.attachmentLinkUrl),void 0!==t.buttons&&null!==t.buttons&&(n.buttons=Xg(t.buttons)),void 0!==t.imageUrl&&null!==t.imageUrl&&(n.imageUrl=t.imageUrl),void 0!==t.subTitle&&null!==t.subTitle&&(n.subTitle=t.subTitle),void 0!==t.title&&null!==t.title&&(n.title=t.title),n;var t,n})),void 0!==r.version&&null!==r.version&&(o.version=r.version),o)),void 0!==s.sentimentResponse&&null!==s.sentimentResponse&&(i.sentimentResponse=(t=s.sentimentResponse,n={__type:"SentimentResponse",sentimentLabel:void 0,sentimentScore:void 0},void 0!==t.sentimentLabel&&null!==t.sentimentLabel&&(n.sentimentLabel=t.sentimentLabel),void 0!==t.sentimentScore&&null!==t.sentimentScore&&(n.sentimentScore=t.sentimentScore),n)),void 0!==s.sessionAttributes&&null!==s.sessionAttributes&&(i.sessionAttributes=Vg(s.sessionAttributes)),void 0!==s.sessionId&&null!==s.sessionId&&(i.sessionId=s.sessionId),void 0!==s.slotToElicit&&null!==s.slotToElicit&&(i.slotToElicit=s.slotToElicit),void 0!==s.slots&&null!==s.slots&&(i.slots=Vg(s.slots)),[2,Promise.resolve(i)]}var t,n,r,o})})}function Bg(t){var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),n}function Vg(t){var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),n}function qg(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:ey(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})}function zg(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"ConflictException",$fault:"client",$metadata:ey(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})}function Hg(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"InternalFailureException",$fault:"server",$metadata:ey(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})}function Kg(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"LimitExceededException",$fault:"client",$metadata:ey(r),message:void 0,retryAfterSeconds:void 0},void 0!==r.headers["retry-after"]&&(t.retryAfterSeconds=r.headers["retry-after"]),void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})}function Gg(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:ey(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})}function Wg(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"BadGatewayException",$fault:"server",$metadata:ey(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})}function $g(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"DependencyFailedException",$fault:"client",$metadata:ey(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})}function Jg(r,e){return ie(void 0,void 0,void 0,function(){var t,n;return se(this,function(e){return t={name:"LoopDetectedException",$fault:"server",$metadata:ey(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})}function Yg(e,t){return o=n=t,((r=e)instanceof Uint8Array?Promise.resolve(r):o.streamCollector(r)||Promise.resolve(new Uint8Array)).then(function(e){return n.utf8Encoder(e)}).then(function(e){return e.length?JSON.parse(e):{}});var n,r,o}function Zg(e,t){function n(e){var t=e;return 0<=t.indexOf(":")&&(t=t.split(":")[0]),0<=t.indexOf("#")&&(t=t.split("#")[1]),t}var r,o=(r=e.headers,Object.keys(r).find(function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==o?n(e.headers[o]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""}var Qg,Xg=function(e,t){return(e||[]).map(function(e){return n={__type:"Button",text:void 0,value:void 0},void 0!==(t=e).text&&null!==t.text&&(n.text=t.text),void 0!==t.value&&null!==t.value&&(n.value=t.value),n;var t,n})},ey=function(e){return{httpStatusCode:e.statusCode,httpHeaders:e.headers,requestId:e.headers["x-amzn-requestid"]}},ty=(ee(ny,Qg=_.Command),ny.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(C.getSerdePlugin(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},ny.prototype.serialize=function(e,t){return function(i,s){return ie(this,void 0,void 0,function(){var t,n,r,o;return se(this,function(e){if(t={"Content-Type":"application/octet-stream","x-amz-content-sha256":"UNSIGNED_PAYLOAD"},void 0!==i.accept&&(t.Accept=i.accept),void 0!==i.contentType&&(t["Content-Type"]=i.contentType),void 0!==i.requestAttributes&&(t["x-amz-lex-request-attributes"]=_.LazyJsonString.fromObject(i.requestAttributes)),void 0!==i.sessionAttributes&&(t["x-amz-lex-session-attributes"]=_.LazyJsonString.fromObject(i.sessionAttributes)),n="/bot/{botName}/alias/{botAlias}/user/{userId}/content",void 0===i.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((r=i.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(n=n.replace("{botAlias}",_.extendedEncodeURIComponent(r)),void 0===i.botName)throw new Error("No value provided for input HTTP label: botName.");if((r=i.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",_.extendedEncodeURIComponent(r)),void 0===i.userId)throw new Error("No value provided for input HTTP label: userId.");if((r=i.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return n=n.replace("{userId}",_.extendedEncodeURIComponent(r)),void 0!==i.inputStream&&(o=i.inputStream),[2,new S.HttpRequest(te(te({},s.endpoint),{protocol:"https",method:"POST",headers:t,path:n,body:o}))]})})}(e,t)},ny.prototype.deserialize=function(e,t){return Lg(e,t)},ny);function ny(e){var t=Qg.call(this)||this;return t.input=e,t}var ry,oy=(ee(iy,ry=_.Command),iy.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(C.getSerdePlugin(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},{logger:{}})},iy.prototype.serialize=function(e,t){return function(s,a){return ie(this,void 0,void 0,function(){var t,n,r,o,i;return se(this,function(e){if(t={"Content-Type":"application/json"},n="/bot/{botName}/alias/{botAlias}/user/{userId}/text",void 0===s.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((r=s.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(n=n.replace("{botAlias}",_.extendedEncodeURIComponent(r)),void 0===s.botName)throw new Error("No value provided for input HTTP label: botName.");if((r=s.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",_.extendedEncodeURIComponent(r)),void 0===s.userId)throw new Error("No value provided for input HTTP label: userId.");if((r=s.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return n=n.replace("{userId}",_.extendedEncodeURIComponent(r)),i={},void 0!==s.inputText&&(i.inputText=s.inputText),void 0!==s.requestAttributes&&(i.requestAttributes=Bg(s.requestAttributes)),void 0!==s.sessionAttributes&&(i.sessionAttributes=Bg(s.sessionAttributes)),o=JSON.stringify(i),[2,new S.HttpRequest(te(te({},a.endpoint),{protocol:"https",method:"POST",headers:t,path:n,body:o}))]})})}(e,t)},iy.prototype.deserialize=function(e,t){return jg(e,t)},iy);function iy(e){var t=ry.call(this)||this;return t.input=e,t}var sy,ay,uy=(sy=function(e,t){return(sy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}sy(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),cy=new x.ConsoleLogger("AWSLexProvider"),ly=(uy(py,ay=Ag),py.prototype.getProviderName=function(){return"AWSLexProvider"},py.prototype.reportBotStatus=function(e,t){var n=this;cy.debug("postContent state",e.dialogState),"ReadyForFulfillment"!==e.dialogState&&"Fulfilled"!==e.dialogState||("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t](null,{slots:e.slots})},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete(null,{slots:e.slots})},0)),"Failed"===e.dialogState&&("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t]("Bot conversation failed")},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete("Bot conversation failed")},0))},py.prototype.sendMessage=function(m,g){return e=this,u=function(){var t,n,r,o,i,s,a,u,c,l,p,d,e,h;return u=this,c=function(e){switch(e.label){case 0:return this._config[m]?[4,x.Credentials.get()]:[2,Promise.reject("Bot "+m+" does not exist")];case 1:if(!(t=e.sent()))return[2,Promise.reject("No credentials")];if(this.lexRuntimeServiceClient=new Dg({region:this._config[m].region,credentials:t,customUserAgent:x.getAmplifyUserAgent()}),"string"!=typeof g)return[3,6];n={botAlias:this._config[m].alias,botName:m,inputText:g,userId:t.identityId},cy.debug("postText to lex",g),e.label=2;case 2:return e.trys.push([2,4,,5]),r=new oy(n),[4,this.lexRuntimeServiceClient.send(r)];case 3:return s=e.sent(),this.reportBotStatus(s,m),[2,s];case 4:return o=e.sent(),[2,Promise.reject(o)];case 5:return[3,10];case 6:n="voice"===g.options.messageType?{botAlias:this._config[m].alias,botName:m,contentType:"audio/x-l16; sample-rate=16000",inputStream:g.content,userId:t.identityId,accept:"audio/mpeg"}:{botAlias:this._config[m].alias,botName:m,contentType:"text/plain; charset=utf-8",inputStream:g.content,userId:t.identityId,accept:"audio/mpeg"},cy.debug("postContent to lex",g),e.label=7;case 7:return e.trys.push([7,9,,10]),i=new ty(n),[4,this.lexRuntimeServiceClient.send(i)];case 8:return s=e.sent(),this.reportBotStatus(s,m),[2,s];case 9:return a=e.sent(),[2,Promise.reject(a)];case 10:return[2]}},h={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]},e={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function f(t){return function(e){return function(t){if(l)throw new TypeError("Generator is already executing.");for(;h;)try{if(l=1,p&&(d=2&t[0]?p.return:t[0]?p.throw||((d=p.return)&&d.call(p),0):p.next)&&!(d=d.call(p,t[1])).done)return d;switch(p=0,d&&(t=[2&t[0],d.value]),t[0]){case 0:case 1:d=t;break;case 4:return h.label++,{value:t[1],done:!1};case 5:h.label++,p=t[1],t=[0];continue;case 7:t=h.ops.pop(),h.trys.pop();continue;default:if(!(d=0<(d=h.trys).length&&d[d.length-1])&&(6===t[0]||2===t[0])){h=0;continue}if(3===t[0]&&(!d||t[1]>d[0]&&t[1]<d[3])){h.label=t[1];break}if(6===t[0]&&h.label<d[1]){h.label=d[1],d=t;break}if(d&&h.label<d[2]){h.label=d[2],h.ops.push(t);break}d[2]&&h.ops.pop(),h.trys.pop();continue}t=c.call(u,h)}catch(e){t=[6,e],p=0}finally{l=d=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},py.prototype.onComplete=function(e,t){if(!this._config[e])throw new ErrorEvent("Bot "+e+" does not exist");this._botsCompleteCallback[e]=t},py);function py(e){void 0===e&&(e={});var t=ay.call(this,e)||this;return t._botsCompleteCallback={},t}var dy=function(){return(dy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},hy=new x.ConsoleLogger("Interactions");function fy(e){this._options=e,hy.debug("Interactions Options",this._options),this._pluggables={},x.Amplify.register(this)}var my=(fy.prototype.getModuleName=function(){return"Interactions"},fy.prototype.configure=function(e){var t=this,n=e?e.Interactions||e:{};hy.debug("configure Interactions",{opt:n}),this._options=dy(dy({bots:{}},n),n.Interactions);var r=this._options.aws_bots_config,o=this._options.bots;return!Object.keys(o).length&&r&&Array.isArray(r)&&r.forEach(function(e){t._options.bots[e.name]=e}),!this._pluggables.AWSLexProvider&&o&&Object.keys(o).map(function(e){return o[e]}).find(function(e){return!e.providerName||"AWSLexProvider"===e.providerName})&&(this._pluggables.AWSLexProvider=new ly),Object.keys(this._pluggables).map(function(e){t._pluggables[e].configure(t._options.bots)}),this._options},fy.prototype.addPluggable=function(e){if(e&&"Interactions"===e.getCategory()){if(this._pluggables[e.getProviderName()])throw new Error("Bot "+e.getProviderName()+" already plugged");return e.configure(this._options.bots),void(this._pluggables[e.getProviderName()]=e)}},fy.prototype.send=function(c,l){return e=this,u=function(){var t,n,r,o,i,s,e,a;return n=this,r=function(e){switch(e.label){case 0:if(!this._options.bots||!this._options.bots[c])throw new Error("Bot "+c+" does not exist");if(t=this._options.bots[c].providerName||"AWSLexProvider",!this._pluggables[t])throw new Error("Bot "+t+" does not have valid pluggin did you try addPluggable first?");return[4,this._pluggables[t].sendMessage(c,l)];case 1:return[2,e.sent()]}},a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function u(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(a=(a=s=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())});var e,s,a,u},fy.prototype.onComplete=function(e,t){if(!this._options.bots||!this._options.bots[e])throw new Error("Bot "+e+" does not exist");var n=this._options.bots[e].providerName||"AWSLexProvider";if(!this._pluggables[n])throw new Error("Bot "+n+" does not have valid pluggin did you try addPluggable first?");this._pluggables[n].onComplete(e,t)},new fy(null)),gy=function(){return(gy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},yy=new x.ConsoleLogger("AbstractXRProvider"),vy=(by.prototype.configure=function(e){return void 0===e&&(e={}),this._config=gy(gy({},e),this._config),yy.debug("configure "+this.getProviderName(),this._config),this.options},by.prototype.getCategory=function(){return"XR"},Object.defineProperty(by.prototype,"options",{get:function(){return gy({},this._config)},enumerable:!0,configurable:!0}),by);function by(e){void 0===e&&(e={}),this._config=e}var wy,_y,Sy=(wy=function(e,t){return(wy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}wy(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Cy=(Sy(Ey,_y=Error),Ey);function Ey(){return null!==_y&&_y.apply(this,arguments)||this}var Iy,Ay=(Sy(Py,Iy=Cy),Py);function Py(){return null!==Iy&&Iy.apply(this,arguments)||this}var ky,Oy=(Sy(Ty,ky=Cy),Ty);function Ty(){return null!==ky&&ky.apply(this,arguments)||this}var xy,Ny=(Sy(Uy,xy=Cy),Uy);function Uy(){return null!==xy&&xy.apply(this,arguments)||this}var My,Ry=(Sy(Dy,My=Cy),Dy);function Dy(){return null!==My&&My.apply(this,arguments)||this}var Fy,Ly=(Sy(jy,Fy=Cy),jy);function jy(){return null!==Fy&&Fy.apply(this,arguments)||this}var By,Vy=(Sy(qy,By=Cy),qy);function qy(){return null!==By&&By.apply(this,arguments)||this}function zy(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Hy(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Ky,Gy,Wy=(Ky=function(e,t){return(Ky=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Ky(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),$y=function(){return($y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Jy=new x.ConsoleLogger("SumerianProvider"),Yy=(Wy(Zy,Gy=vy),Zy.prototype.getProviderName=function(){return"SumerianProvider"},Zy.prototype.loadScript=function(r){return zy(this,void 0,void 0,function(){return Hy(this,function(e){return[2,new Promise(function(t,n){var e=document.createElement("script");e.src=r,e.addEventListener("load",function(e){t()}),e.addEventListener("error",function(e){n(new Error("Failed to load script: "+r))}),document.head.appendChild(e)})]})})},Zy.prototype.loadScene=function(k,O,T){return zy(this,void 0,void 0,function(){var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m,g,y,v,b,w,_,S,C,E,I,A,P;return Hy(this,function(e){switch(e.label){case 0:if(!k)throw s="No scene name passed into loadScene",Jy.error(s),new Ly(s);if(!O)throw s="No dom element id passed into loadScene",Jy.error(s),new Ry(s);if(!(t=document.getElementById(O)))throw s="DOM element id, "+O+" not found",Jy.error(s),new Ry(s);if(!(n=this.getScene(k)).sceneConfig)throw s="No scene config configured for scene: "+k,Jy.error(s),new Ly(s);if(r=n.sceneConfig.url,o=n.sceneConfig.sceneId,n.sceneConfig.hasOwnProperty("region"))i=n.sceneConfig.region;else{if(!this.options.hasOwnProperty("region"))throw s="No region configured for scene: "+k,Jy.error(s),new Ly(s);i=this.options.region}a={region:i,customUserAgent:x.Constants.userAgent+"-SumerianScene"},u={headers:{"X-Amz-User-Agent":x.Constants.userAgent}},c=r,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,x.Credentials.get()];case 2:return l=e.sent(),a.credentials=l,p={secret_key:l.secretAccessKey,access_key:l.accessKeyId,session_token:l.sessionToken},d={region:i,service:"sumerian"},h=x.Signer.sign({method:"GET",url:r},p,d),u.headers=$y($y({},u.headers),h.headers),c=h.url,[3,4];case 3:return e.sent(),Jy.debug("No credentials available, the request will be unsigned"),[3,4];case 4:return[4,fetch(c,u)];case 5:return[4,(f=e.sent()).json()];case 6:if(m=e.sent(),403===f.status)throw m.message?(Jy.error("Failure to authenticate user: "+m.message),new Ly("Failure to authenticate user: "+m.message)):(Jy.error("Failure to authenticate user"),new Ly("Failure to authenticate user"));return g=m.bundleData[o],[4,fetch(g.url,{headers:g.headers})];case 7:return[4,e.sent().json()];case 8:y=e.sent(),e.label=9;case 9:return e.trys.push([9,11,,12]),[4,this.loadScript(y[o].bootstrapperUrl)];case 10:return e.sent(),[3,12];case 11:throw v=e.sent(),Jy.error(v),new Ly(v);case 12:return b=T.progressCallback?T.progressCallback:void 0,w=n.publishParamOverrides?n.publishParamOverrides:void 0,_={element:t,sceneId:o,sceneBundle:y,apiResponse:m,progressCallback:b,publishParamOverrides:w,awsSDKConfigOverride:a},[4,window.SumerianBootstrapper.loadScene(_)];case 13:S=e.sent(),n.sceneController=S,n.isLoaded=!0;try{for(C=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(S.sceneLoadWarnings),E=C.next();!E.done;E=C.next())I=E.value,Jy.warn("loadScene warning: "+I)}catch(e){A={error:e}}finally{try{E&&!E.done&&(P=C.return)&&P.call(C)}finally{if(A)throw A.error}}return[2]}})})},Zy.prototype.isSceneLoaded=function(e){return this.getScene(e).isLoaded||!1},Zy.prototype.getScene=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw Jy.error(t),new Ay(t)}if(!e)throw t="No scene name was passed",Jy.error(t),new Oy(t);if(this.options.scenes[e])return this.options.scenes[e];throw t="Scene '"+e+"' is not configured",Jy.error(t),new Oy(t)},Zy.prototype.getSceneController=function(e){if(!this.options.scenes){var t="No scenes were defined in the configuration";throw Jy.error(t),new Ay(t)}var n=this.options.scenes[e];if(!n)throw t="Scene '"+e+"' is not configured",Jy.error(t),new Oy(t);var r=n.sceneController;if(r)return r;throw t="Scene controller for '"+e+"' has not been loaded",Jy.error(t),new Ny(t)},Zy.prototype.isVRCapable=function(e){return this.getSceneController(e).vrCapable},Zy.prototype.isVRPresentationActive=function(e){return this.getSceneController(e).vrPresentationActive},Zy.prototype.start=function(e){this.getSceneController(e).start()},Zy.prototype.enterVR=function(e){this.getSceneController(e).enterVR()},Zy.prototype.exitVR=function(e){this.getSceneController(e).exitVR()},Zy.prototype.isMuted=function(e){return this.getSceneController(e).muted},Zy.prototype.setMuted=function(e,t){this.getSceneController(e).muted=t},Zy.prototype.onSceneEvent=function(e,t,n){this.getSceneController(e).on(t,n)},Zy.prototype.enableAudio=function(e){this.getSceneController(e).enableAudio()},Zy);function Zy(e){return void 0===e&&(e={}),Gy.call(this,e)||this}function Qy(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function Xy(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var ev=new x.ConsoleLogger("XR");function tv(e){this._options=e,ev.debug("XR Options",this._options),this._defaultProvider="SumerianProvider",this._pluggables={},this.addPluggable(new Yy),x.Amplify.register(this)}var nv=(tv.prototype.configure=function(e){var o=this,i=e?e.XR||e:{};return ev.debug("configure XR",{opt:i}),this._options=Object.assign({},this._options,i),Object.entries(this._pluggables).map(function(e){var t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e,2),n=t[0],r=t[1];n!==o._defaultProvider||i[o._defaultProvider]?r.configure(o._options[n]):r.configure(o._options)}),this._options},tv.prototype.addPluggable=function(t){return Qy(this,void 0,void 0,function(){return Xy(this,function(e){return t&&"XR"===t.getCategory()?[2,(this._pluggables[t.getProviderName()]=t).configure(this._options)]:[2]})})},tv.prototype.loadScene=function(t,n,r,o){return void 0===r&&(r={}),void 0===o&&(o=this._defaultProvider),Qy(this,void 0,void 0,function(){return Xy(this,function(e){switch(e.label){case 0:if(!this._pluggables[o])throw new Vy("Provider '"+o+"' not configured");return[4,this._pluggables[o].loadScene(t,n,r)];case 1:return[2,e.sent()]}})})},tv.prototype.isSceneLoaded=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Vy("Provider '"+t+"' not configured");return this._pluggables[t].isSceneLoaded(e)},tv.prototype.getSceneController=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Vy("Provider '"+t+"' not configured");return this._pluggables[t].getSceneController(e)},tv.prototype.isVRCapable=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Vy("Provider '"+t+"' not configured");return this._pluggables[t].isVRCapable(e)},tv.prototype.isVRPresentationActive=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Vy("Provider '"+t+"' not configured");return this._pluggables[t].isVRPresentationActive(e)},tv.prototype.start=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Vy("Provider '"+t+"' not configured");return this._pluggables[t].start(e)},tv.prototype.enterVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Vy("Provider '"+t+"' not configured");return this._pluggables[t].enterVR(e)},tv.prototype.exitVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Vy("Provider '"+t+"' not configured");return this._pluggables[t].exitVR(e)},tv.prototype.isMuted=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Vy("Provider '"+t+"' not configured");return this._pluggables[t].isMuted(e)},tv.prototype.setMuted=function(e,t,n){if(void 0===n&&(n=this._defaultProvider),!this._pluggables[n])throw new Vy("Provider '"+n+"' not configured");return this._pluggables[n].setMuted(e,t)},tv.prototype.onSceneEvent=function(e,t,n,r){if(void 0===r&&(r=this._defaultProvider),!this._pluggables[r])throw new Vy("Provider '"+r+"' not configured");return this._pluggables[r].onSceneEvent(e,t,n)},tv.prototype.enableAudio=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new Vy("Provider '"+t+"' not configured");return this._pluggables[t].enableAudio(e)},new tv(null)),rv=(ov.prototype.auth=function(){return this._auth||Yp},ov.prototype.analytics=function(){return this._analytics||Pu},ov.prototype.storage=function(){return this._storage||kh},ov.prototype.api=function(){return this._api||Cg},ov.prototype.interactions=function(){return this._interactions||my},ov.prototype.cache=function(){return this._cache},ov.prototype.pubsub=function(){return this._pubsub||lg},ov.prototype.logger=function(e,t){return new this._logger(e,t)},ov.prototype.xr=function(){return this._xr||nv},ov.prototype.i18n=function(){return this._i18n},ov.prototype.authState=function(){return this._authState},ov.prototype.setAuthState=function(e){this._authState.next(e)},ov.decorators=[{type:h.Injectable}],ov.ctorParameters=function(){return[{type:void 0,decorators:[{type:h.Inject,args:["modules"]},{type:h.Optional}]}]},ov);function ov(e){void 0===e&&(e={}),this.modules=e,this._authState=new v.Subject,this.authStateChange$=this._authState.asObservable();var t,n,r,o,i,s,a,u,c,l,p,d,h,f,m,g,y=e||Q;t=this._authState,n=y.Auth,r=t,n.currentAuthenticatedUser().then(function(e){cs.debug("has authenticated user",e),r.next({state:"signedIn",user:e})}).catch(function(e){cs.debug("no authenticated user",e),r.next({state:"signedOut",user:null})}),o=t,i=x.Amplify.configure(null),b.has(i,"Auth.oauth")&&x.Hub.listen("auth",{onHubCapsule:function(e){var t=e.channel,n=e.payload;if("auth"===t){var r=n.data.username;cs.debug("authentication oauth event",n),o.next({state:n.event,user:{username:r}})}}},"angularAuthListener"),s=t,u=(a=n).signIn,a.signIn=function(e,t){return u.call(a,e,t).then(function(e){return cs.debug("signIn success"),e.challengeName?(cs.debug("signIn challenge: "+e.challengeName),"NEW_PASSWORD_REQUIRED"===e.challengeName?s.next({state:"requireNewPassword",user:e}):"MFA_SETUP"===e.challengeName?s.next({state:"setupMFA",user:e}):"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?s.next({state:"confirmSignIn",user:e}):cs.debug("warning: unhandled challengeName "+e.challengeName)):s.next({state:"signedIn",user:e}),e}).catch(function(e){throw cs.debug("signIn error",e),e})},c=t,l=n.signOut,n.signOut=function(){return l.call(x.Amplify.Auth).then(function(e){return cs.debug("signOut success"),c.next({state:"signedOut",user:null}),e}).catch(function(e){throw cs.debug("signOut error",e),e})},p=t,h=(d=n).signUp,d.signUp=function(t,e,n,r){return h.call(d,t,e,n,r).then(function(e){return cs.debug("signUp success"),p.next({state:"confirmSignUp",user:{username:t}}),e}).catch(function(e){throw cs.debug("signUp error",e),e})},f=t,g=(m=n).confirmSignUp,m.confirmSignUp=function(t,e){return g.call(m,t,e).then(function(e){return cs.debug("confirmSignUp success"),f.next({state:"signIn",user:{username:t}}),e}).catch(function(e){throw cs.debug("confirmSignUp error",e),e})},this._auth=y.Auth,this._analytics=y.Analytics,this._storage=y.Storage,this._api=y.API,this._cache=y.Cache,this._pubsub=y.PubSub,this._interactions=y.Interactions,this._xr=y.XR,this._i18n=x.I18n,this._logger=x.Logger}var iv=(sv.prototype.ngOnInit=function(){var t=this;if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider");this.amplifyService.auth().currentAuthenticatedUser().then(function(e){"loading"===t.authState.state&&e&&t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){"loading"===t.authState.state&&t.amplifyService.setAuthState({state:"signIn",user:null})})},Object.defineProperty(sv.prototype,"data",{set:function(e){e.signUpConfig&&(this._signUpConfig=e.signUpConfig),e.hide&&(this.hide=e.hide),this._usernameAttributes=e.usernameAttributes||this._usernameAttributes||"username"},enumerable:!0,configurable:!0}),Object.defineProperty(sv.prototype,"signUpConfig",{set:function(e){this._signUpConfig=e},enumerable:!0,configurable:!0}),Object.defineProperty(sv.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e||"username"},enumerable:!0,configurable:!0}),sv.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){t.authState=e},function(){t.authState={state:"signIn",user:null}})},sv.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},sv.decorators=[{type:h.Component,args:[{selector:"amplify-authenticator-core",template:'\n  <div class="amplify-authenticator">\n    <amplify-auth-sign-in-core\n      *ngIf="!shouldHide(\'SignIn\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-in-core>\n\n    <amplify-auth-sign-up-core\n      *ngIf="!shouldHide(\'SignUp\')"\n      [authState]="authState"\n      [signUpConfig]="_signUpConfig"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-up-core>\n\n    <amplify-auth-confirm-sign-up-core\n      *ngIf="!shouldHide(\'ConfirmSignUp\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-up-core>\n\n    <amplify-auth-confirm-sign-in-core\n      *ngIf="!shouldHide(\'ConfirmSignIn\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-in-core>\n\n    <amplify-auth-forgot-password-core\n      *ngIf="!shouldHide(\'ForgotPassword\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-forgot-password-core>\n\n    <amplify-auth-greetings-core\n    *ngIf="!shouldHide(\'Greetings\')"\n    [authState]="authState"\n    [usernameAttributes]="_usernameAttributes"\n    ></amplify-auth-greetings-core>\n\n     <amplify-auth-require-new-password-core\n      *ngIf="!shouldHide(\'RequireNewPassword\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-require-new-password-core>\n  </div>\n'}]}],sv.ctorParameters=function(){return[{type:rv}]},sv.propDecorators={hide:[{type:h.Input}],data:[{type:h.Input}],signUpConfig:[{type:h.Input}],usernameAttributes:[{type:h.Input}]},sv);function sv(e){this.amplifyService=e,this.authState={state:"loading",user:null},this._signUpConfig={},this._usernameAttributes="username",this.hide=[],this.subscribe()}var av,uv,cv=((av=function(e,t){return(av=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}av(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(lv,uv=iv),lv.decorators=[{type:h.Component,args:[{selector:"amplify-authenticator-ionic",template:'\n<div class="amplify-authenticator amplify-authenticator-ionic ">\n\n<amplify-auth-sign-in-ionic\n  *ngIf="!shouldHide(\'SignIn\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-in-ionic>\n\n<amplify-auth-sign-up-ionic\n  *ngIf="!shouldHide(\'SignUp\')"\n  [authState]="authState"\n  [signUpConfig]="_signUpConfig"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-up-ionic>\n\n<amplify-auth-confirm-sign-up-ionic\n  *ngIf="!shouldHide(\'ConfirmSignUp\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-confirm-sign-up-ionic>\n\n<amplify-auth-confirm-sign-in-ionic\n  *ngIf="!shouldHide(\'ConfirmSignIn\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-confirm-sign-in-ionic>\n\n<amplify-auth-forgot-password-ionic\n  *ngIf="!shouldHide(\'ForgotPassword\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-forgot-password-ionic>\n\n<amplify-auth-greetings-ionic\n  *ngIf="!shouldHide(\'Greetings\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n></amplify-auth-greetings-ionic>\n\n<amplify-auth-require-new-password-ionic\n  *ngIf="!shouldHide(\'RequireNewPassword\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-require-new-password-ionic>\n</div>\n'}]}],lv.ctorParameters=function(){return[{type:rv}]},lv);function lv(e){var t=uv.call(this,e)||this;return t.amplifyService=e,t}var pv=(dv.prototype.ngOnInit=function(){this.loadComponent()},dv.prototype.ngOnDestroy=function(){},dv.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new us(cv,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}):new us(iv,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},dv.decorators=[{type:h.Component,args:[{selector:"amplify-authenticator",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],dv.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},dv.propDecorators={framework:[{type:h.Input}],hide:[{type:h.Input}],signUpConfig:[{type:h.Input}],usernameAttributes:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[ss]}]},dv);function dv(e){this.componentFactoryResolver=e,this.hide=[],this.usernameAttributes="username"}var hv="sign-in-section",fv="sign-in-header-section",mv="sign-in-body-section",gv="sign-in-password-input",yv="sign-in-forgot-password-link",vv="sign-in-sign-in-button",bv="sign-in-create-account-link",wv="authenticator-error",_v="sign-up-section",Sv="sign-up-header-section",Cv="sign-up-body-section",Ev="sign-up-non-phone-number-input",Iv="sign-up-create-account-button",Av="sign-up-sign-in-link",Pv="sign-up-sign-in-button",kv="sign-up-confirm-button",Ov="require-new-password-section",Tv="require-new-password-header-section",xv="require-new-password-body-section",Nv="require-new-password-new-password-input",Uv="require-new-password-back-to-sign-in-link",Mv="require-new-password-submit-button",Rv="username-input",Dv="email-input",Fv="phone-number-input",Lv="dial-code-select",jv="sign-out-button",Bv="confirm-sign-up-section",Vv="confirm-sign-up-header-section",qv="confirm-sign-up-body-section",zv="confirm-sign-up-username-input",Hv="confirm-sign-up-confirmation-code-input",Kv="confirm-sign-up-resend-code-link",Gv="confirm-sign-up-confirm-button",Wv="confirm-sign-up-back-to-sign-in-link",$v="confirm-sign-in-section",Jv="confirm-sign-in-header-section",Yv="confirm-sign-in-body-section",Zv="confirm-sign-in-code-input",Qv="confirm-sign-in-confirm-button",Xv="forgot-password-section",eb="forgot-password-header-section",tb="forgot-password-body-section",nb="forgot-password-submit-button",rb="forgot-password-send-code-button",ob="forgot-password-resend-code-link",ib="forgot-password-back-to-sign-in-link",sb="forgot-password-code-input",ab="forgot-password-new-password-input",ub='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+$v+'">\n    <div class="amplify-form-body" data-test="'+Yv+'">\n    <div class="amplify-form-header" data-test="'+Jv+'">{{ this.amplifyService.i18n().get(\'Confirm Sign in\') }}</div>\n      <div class="amplify-form-row" *ngIf="!shouldHide(\'SignIn\')">\n        <label class="amplify-input-label" for="code">\n          {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n        </label>\n        <input #code\n          (change)="setCode(code.value)"\n          (keyup)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          class="amplify-form-input"\n          type="text"\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n          data-test="'+Zv+'"\n        />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a \n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+"confirm-sign-in-back-to-sign-in-link"+'"\n              >\n                {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button\n            class="amplify-form-button"\n            data-test="'+Qv+'"\n            (click)="onConfirm()"\n            >\n              {{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n        </div>\n      </div>\n      </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',cb=(Object.defineProperty(lb.prototype,"data",{set:function(e){this.hide=e.hide?e.hide:this.hide,this._authState=e.authState,this._show="confirmSignIn"===e.authState.state},enumerable:!0,configurable:!0}),Object.defineProperty(lb.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignIn"===e.state},enumerable:!0,configurable:!0}),lb.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},lb.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},lb.prototype.setCode=function(e){this.code=e},lb.prototype.onConfirm=function(){var t=this,e=this._authState.user,n=e.challengeName,r="SOFTWARE_TOKEN_MFA"===n?n:null;this.amplifyService.auth().confirmSignIn(e,this.code,r).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){return t._setError(e)})},lb.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},lb.prototype.onAlertClose=function(){this._setError(null)},lb.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},lb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-confirm-sign-in-core",template:ub}]}],lb.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},lb.propDecorators={data:[{type:h.Input}],authState:[{type:h.Input}],hide:[{type:h.Input}]},lb);function lb(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("ConfiSignInComponent")}var pb,db,hb='\n<div class="amplify-form-container" *ngIf="_show" data-test="'+$v+'">\n  <div class="amplify-form-body" data-test="'+Yv+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+Jv+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Confirm your sign in code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (keyup)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+Zv+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button expand="block" color="primary"\n          (click)="onConfirm()"\n          data-test="'+Qv+'"\n        >{{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',fb=((pb=function(e,t){return(pb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}pb(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(mb,db=cb),mb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-confirm-sign-in-ionic",template:hb}]}],mb.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},mb);function mb(e){var t=db.call(this,e)||this;return t.amplifyService=e,t}var gb=(yb.prototype.ngOnInit=function(){this.loadComponent()},yb.prototype.ngOnDestroy=function(){},yb.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new us(fb,{authState:this.authState,hide:this.hide}):new us(cb,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},yb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-confirm-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],yb.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},yb.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],hide:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[ss]}]},yb);function yb(e){this.componentFactoryResolver=e,this.hide=[]}function vb(e,t){return 0<e.filter(function(e){return e===t}).length}function bb(e,t){return"+"+e+t.replace(/[-()]/g,"")}var wb={email:"Email",phone_number:"Phone Number",username:"Username"},_b='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+Bv+'">\n  <div class="amplify-form-body" data-test="'+qv+'">\n    <div\n      class="amplify-form-header"\n      data-test="'+Vv+'"\n    >\n      {{ this.amplifyService.i18n().get(\'Confirm Sign up\') }}</div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="amplifyUsername">\n        {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n      </label>\n      <input\n        #amplifyUsername\n        class="amplify-form-input"\n        type="text"\n        disabled\n        placeholder="{{ this.amplifyService.i18n().get(getUsernameLabel()) }}"\n        [value]="username"\n        data-test="'+zv+'"\n      />\n    </div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (change)="setCode(code.value)"\n        (keyup)="setCode(code.value)"\n        (keyup.enter)="onConfirm()"\n        class="amplify-form-input"\n        type="text"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n        data-test="'+Hv+'"\n      />\n      <span class="amplify-form-action">{{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a class="amplify-form-link"\n            (click)="onResend()"\n            data-test="'+Kv+'"\n          >{{ this.amplifyService.i18n().get(\'Resend Code\') }}</a></span>\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <div class="amplify-form-actions-left">\n          <a\n            class="amplify-form-link"\n            (click)="onSignIn()"\n            data-test="'+Wv+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n          </a>\n        </div>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button\n          class="amplify-form-button"\n          (click)="onConfirm()"\n          data-test="'+Gv+'"\n          >{{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n',Sb=(Object.defineProperty(Cb.prototype,"data",{set:function(e){this.hide=e.hide?e.hide:this.hide,this._authState=e.authState,this._show="confirmSignUp"===e.authState.state,this.username=e.authState.user&&e.authState.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(Cb.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignUp"===e.state,this.username=e.user&&e.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(Cb.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),Cb.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Cb.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Cb.prototype.setUsername=function(e){this.username=e},Cb.prototype.setCode=function(e){this.code=e},Cb.prototype.onConfirm=function(){var t=this;this.amplifyService.auth().confirmSignUp(this.username,this.code).then(function(){return t.logger.info("confirm success")}).catch(function(e){return t._setError(e)})},Cb.prototype.onResend=function(){var t=this;this.amplifyService.auth().resendSignUp(this.username).then(function(){return t.logger.info("code resent")}).catch(function(e){return t._setError(e)})},Cb.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},Cb.prototype.onAlertClose=function(){this._setError(null)},Cb.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},Cb.prototype.getUsernameLabel=function(){return wb[this._usernameAttributes]||this._usernameAttributes},Cb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-confirm-sign-up-core",template:_b}]}],Cb.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},Cb.propDecorators={data:[{type:h.Input}],hide:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}]},Cb);function Cb(e){this.amplifyService=e,this._usernameAttributes="username",this.hide=[],this.logger=this.amplifyService.logger("ConfirmSignUpComponent")}var Eb,Ib,Ab='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+Bv+'"\n  >\n  <div class="amplify-form-body" data-test="'+qv+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+Vv+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Confirm your sign up code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n        </ion-label>\n        <ion-input type="text"\n          class="amplify-form-input"\n          (keyup)="setUsername($event.target.value)"\n          [value]="username"\n          data-test="'+zv+'"\n        ></ion-input>\n      </ion-item>\n\n      <ion-item lines="none">\n        <ion-label  class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (keyup)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+Hv+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button\n          expand="block"\n          color="primary"\n          (click)="onConfirm()"\n          data-test="'+Gv+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+Wv+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onResend()"\n          data-test="'+Kv+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',Pb=((Eb=function(e,t){return(Eb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Eb(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(kb,Ib=Sb),kb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-confirm-sign-up-ionic",template:Ab}]}],kb.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},kb);function kb(e){var t=Ib.call(this,e)||this;return t.amplifyService=e,t}var Ob,Tb,xb=(Nb.prototype.ngOnInit=function(){this.loadComponent()},Nb.prototype.ngOnDestroy=function(){},Nb.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new us(Pb,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}):new us(Sb,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},Nb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-confirm-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],Nb.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},Nb.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}],hide:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[ss]}]},Nb);function Nb(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}(Tb=Ob=Ob||{}).EMAIL="email",Tb.PHONE_NUMBER="phone_number",Tb.USERNAME="username";var Ub='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+hv+'">\n    <div class="amplify-form-body" data-test="'+mv+'">\n      <div class="amplify-form-header" data-test="'+fv+'">\n        {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n      </div>\n      <amplify-auth-username-field-core\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-core>\n      <div class="amplify-form-row amplify-signin-password">\n        <label class="amplify-input-label" for="passwordField">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </label>\n        <input #passwordField\n          (keyup)="setPassword(passwordField.value)"\n          (keyup.enter)="onSignIn()"\n          class="amplify-form-input"\n          type="password"\n          required\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your password\') }}"\n          data-test="'+gv+'"\n        />\n        <span class="amplify-form-action" *ngIf="!shouldHide(\'ForgotPassword\')">\n          {{ this.amplifyService.i18n().get(\'Forgot Password?\') }}\n          <a class="amplify-form-link"\n            (click)="onForgotPassword()"\n            data-test="'+yv+'"\n          >{{ this.amplifyService.i18n().get(\'Reset password\') }}</a>\n        </span>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            (click)="onSignIn()"\n            data-test="'+vv+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignUp\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'No account?\') }}\n            <a\n              class="amplify-form-link"\n              (click)="onSignUp()"\n              data-test="'+bv+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Create account\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div\n        class="amplify-alert-message"\n        data-test="'+wv+'"\n        >\n          {{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',Mb=(Object.defineProperty(Rb.prototype,"data",{set:function(e){this.hide=e.hide?e.hide:this.hide,this._usernameAttributes=e.usernameAttributes,this._authState=e.authState,this._show=vb(["signIn","signedOut","signedUp"],e.authState.state)},enumerable:!0,configurable:!0}),Object.defineProperty(Rb.prototype,"authState",{set:function(e){this._authState=e,this._show=vb(["signIn","signedOut","signedUp"],e.state),this.username=e.user&&e.user.username||"",this.email=e.user&&e.user.email||"",this.country_code=e.user&&e.user.country_code?e.user.country_code:this.country_code,this.local_phone_number=e.user&&e.user.local_phone_number||""},enumerable:!0,configurable:!0}),Object.defineProperty(Rb.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),Rb.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Rb.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Rb.prototype.setUsername=function(e){this.username=e},Rb.prototype.setPassword=function(e){this.password=e},Rb.prototype.onSignIn=function(){var t=this;this.amplifyService.auth().signIn(this.getSignInUsername(),this.password).then(function(e){"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?t.amplifyService.setAuthState({state:"confirmSignIn",user:e}):"NEW_PASSWORD_REQUIRED"===e.challengeName?t.amplifyService.setAuthState({state:"requireNewPassword",user:e}):"CUSTOM_CHALLENGE"===e.challengeName&&e.challengeParam&&"true"===e.challengeParam.trigger&&t.amplifyService.setAuthState({state:"customConfirmSignIn",user:e})}).catch(function(e){t._setError(e)})},Rb.prototype.onAlertClose=function(){this._setError(null)},Rb.prototype.getUserObj=function(){return this.username||this.email||this.local_phone_number?{username:this.username,email:this.email,local_phone_number:this.local_phone_number,courtry_code:this.country_code}:null},Rb.prototype.onForgotPassword=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"forgotPassword",user:e})},Rb.prototype.onSignUp=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"signUp",user:e})},Rb.prototype._setError=function(e){e?(this.errorMessage=e.message||e,this.logger.error(this.errorMessage)):this.errorMessage=null},Rb.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},Rb.prototype.getSignInUsername=function(){switch(this._usernameAttributes){case Ob.EMAIL:return this.email;case Ob.PHONE_NUMBER:return bb(this.country_code,this.local_phone_number);default:return this.username}},Rb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-sign-in-core",template:Ub}]}],Rb.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},Rb.propDecorators={data:[{type:h.Input}],hide:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}]},Rb);function Rb(e){this.amplifyService=e,this._usernameAttributes="username",this.local_phone_number="",this.country_code="1",this.email="",this.signInUsername="",this.hide=[],this.logger=this.amplifyService.logger("SignInComponent"),this.onUsernameFieldChanged=this.onUsernameFieldChanged.bind(this)}var Db,Fb,Lb='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+hv+'"\n  >\n  <div class="amplify-form-body" data-test="'+mv+'">\n    <div class="amplify-form-header" data-test="'+fv+'">\n      {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n    </div>\n    <ion-list lines="none">\n      <amplify-auth-username-field-ionic\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-ionic>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label" for="password" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (keyup)="setPassword(password.value)"\n          (keyup.enter)="onSignIn()"\n          data-test="'+gv+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignIn()"\n          data-test="'+vv+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</ion-button>\n      </div>\n\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'No account?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onSignUp()"\n            data-test="'+bv+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Create account\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'ForgotPassword\')">\n          <a class="amplify-form-link" (click)="onForgotPassword()" data-test="'+yv+'">\n            {{ this.amplifyService.i18n().get(\'Reset Password\') }}\n          </a>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',jb=((Db=function(e,t){return(Db=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Db(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Bb,Fb=Mb),Bb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-sign-in-ionic",template:Lb}]}],Bb.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},Bb);function Bb(e){var t=Fb.call(this,e)||this;return t.amplifyService=e,t}var Vb=(qb.prototype.ngOnInit=function(){this.loadComponent()},qb.prototype.ngOnDestroy=function(){},qb.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework?new us(jb,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new us(Mb,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},qb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],qb.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},qb.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}],hide:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[ss]}]},qb);function qb(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var zb=[{label:"Username",key:"username",required:!1,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:4}],Hb=[{label:"Email",key:"email",required:!0,type:"email",displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:3}],Kb=[{label:"Phone Number",key:"phone_number",required:!0,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3}],Gb='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+_v+'">\n    <div class="amplify-form-body" data-test="'+Cv+'">\n      <div\n        class="amplify-form-header"\n        data-test="'+Sv+'"\n        >{{ this.amplifyService.i18n().get(this.header) }}</div>\n      <div class="amplify-form-row" *ngFor="let field of signUpFields">\n        <div *ngIf="field.key !== \'phone_number\'">\n          <label class="amplify-input-label">\n            {{ this.amplifyService.i18n().get(field.label) }}\n            <span *ngIf="field.required">*</span>\n          </label>\n          <input #{{field.key}}\n            class="amplify-form-input"\n            [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n            type={{field.type}}\n            [placeholder]="this.amplifyService.i18n().get(field.label)"\n            [(ngModel)]="user[field.key]"\n            name="field.key"\n            data-test="'+Ev+'"\n            />\n            <div *ngIf="field.key === \'password\'" class="amplify-form-extra-details">\n              {{passwordPolicy}}\n            </div>\n        </div>\n        <div *ngIf="field.key === \'phone_number\'">\n          <amplify-auth-phone-field-core\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-core>\n        </div>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignIn\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n            <a class="amplify-form-link" (click)="onSignIn()" data-test="'+Av+'">\n              {{ this.amplifyService.i18n().get(\'Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n          (click)="onSignUp()"\n          data-test="'+Iv+'"\n          >{{ this.amplifyService.i18n().get(\'Create Account\') }}</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',Wb=(Object.defineProperty($b.prototype,"data",{set:function(e){this._authState=e.authState,this._show="signUp"===e.authState.state,this._usernameAttributes=e.usernameAttributes,e.signUpConfig&&(this._signUpConfig=e.signUpConfig,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._usernameAttributes===Ob.EMAIL?(this.signUpFields=Hb,this.defaultSignUpFields=Hb):this._usernameAttributes===Ob.PHONE_NUMBER&&(this.signUpFields=Kb,this.defaultSignUpFields=Kb),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),Object.defineProperty($b.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e,this._usernameAttributes===Ob.EMAIL?(this.signUpFields=Hb,this.defaultSignUpFields=Hb):this._usernameAttributes===Ob.PHONE_NUMBER&&(this.signUpFields=Kb,this.defaultSignUpFields=Kb)},enumerable:!0,configurable:!0}),Object.defineProperty($b.prototype,"authState",{set:function(e){this._authState=e,this._show="signUp"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty($b.prototype,"signUpConfig",{set:function(e){e&&(this._signUpConfig=e,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),$b.prototype.ngOnInit=function(){this.amplifyService.auth()||this.logger.warn("Auth module not registered on AmplifyService provider"),this.sortFields()},$b.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},$b.prototype.onSignUp=function(){var r=this,e=this.validate();if(e&&0<e.length)return this._setError("The following fields need to be filled out: "+e.join(", "));this.user.attributes={},this.signUpFields.find(function(e){return"phone_number"===e.key})&&(this.user.phone_number=bb(this.country_code,this.local_phone_number));var t=Object.keys(this.user),o=t.map(function(e){return r.user[e]});t.forEach(function(e,t){if("username"!==e&&"password"!==e&&"attributes"!==e){var n=(r.needPrefix(e)?"custom:":"")+e;r.user.attributes[n]=o[t]}});var n=!1;if(this.signUpFields.forEach(function(e){e.label===r.getUsernameLabel()&&(r.amplifyService.logger("Changing the username to the value of "+e.label,"DEBUG"),r.user.username=r.user.attributes[e.key]||r.user.username,n=!0)}),!n&&!this.user.username)throw new Error("Couldn't find the label: "+this.getUsernameLabel()+", in sign up fields according to usernameAttributes!");this.amplifyService.auth().signUp(this.user).then(function(e){var t=r.user.username;r.user={},r.onAlertClose(),r.amplifyService.setAuthState({state:"confirmSignUp",user:{username:t}})}).catch(function(e){return r._setError(e)})},$b.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},$b.prototype.needPrefix=function(t){var e=this.signUpFields.find(function(e){return e.key===t});return 0!==t.indexOf("custom:")?e.custom:(0===t.indexOf("custom:")&&!1===e.custom&&this.logger.warn("Custom prefix prepended to key but custom field flag is set to false"),null)},$b.prototype.onConfirmSignUp=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"confirmSignUp",user:{username:this.user.username}})},$b.prototype.sortFields=function(){var n=this;0<this.hiddenFields.length&&(this.defaultSignUpFields=this.defaultSignUpFields.filter(function(e){return!n.hiddenFields.includes(e.key)})),this._signUpConfig&&this._signUpConfig.signUpFields&&0<this._signUpConfig.signUpFields.length&&(this._signUpConfig.hideAllDefaults||this.defaultSignUpFields.forEach(function(t,e){-1===n.signUpFields.findIndex(function(e){return e.key===t.key})&&n.signUpFields.push(t)}),this.signUpFields.sort(function(e,t){return e.displayOrder&&t.displayOrder?e.displayOrder<t.displayOrder||!(e.displayOrder>t.displayOrder)&&e.key<t.key?-1:1:!e.displayOrder&&t.displayOrder?1:e.displayOrder&&!t.displayOrder?-1:e.displayOrder||t.displayOrder?void 0:e.key<t.key?-1:1}),this.signUpFields=this.removeHiddenFields())},$b.prototype.onAlertClose=function(){this._setError(null)},$b.prototype.removeHiddenFields=function(){return this.signUpFields.filter(function(e){return!e.displayOrder||-1!==e.displayOrder})},$b.prototype.validate=function(){var t=this,n=[];return this.signUpFields.map(function(e){"phone_number"!==e.key?e.required&&!t.user[e.key]?(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label))):e.invalid=!1:!e.required||t.country_code&&t.local_phone_number?e.invalid=!1:(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label)))}),n},$b.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},$b.prototype.getUsernameLabel=function(){return wb[this._usernameAttributes]||this._usernameAttributes},$b.prototype.onPhoneFieldChanged=function(e){this.country_code=e.country_code,this.local_phone_number=e.local_phone_number},$b.decorators=[{type:h.Component,args:[{selector:"amplify-auth-sign-up-core",template:Gb}]}],$b.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},$b.propDecorators={data:[{type:h.Input}],hide:[{type:h.Input}],usernameAttributes:[{type:h.Input}],authState:[{type:h.Input}],signUpConfig:[{type:h.Input}]},$b);function $b(e){this.amplifyService=e,this._usernameAttributes="username",this.user={},this.country_code="1",this.header="Create a new account",this.defaultSignUpFields=zb,this.signUpFields=this.defaultSignUpFields,this.hiddenFields=[],this.hide=[],this.logger=this.amplifyService.logger("SignUpComponent")}var Jb,Yb,Zb='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+_v+'"\n  >\n  <div class="amplify-form-body" data-test="'+Cv+'">\n    <div class="amplify-form-header" data-test="'+Sv+'">\n      {{ this.amplifyService.i18n().get(this.header) }}</div>\n    <ion-list lines="none">\n      <ion-item lines="none" *ngFor="let field of signUpFields">\n        <ion-label class="amplify-input-label"\n        position="stacked"\n        *ngIf="field.key !== \'phone_number\'"\n        >\n          {{ this.amplifyService.i18n().get(field.label) }}\n          <span *ngIf="field.required">*</span>\n        </ion-label>\n        <ion-input\n          [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n          *ngIf="field.key !== \'phone_number\'"\n          #{{field.key}}\n          type="text"\n          class="amplify-form-input"\n          type={{field.type}}\n          [placeholder]="this.amplifyService.i18n().get(field.label)"\n          (keyup)="setProp($event.target)"\n          name={{field.key}}\n          data-test="'+Ev+'"\n        ></ion-input>\n        <ion-content *ngIf="field.key === \'phone_number\'" class="amplify-phone-ion-content">\n          <amplify-auth-phone-field-ionic\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-ionic>\n        </ion-content>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignUp()"\n          data-test="'+Iv+'"\n        >{{ this.amplifyService.i18n().get(\'Create Account\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup">\n          {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n          <a class="amplify-form-link" (click)="onSignIn()" data-test="'+Pv+'">\n            {{ this.amplifyService.i18n().get(\'Sign In\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'Have a code?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onConfirmSignUp()"\n            data-test="'+kv+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Confirm\') }}\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',Qb=((Jb=function(e,t){return(Jb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Jb(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Xb,Yb=Wb),Xb.prototype.setProp=function(e){return this.user[e.name]=e.value},Xb.decorators=[{type:h.Component,args:[{selector:"amplify-auth-sign-up-ionic",template:Zb}]}],Xb.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},Xb);function Xb(e){var t=Yb.call(this,e)||this;return t.amplifyService=e,t}var ew=(tw.prototype.ngOnInit=function(){this.loadComponent()},tw.prototype.ngOnDestroy=function(){},tw.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new us(Qb,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}):new us(Wb,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},tw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],tw.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},tw.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],signUpConfig:[{type:h.Input}],usernameAttributes:[{type:h.Input}],hide:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[ss]}]},tw);function tw(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var nw='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+Ov+'">\n  <div class="amplify-form-body" data-test="'+xv+'">\n  <div class="amplify-form-header" data-test="'+Tv+'">\n    {{ this.amplifyService.i18n().get(\'You are required to update your password\') }}\n  </div>\n  <div class="amplify-form-row">\n    <label class="amplify-input-label" for="password">\n      {{ this.amplifyService.i18n().get(\'Password *\') }}\n    </label>\n    <input #password\n      (keyup)="setPassword(password.value)"\n      (keyup.enter)="onSubmit()"\n      class="amplify-form-input"\n      type="password"\n      placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n      data-test="'+Nv+'"\n    />\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <a class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+Uv+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</a>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button class="amplify-form-button"\n          (click)="onSubmit()"\n          data-test="'+Mv+'"\n        >{{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n<div class="amplify-alert-body">\n  <span class="amplify-alert-icon">&#9888;</span>\n  <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n  <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n</div>\n</div>\n</div>\n',rw=(Object.defineProperty(ow.prototype,"authState",{set:function(e){this._authState=e,this._show="requireNewPassword"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty(ow.prototype,"data",{set:function(e){this._authState=e.authState,this._show="requireNewPassword"===e.authState.state,this.hide=e.hide?e.hide:this.hide},enumerable:!0,configurable:!0}),ow.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},ow.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},ow.prototype.setPassword=function(e){this.password=e},ow.prototype.onSubmit=function(){var t=this,e=this._authState.user,n=e.challengeParam.requiredAttributes;this.amplifyService.auth().completeNewPassword(e,this.password,n).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},ow.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},ow.prototype.onAlertClose=function(){this._setError(null)},ow.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},ow.decorators=[{type:h.Component,args:[{selector:"amplify-auth-require-new-password-core",template:nw}]}],ow.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},ow.propDecorators={authState:[{type:h.Input}],hide:[{type:h.Input}],data:[{type:h.Input}]},ow);function ow(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("RequireNewPasswordComponent")}var iw,sw,aw='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+Ov+'"\n  >\n  <div class="amplify-form-body" data-test="'+xv+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+Tv+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (keyup)="setPassword(password.value)"\n          (keyup.enter)="onSubmit()"\n          data-test="'+Nv+'"\n        ></ion-input>\n      </ion-item>\n\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSignIn()"\n          data-test="'+Uv+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSubmit()"\n          data-test="'+Mv+'"\n        >Submit</ion-button>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ errorMessage }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',uw=((iw=function(e,t){return(iw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}iw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(cw,sw=rw),cw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-require-new-password-ionic",template:aw}]}],cw.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},cw);function cw(e){var t=sw.call(this,e)||this;return t.amplifyService=e,t}var lw=(pw.prototype.ngOnInit=function(){this.loadComponent()},pw.prototype.ngOnDestroy=function(){},pw.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new us(uw,{authState:this.authState,hide:this.hide}):new us(rw,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},pw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-require-new-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],pw.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},pw.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],hide:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[ss]}]},pw);function pw(e){this.componentFactoryResolver=e,this.hide=[]}var dw='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <a class="amplify-form-link amplify-greeting-sign-out"\n      (click)="onSignOut()"\n      data-test="'+jv+"\"\n    >{{ this.amplifyService.i18n().get('Sign Out') }}</a>\n</div>\n",hw=(Object.defineProperty(fw.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),fw.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},fw.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){return t.setAuthState(e)})},fw.prototype.setAuthState=function(e){this.authState=e,this.signedIn="signedIn"===e.state;var t="";e.user&&(t=this._usernameAttributes===Ob.EMAIL?e.user.attributes?e.user.attributes.email:e.user.username:this._usernameAttributes===Ob.PHONE_NUMBER&&e.user.attributes?e.user.attributes.phone_number:e.user.username),this.greeting=this.signedIn?this.amplifyService.i18n().get("Hello, {{username}}").replace("{{username}}",t):""},fw.prototype.onSignOut=function(){this.amplifyService.auth().signOut()},fw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-greetings-core",template:dw}]}],fw.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},fw.propDecorators={authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}]},fw);function fw(e){this.amplifyService=e,this._usernameAttributes="username",this.logger=this.amplifyService.logger("GreetingComponent"),this.subscribe()}var mw,gw,yw='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <ion-button\n        class="amplify-greeting-sign-out"\n        size="small"\n        *ngIf="signedIn"\n        (click)="onSignOut()"\n        data-test="'+jv+"\"\n      >{{ this.amplifyService.i18n().get('Sign Out') }}</ion-button>\n</div>\n",vw=((mw=function(e,t){return(mw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}mw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(bw,gw=hw),bw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-greetings-ionic",template:yw}]}],bw.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},bw);function bw(e){var t=gw.call(this,e)||this;return t.amplifyService=e,t}var ww=(_w.prototype.ngOnInit=function(){this.loadComponent()},_w.prototype.ngOnDestroy=function(){},_w.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new us(vw,{authState:this.authState,usernameAttributes:this.usernameAttributes}):new us(hw,{authState:this.authState,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},_w.decorators=[{type:h.Component,args:[{selector:"amplify-auth-greetings",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],_w.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},_w.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[ss]}]},_w);function _w(e){this.componentFactoryResolver=e,this.usernameAttributes="username"}var Sw='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+Xv+'">\n    <div class="amplify-form-body" data-test="'+tb+'">\n    <div class="amplify-form-header" data-test="'+eb+'">\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="!code_sent">\n      {{ this.amplifyService.i18n().get(\'You will receive a verification code\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="code_sent">\n      {{ this.amplifyService.i18n().get(\'Enter the code you received and set a new password\') }}\n    </div>\n    <amplify-auth-username-field-core\n      *ngIf="!code_sent"\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-core>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (keyup)="setCode(code.value)"\n        class="amplify-form-input"\n        type="text"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter code\') }}"\n        data-test="'+sb+'"\n      />\n      </div>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="password">\n        {{ this.amplifyService.i18n().get(\'New Password *\') }}\n      </label>\n      <input #password\n        (keyup)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        class="amplify-form-input"\n        type="password"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n        data-test="'+ab+'"\n      />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            *ngIf="!code_sent"\n            (click)="onSend()"\n            data-test="'+rb+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n          <button class="amplify-form-button"\n            *ngIf="code_sent"\n            (click)="onSubmit()"\n            data-test="'+nb+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Verify\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a\n              *ngIf="code_sent"\n              class="amplify-form-link"\n              (click)="onSend()"\n              data-test="'+ob+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Resend Code\') }}\n            </a>\n            <a\n              *ngIf="!code_sent"\n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+ib+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',Cw=(Object.defineProperty(Ew.prototype,"data",{set:function(e){this._authState=e.authState,this._show="forgotPassword"===e.authState.state,this._usernameAttributes=e.usernameAttributes,this.hide=e.hide?e.hide:this.hide,this.username=e.authState.user&&e.authState.user.username?e.authState.user.username:""},enumerable:!0,configurable:!0}),Ew.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Object.defineProperty(Ew.prototype,"authState",{set:function(e){this._authState=e,this._show="forgotPassword"===e.state,this.email=e.user&&e.user.email?e.user.email:"",this.country_code=e.user&&e.user.contry_code?e.user.country_code:"1",this.local_phone_number=e.user&&e.user.local_phone_number?e.user.local_phone_number:"",this.username=e.user&&e.user.username?e.user.username:""},enumerable:!0,configurable:!0}),Ew.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Object.defineProperty(Ew.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),Ew.prototype.setCode=function(e){this.code=e},Ew.prototype.setPassword=function(e){this.password=e},Ew.prototype.getforgotPwUsername=function(){switch(this._usernameAttributes){case Ob.EMAIL:return this.email;case Ob.PHONE_NUMBER:return bb(this.country_code,this.local_phone_number);default:return this.username}},Ew.prototype.onSend=function(){var t=this,e=this.getforgotPwUsername();e?this.amplifyService.auth().forgotPassword(e).then(function(){t.code_sent=!0}).catch(function(e){t._setError(e),t.code_sent=!1}):this.errorMessage="Username cannot be empty"},Ew.prototype.onSubmit=function(){var t=this;this.amplifyService.auth().forgotPasswordSubmit(this.getforgotPwUsername(),this.code,this.password).then(function(){var e={username:t.username};t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},Ew.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},Ew.prototype.onAlertClose=function(){this._setError(null)},Ew.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},Ew.prototype.getUsernameLabel=function(){return wb[this._usernameAttributes]||this._usernameAttributes},Ew.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},Ew.decorators=[{type:h.Component,args:[{selector:"amplify-auth-forgot-password-core",template:Sw}]}],Ew.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},Ew.propDecorators={data:[{type:h.Input}],hide:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}]},Ew);function Ew(e){this.amplifyService=e,this._usernameAttributes="username",this.code_sent=!1,this.country_code="1",this.hide=[],this.logger=this.amplifyService.logger("ForgotPasswordComponent")}var Iw,Aw,Pw='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+Xv+'"\n  >\n  <div class="amplify-form-body" data-test="'+tb+'">\n  <div\n    class="amplify-form-header amplify-form-header-ionic"\n    data-test="'+eb+'"\n    >\n    {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n  </div>\n  <div class="amplify-form-text" *ngIf="!code_sent">\n    {{ this.amplifyService.i18n().get(\'You will receive a verification code to reset your password\') }}\n  </div>\n\n  <ion-list>\n    <amplify-auth-username-field-ionic\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-ionic>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Code *\') }}\n      </ion-label>\n      <ion-input\n        #code\n        type="text"\n        class="amplify-form-input"\n        (keyup)="setCode(code.value)"\n        data-test="'+sb+'"\n      ></ion-input>\n    </ion-item>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Password *\') }}\n      </ion-label>\n      <ion-input\n        #password\n        type="password"\n        class="amplify-form-input"\n        (keyup)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        data-test="'+ab+'"\n      ></ion-input>\n    </ion-item>\n  </ion-list>\n  <div class="amplify-form-actions">\n    <div>\n      <ion-button expand="block" color="primary"\n        (click)="onSend()"\n        *ngIf="!code_sent"\n        data-test="'+nb+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Submit\') }}</ion-button>\n      <ion-button expand="block" color="primary"\n      *ngIf="code_sent"\n      (click)="onSubmit()"\n      >{{ this.amplifyService.i18n().get(\'Verify\') }}</ion-button>\n    </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a class="amplify-form-link" (click)="onSignIn()">\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSend()"\n          data-test="'+ob+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',kw=((Iw=function(e,t){return(Iw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Iw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Ow,Aw=Cw),Ow.prototype.onCodeChange=function(e){this.country_code=e},Ow.prototype.onNumberChange=function(e){this.local_phone_number=e},Ow.prototype.setUsername=function(e){this.username=e},Ow.prototype.setEmail=function(e){this.email=e},Ow.decorators=[{type:h.Component,args:[{selector:"amplify-auth-forgot-password-ionic",template:Pw}]}],Ow.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},Ow);function Ow(e){var t=Aw.call(this,e)||this;return t.amplifyService=e,t}var Tw=(xw.prototype.ngOnInit=function(){this.loadComponent()},xw.prototype.ngOnDestroy=function(){},xw.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new us(kw,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new us(Cw,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},xw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-forgot-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],xw.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},xw.propDecorators={framework:[{type:h.Input}],authState:[{type:h.Input}],usernameAttributes:[{type:h.Input}],hide:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[ss]}]},xw);function xw(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var Nw=function(){return(Nw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Uw='\n<div class="amplify-amplify-form-row amplify-signin-username">\n    <div *ngIf="this._usernameAttributes === \'email\'">\n        <label class="amplify-input-label" for="emailField"> {{ this.amplifyService.i18n().get(\'Email\') }} *</label>\n        <input\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setEmail($event.target.value)"\n            data-test="'+Dv+'"\n        />\n    </div>\n    <div *ngIf="this._usernameAttributes === \'phone_number\'">\n        <amplify-auth-phone-field-core\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-core>\n    </div>\n    <div *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <label class="amplify-input-label" for="usernameField"> {{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</label>\n        <input\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            value="{{this.username}}"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setUsername($event.target.value)"\n            data-test="'+Rv+'"\n        />\n    </div>\n</div>\n',Mw=(Object.defineProperty(Rw.prototype,"data",{set:function(e){this._usernameAttributes=e.usernameAttributes,this._placeholder=e.placeholder},enumerable:!0,configurable:!0}),Object.defineProperty(Rw.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),Object.defineProperty(Rw.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),Rw.prototype.ngOnInit=function(){if(window&&window.location&&window.location.search&&"email"!==this._usernameAttributes&&"phone_number"!==this._usernameAttributes){var e=new URLSearchParams(window.location.search),t=e?e.get("username"):void 0;this.setUsername(t),this.username=t}},Rw.prototype.ngOnDestroy=function(){},Rw.prototype.setUsername=function(e){this.usernameFieldChanged.emit({username:e})},Rw.prototype.setEmail=function(e){this.usernameFieldChanged.emit({email:e})},Rw.prototype.getUsernameLabel=function(){return wb[this._usernameAttributes]||this._usernameAttributes},Rw.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get(""+this.getUsernameLabel()||this._placeholder)},Rw.prototype.onPhoneFieldChanged=function(e){this.usernameFieldChanged.emit(Nw({},e))},Rw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-username-field-core",template:Uw}]}],Rw.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},Rw.propDecorators={data:[{type:h.Input}],usernameAttributes:[{type:h.Input}],placeholder:[{type:h.Input}],usernameFieldChanged:[{type:h.Output}]},Rw);function Rw(e){this.amplifyService=e,this._usernameAttributes=Ob.USERNAME,this._placeholder="",this.usernameFieldChanged=new h.EventEmitter,this.onPhoneFieldChanged=this.onPhoneFieldChanged.bind(this)}var Dw=[{countryCode:"US",value:"1",label:"USA (+1)"},{countryCode:"GB",value:"44",label:"UK (+44)"},{countryCode:"DZ",value:"213",label:"Algeria (+213)"},{countryCode:"AD",value:"376",label:"Andorra (+376)"},{countryCode:"AO",value:"244",label:"Angola (+244)"},{countryCode:"AI",value:"1264",label:"Anguilla (+1264)"},{countryCode:"AG",value:"1268",label:"Antigua & Barbuda (+1268)"},{countryCode:"AR",value:"54",label:"Argentina (+54)"},{countryCode:"AM",value:"374",label:"Armenia (+374)"},{countryCode:"AW",value:"297",label:"Aruba (+297)"},{countryCode:"AU",value:"61",label:"Australia (+61)"},{countryCode:"AT",value:"43",label:"Austria (+43)"},{countryCode:"AZ",value:"994",label:"Azerbaijan (+994)"},{countryCode:"BS",value:"1242",label:"Bahamas (+1242)"},{countryCode:"BH",value:"973",label:"Bahrain (+973)"},{countryCode:"BD",value:"880",label:"Bangladesh (+880)"},{countryCode:"BB",value:"1246",label:"Barbados (+1246)"},{countryCode:"BY",value:"375",label:"Belarus (+375)"},{countryCode:"BE",value:"32",label:"Belgium (+32)"},{countryCode:"BZ",value:"501",label:"Belize (+501)"},{countryCode:"BJ",value:"229",label:"Benin (+229)"},{countryCode:"BM",value:"1441",label:"Bermuda (+1441)"},{countryCode:"BT",value:"975",label:"Bhutan (+975)"},{countryCode:"BO",value:"591",label:"Bolivia (+591)"},{countryCode:"BA",value:"387",label:"Bosnia Herzegovina (+387)"},{countryCode:"BW",value:"267",label:"Botswana (+267)"},{countryCode:"BR",value:"55",label:"Brazil (+55)"},{countryCode:"BN",value:"673",label:"Brunei (+673)"},{countryCode:"BG",value:"359",label:"Bulgaria (+359)"},{countryCode:"BF",value:"226",label:"Burkina Faso (+226)"},{countryCode:"BI",value:"257",label:"Burundi (+257)"},{countryCode:"KH",value:"855",label:"Cambodia (+855)"},{countryCode:"CM",value:"237",label:"Cameroon (+237)"},{countryCode:"CA",value:"1",label:"Canada (+1)"},{countryCode:"CV",value:"238",label:"Cape Verde Islands (+238)"},{countryCode:"KY",value:"1345",label:"Cayman Islands (+1345)"},{countryCode:"CF",value:"236",label:"Central African Republic (+236)"},{countryCode:"CL",value:"56",label:"Chile (+56)"},{countryCode:"CN",value:"86",label:"China (+86)"},{countryCode:"CO",value:"57",label:"Colombia (+57)"},{countryCode:"KM",value:"269",label:"Comoros (+269)"},{countryCode:"CG",value:"242",label:"Congo (+242)"},{countryCode:"CK",value:"682",label:"Cook Islands (+682)"},{countryCode:"CR",value:"506",label:"Costa Rica (+506)"},{countryCode:"HR",value:"385",label:"Croatia (+385)"},{countryCode:"CU",value:"53",label:"Cuba (+53)"},{countryCode:"CW",value:"599",label:"Curacao (+599)"},{countryCode:"CY",value:"90392",label:"Cyprus North (+90392)"},{countryCode:"CY",value:"357",label:"Cyprus South (+357)"},{countryCode:"CZ",value:"420",label:"Czech Republic (+420)"},{countryCode:"DK",value:"45",label:"Denmark (+45)"},{countryCode:"DJ",value:"253",label:"Djibouti (+253)"},{countryCode:"DM",value:"1809",label:"Dominica (+1809)"},{countryCode:"DO",value:"1809",label:"Dominican Republic (+1809)"},{countryCode:"EC",value:"593",label:"Ecuador (+593)"},{countryCode:"EG",value:"20",label:"Egypt (+20)"},{countryCode:"SV",value:"503",label:"El Salvador (+503)"},{countryCode:"GQ",value:"240",label:"Equatorial Guinea (+240)"},{countryCode:"ER",value:"291",label:"Eritrea (+291)"},{countryCode:"EE",value:"372",label:"Estonia (+372)"},{countryCode:"ET",value:"251",label:"Ethiopia (+251)"},{countryCode:"FK",value:"500",label:"Falkland Islands (+500)"},{countryCode:"FO",value:"298",label:"Faroe Islands (+298)"},{countryCode:"FJ",value:"679",label:"Fiji (+679)"},{countryCode:"FI",value:"358",label:"Finland (+358)"},{countryCode:"FR",value:"33",label:"France (+33)"},{countryCode:"GF",value:"594",label:"French Guiana (+594)"},{countryCode:"PF",value:"689",label:"French Polynesia (+689)"},{countryCode:"GA",value:"241",label:"Gabon (+241)"},{countryCode:"GM",value:"220",label:"Gambia (+220)"},{countryCode:"GE",value:"7880",label:"Georgia (+7880)"},{countryCode:"DE",value:"49",label:"Germany (+49)"},{countryCode:"GH",value:"233",label:"Ghana (+233)"},{countryCode:"GI",value:"350",label:"Gibraltar (+350)"},{countryCode:"GR",value:"30",label:"Greece (+30)"},{countryCode:"GL",value:"299",label:"Greenland (+299)"},{countryCode:"GD",value:"1473",label:"Grenada (+1473)"},{countryCode:"GP",value:"590",label:"Guadeloupe (+590)"},{countryCode:"GU",value:"671",label:"Guam (+671)"},{countryCode:"GT",value:"502",label:"Guatemala (+502)"},{countryCode:"GN",value:"224",label:"Guinea (+224)"},{countryCode:"GW",value:"245",label:"Guinea - Bissau (+245)"},{countryCode:"GY",value:"592",label:"Guyana (+592)"},{countryCode:"HT",value:"509",label:"Haiti (+509)"},{countryCode:"HN",value:"504",label:"Honduras (+504)"},{countryCode:"HK",value:"852",label:"Hong Kong (+852)"},{countryCode:"HU",value:"36",label:"Hungary (+36)"},{countryCode:"IS",value:"354",label:"Iceland (+354)"},{countryCode:"IN",value:"91",label:"India (+91)"},{countryCode:"ID",value:"62",label:"Indonesia (+62)"},{countryCode:"IR",value:"98",label:"Iran (+98)"},{countryCode:"IQ",value:"964",label:"Iraq (+964)"},{countryCode:"IE",value:"353",label:"Ireland (+353)"},{countryCode:"IL",value:"972",label:"Israel (+972)"},{countryCode:"IT",value:"39",label:"Italy (+39)"},{countryCode:"JM",value:"1876",label:"Jamaica (+1876)"},{countryCode:"JP",value:"81",label:"Japan (+81)"},{countryCode:"JO",value:"962",label:"Jordan (+962)"},{countryCode:"KZ",value:"7",label:"Kazakhstan (+7)"},{countryCode:"KE",value:"254",label:"Kenya (+254)"},{countryCode:"KI",value:"686",label:"Kiribati (+686)"},{countryCode:"KP",value:"850",label:"Korea North (+850)"},{countryCode:"KR",value:"82",label:"Korea South (+82)"},{countryCode:"KW",value:"965",label:"Kuwait (+965)"},{countryCode:"KG",value:"996",label:"Kyrgyzstan (+996)"},{countryCode:"LA",value:"856",label:"Laos (+856)"},{countryCode:"LV",value:"371",label:"Latvia (+371)"},{countryCode:"LB",value:"961",label:"Lebanon (+961)"},{countryCode:"LS",value:"266",label:"Lesotho (+266)"},{countryCode:"LR",value:"231",label:"Liberia (+231)"},{countryCode:"LY",value:"218",label:"Libya (+218)"},{countryCode:"LI",value:"417",label:"Liechtenstein (+417)"},{countryCode:"LT",value:"370",label:"Lithuania (+370)"},{countryCode:"LU",value:"352",label:"Luxembourg (+352)"},{countryCode:"MO",value:"853",label:"Macao (+853)"},{countryCode:"MK",value:"389",label:"Macedonia (+389)"},{countryCode:"MG",value:"261",label:"Madagascar (+261)"},{countryCode:"MW",value:"265",label:"Malawi (+265)"},{countryCode:"MY",value:"60",label:"Malaysia (+60)"},{countryCode:"MV",value:"960",label:"Maldives (+960)"},{countryCode:"ML",value:"223",label:"Mali (+223)"},{countryCode:"MT",value:"356",label:"Malta (+356)"},{countryCode:"MH",value:"692",label:"Marshall Islands (+692)"},{countryCode:"MQ",value:"596",label:"Martinique (+596)"},{countryCode:"MR",value:"222",label:"Mauritania (+222)"},{countryCode:"YT",value:"269",label:"Mayotte (+269)"},{countryCode:"MX",value:"52",label:"Mexico (+52)"},{countryCode:"FM",value:"691",label:"Micronesia (+691)"},{countryCode:"MD",value:"373",label:"Moldova (+373)"},{countryCode:"MC",value:"377",label:"Monaco (+377)"},{countryCode:"MN",value:"976",label:"Mongolia (+976)"},{countryCode:"MS",value:"1664",label:"Montserrat (+1664)"},{countryCode:"MA",value:"212",label:"Morocco (+212)"},{countryCode:"MZ",value:"258",label:"Mozambique (+258)"},{countryCode:"MN",value:"95",label:"Myanmar (+95)"},{countryCode:"NA",value:"264",label:"Namibia (+264)"},{countryCode:"NR",value:"674",label:"Nauru (+674)"},{countryCode:"NP",value:"977",label:"Nepal (+977)"},{countryCode:"NL",value:"31",label:"Netherlands (+31)"},{countryCode:"NC",value:"687",label:"New Caledonia (+687)"},{countryCode:"NZ",value:"64",label:"New Zealand (+64)"},{countryCode:"NI",value:"505",label:"Nicaragua (+505)"},{countryCode:"NE",value:"227",label:"Niger (+227)"},{countryCode:"NG",value:"234",label:"Nigeria (+234)"},{countryCode:"NU",value:"683",label:"Niue (+683)"},{countryCode:"NF",value:"672",label:"Norfolk Islands (+672)"},{countryCode:"NP",value:"670",label:"Northern Marianas (+670)"},{countryCode:"NO",value:"47",label:"Norway (+47)"},{countryCode:"OM",value:"968",label:"Oman (+968)"},{countryCode:"PW",value:"680",label:"Palau (+680)"},{countryCode:"PA",value:"507",label:"Panama (+507)"},{countryCode:"PG",value:"675",label:"Papua New Guinea (+675)"},{countryCode:"PY",value:"595",label:"Paraguay (+595)"},{countryCode:"PE",value:"51",label:"Peru (+51)"},{countryCode:"PH",value:"63",label:"Philippines (+63)"},{countryCode:"PL",value:"48",label:"Poland (+48)"},{countryCode:"PT",value:"351",label:"Portugal (+351)"},{countryCode:"PR",value:"1787",label:"Puerto Rico (+1787)"},{countryCode:"QA",value:"974",label:"Qatar (+974)"},{countryCode:"RE",value:"262",label:"Reunion (+262)"},{countryCode:"RO",value:"40",label:"Romania (+40)"},{countryCode:"RU",value:"7",label:"Russia (+7)"},{countryCode:"RW",value:"250",label:"Rwanda (+250)"},{countryCode:"SM",value:"378",label:"San Marino (+378)"},{countryCode:"ST",value:"239",label:"Sao Tome & Principe (+239)"},{countryCode:"SA",value:"966",label:"Saudi Arabia (+966)"},{countryCode:"SN",value:"221",label:"Senegal (+221)"},{countryCode:"CS",value:"381",label:"Serbia (+381)"},{countryCode:"SC",value:"248",label:"Seychelles (+248)"},{countryCode:"SL",value:"232",label:"Sierra Leone (+232)"},{countryCode:"SX",value:"1",label:"Sint Maarten (+1)"},{countryCode:"SG",value:"65",label:"Singapore (+65)"},{countryCode:"SK",value:"421",label:"Slovak Republic (+421)"},{countryCode:"SI",value:"386",label:"Slovenia (+386)"},{countryCode:"SB",value:"677",label:"Solomon Islands (+677)"},{countryCode:"SO",value:"252",label:"Somalia (+252)"},{countryCode:"ZA",value:"27",label:"South Africa (+27)"},{countryCode:"ES",value:"34",label:"Spain (+34)"},{countryCode:"LK",value:"94",label:"Sri Lanka (+94)"},{countryCode:"SH",value:"290",label:"St. Helena (+290)"},{countryCode:"KN",value:"1869",label:"St. Kitts (+1869)"},{countryCode:"SC",value:"1758",label:"St. Lucia (+1758)"},{countryCode:"SD",value:"249",label:"Sudan (+249)"},{countryCode:"SR",value:"597",label:"Suriname (+597)"},{countryCode:"SZ",value:"268",label:"Swaziland (+268)"},{countryCode:"SE",value:"46",label:"Sweden (+46)"},{countryCode:"CH",value:"41",label:"Switzerland (+41)"},{countryCode:"SI",value:"963",label:"Syria (+963)"},{countryCode:"TW",value:"886",label:"Taiwan (+886)"},{countryCode:"TJ",value:"7",label:"Tajikstan (+7)"},{countryCode:"TH",value:"66",label:"Thailand (+66)"},{countryCode:"TG",value:"228",label:"Togo (+228)"},{countryCode:"TO",value:"676",label:"Tonga (+676)"},{countryCode:"TT",value:"1868",label:"Trinidad & Tobago (+1868)"},{countryCode:"TN",value:"216",label:"Tunisia (+216)"},{countryCode:"TR",value:"90",label:"Turkey (+90)"},{countryCode:"TM",value:"7",label:"Turkmenistan (+7)"},{countryCode:"TM",value:"993",label:"Turkmenistan (+993)"},{countryCode:"TC",value:"1649",label:"Turks & Caicos Islands (+1649)"},{countryCode:"TV",value:"688",label:"Tuvalu (+688)"},{countryCode:"UG",value:"256",label:"Uganda (+256)"},{countryCode:"UA",value:"380",label:"Ukraine (+380)"},{countryCode:"AE",value:"971",label:"United Arab Emirates (+971)"},{countryCode:"UY",value:"598",label:"Uruguay (+598)"},{countryCode:"UZ",value:"7",label:"Uzbekistan (+7)"},{countryCode:"VU",value:"678",label:"Vanuatu (+678)"},{countryCode:"VA",value:"379",label:"Vatican City (+379)"},{countryCode:"VE",value:"58",label:"Venezuela (+58)"},{countryCode:"VN",value:"84",label:"Vietnam (+84)"},{countryCode:"VG",value:"84",label:"Virgin Islands - British (+1284)"},{countryCode:"VI",value:"84",label:"Virgin Islands - US (+1340)"},{countryCode:"WF",value:"681",label:"Wallis and Futuna (+681)"},{countryCode:"YE",value:"969",label:"Yemen (North) (+969)"},{countryCode:"YE",value:"967",label:"Yemen (South) (+967)"},{countryCode:"ZM",value:"260",label:"Zambia (+260)"},{countryCode:"ZW",value:"263",label:"Zimbabwe (+263)"}],Fw='\n<div>\n    <label class="amplify-input-label" for="localPhoneNumberField">\n        {{ this.amplifyService.i18n().get(this._label) }}\n        <span *ngIf="_required">*</span>\n    </label>\n    <div class="amplify-input-group">\n        <div class="amplify-input-group-item">\n            <select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [(ngModel)]="_country_code"\n            (change)="setCountryCode($event.target.value)"\n            data-test="'+Lv+'"\n            >\n            <option *ngFor="let country of _countries"\n                value={{country.value}}>\n                {{country.label}}\n            </option>\n            </select>\n        </div>\n        <div class="amplify-input-group-item">\n            <input\n                #localPhoneNumberField\n                class="amplify-form-input"\n                placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n                name="local_phone_number"\n                type="tel"\n                (keyup)="setLocalPhoneNumber($event.target.value)"\n                data-test="'+Fv+'"\n            />\n        </div>\n    </div>\n</div>\n',Lw=(Object.defineProperty(jw.prototype,"data",{set:function(e){this._placeholder=e.placeholder||this._placeholder,this._label=e.label||this._label,this._country_code=e.defaultCountryCode||this._country_code,this._required=void 0===e.required?this._required:e.required},enumerable:!0,configurable:!0}),Object.defineProperty(jw.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(jw.prototype,"label",{set:function(e){this._label=e},enumerable:!0,configurable:!0}),Object.defineProperty(jw.prototype,"required",{set:function(e){this._required=e},enumerable:!0,configurable:!0}),Object.defineProperty(jw.prototype,"defaultCountryCode",{set:function(e){this._country_code=e},enumerable:!0,configurable:!0}),jw.prototype.ngOnInit=function(){},jw.prototype.ngOnDestroy=function(){},jw.prototype.setCountryCode=function(e){this._country_code=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},jw.prototype.setLocalPhoneNumber=function(e){this._local_phone_number=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},jw.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get("Enter your phone number")},jw.decorators=[{type:h.Component,args:[{selector:"amplify-auth-phone-field-core",template:Fw}]}],jw.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},jw.propDecorators={data:[{type:h.Input}],placeholder:[{type:h.Input}],label:[{type:h.Input}],required:[{type:h.Input}],defaultCountryCode:[{type:h.Input}],phoneFieldChanged:[{type:h.Output}]},jw);function jw(e){this.amplifyService=e,this._placeholder="",this._label="Phone Number",this._required=!0,this._country_code="1",this._local_phone_number="",this.phoneFieldChanged=new h.EventEmitter,this._countries=Dw}var Bw=(Vw.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getList(this._path,this._options)},Vw.prototype.onImageSelected=function(e){this.selected.emit(e)},Object.defineProperty(Vw.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(Vw.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(Vw.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),Vw.prototype.getList=function(e,t){var n=this;e&&this.amplifyService.storage().list(e,t).then(function(e){n.list=e.map(function(e){return{path:e.key}})}).catch(function(e){return console.error(e)})},Vw.decorators=[{type:h.Component,args:[{selector:"amplify-s3-album-core",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      [options]="_options"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],Vw.ctorParameters=function(){return[{type:rv}]},Vw.propDecorators={selected:[{type:h.Output}],data:[{type:h.Input}],path:[{type:h.Input}],options:[{type:h.Input}]},Vw);function Vw(e){this.amplifyService=e,this._options={},this.selected=new h.EventEmitter,this.logger=this.amplifyService.logger("S3AlbumComponent")}var qw,zw,Hw=((qw=function(e,t){return(qw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}qw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Kw,zw=Bw),Kw.decorators=[{type:h.Component,args:[{selector:"amplify-s3-album-ionic",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],Kw.ctorParameters=function(){return[{type:rv}]},Kw);function Kw(e){var t=zw.call(this,e)||this;return t.amplifyService=e,t}var Gw=(Ww.prototype.ngOnInit=function(){this.loadComponent()},Ww.prototype.ngOnDestroy=function(){},Ww.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new us(Hw,{path:this.path,options:this.options}):new us(Bw,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();var o=r.createComponent(n);o.instance.data=e.data,o.instance.selected.subscribe(function(e){t.selected.emit(e)})},Ww.decorators=[{type:h.Component,args:[{selector:"amplify-s3-album",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],Ww.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},Ww.propDecorators={framework:[{type:h.Input}],path:[{type:h.Input}],options:[{type:h.Input}],selected:[{type:h.Output}],componentHost:[{type:h.ViewChild,args:[ss]}]},Ww);function Ww(e){this.componentFactoryResolver=e,this.selected=new h.EventEmitter}var $w=(Object.defineProperty(Jw.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(Jw.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(Jw.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),Jw.prototype.ngOnInit=function(){if(this._path){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getImage(this._path,this._options)}},Jw.prototype.onImageClicked=function(){this.selected.emit(this.url)},Jw.prototype.getImage=function(e,t){var n=this;this.amplifyService.storage().get(e,t).then(function(e){return n.url=e}).catch(function(e){return console.error(e)})},Jw.decorators=[{type:h.Component,args:[{selector:"amplify-s3-image-core",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],Jw.ctorParameters=function(){return[{type:rv}]},Jw.propDecorators={selected:[{type:h.Output}],data:[{type:h.Input}],path:[{type:h.Input}],options:[{type:h.Input}]},Jw);function Jw(e){this.amplifyService=e,this._options={},this.selected=new h.EventEmitter,this.logger=this.amplifyService.logger("S3ImageComponent")}var Yw,Zw,Qw=((Yw=function(e,t){return(Yw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Yw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Xw,Zw=$w),Xw.decorators=[{type:h.Component,args:[{selector:"amplify-s3-image-ionic",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],Xw.ctorParameters=function(){return[{type:rv}]},Xw);function Xw(e){var t=Zw.call(this,e)||this;return t.amplifyService=e,t}var e_=(t_.prototype.ngOnInit=function(){this.loadComponent()},t_.prototype.ngOnDestroy=function(){},t_.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new us(Qw,{path:this.path,options:this.options}):new us($w,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();var o=r.createComponent(n);o.instance.data=e.data,o.instance.selected.subscribe(function(e){t.selected.emit(e)})},t_.decorators=[{type:h.Component,args:[{selector:"amplify-s3-image",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],t_.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},t_.propDecorators={framework:[{type:h.Input}],path:[{type:h.Input}],options:[{type:h.Input}],selected:[{type:h.Output}],componentHost:[{type:h.ViewChild,args:[ss]}]},t_);function t_(e){this.componentFactoryResolver=e,this.selected=new h.EventEmitter}var n_=(Object.defineProperty(r_.prototype,"url",{set:function(e){this.photoUrl=e,this.hasPhoto=!0},enumerable:!0,configurable:!0}),Object.defineProperty(r_.prototype,"storageOptions",{set:function(e){this._storageOptions=Object.assign(this._storageOptions,e)},enumerable:!0,configurable:!0}),Object.defineProperty(r_.prototype,"path",{set:function(e){this.s3ImagePath=e},enumerable:!0,configurable:!0}),Object.defineProperty(r_.prototype,"data",{set:function(e){this.photoUrl=e.url,this.s3ImagePath=e.path,this._storageOptions=Object.assign(this._storageOptions,e.storageOptions),this.hasPhoto=!0},enumerable:!0,configurable:!0}),r_.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider")},r_.prototype.pick=function(e){var t=e.target.files[0];if(t){this._storageOptions.contentType||(this._storageOptions.contentType=t.type),t.name,t.size,t.type,this.picked.emit(t),this.s3ImagePath=this.s3ImagePath+"/"+t.name,this.s3ImageFile=t;var n=this,r=new FileReader;r.onload=function(e){var t=e.target.result;n.photoUrl=t,n.hasPhoto=!0,n.loaded.emit(t)},r.readAsDataURL(t)}},r_.prototype.uploadFile=function(){var t=this;this.uploading=!0,this.amplifyService.storage().put(this.s3ImagePath,this.s3ImageFile,this._storageOptions).then(function(e){t.uploaded.emit(e),t.completeFileUpload()}).catch(function(e){t.completeFileUpload(e)})},r_.prototype.completeFileUpload=function(e){if(e)return this._setError(e);this.s3ImagePath="",this.photoUrl=null,this.s3ImageFile=null,this.uploading=!1},r_.prototype.onPhotoError=function(){this.hasPhoto=!1},r_.prototype.onAlertClose=function(){this._setError(null)},r_.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},r_.decorators=[{type:h.Component,args:[{selector:"amplify-photo-picker-core",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],r_.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},r_.propDecorators={url:[{type:h.Input}],storageOptions:[{type:h.Input}],path:[{type:h.Input}],data:[{type:h.Input}],picked:[{type:h.Output}],loaded:[{type:h.Output}],uploaded:[{type:h.Output}]},r_);function r_(e){this.amplifyService=e,this.hasPhoto=!1,this.uploading=!1,this.s3ImageFile=null,this.s3ImagePath="",this._storageOptions={},this.picked=new h.EventEmitter,this.loaded=new h.EventEmitter,this.uploaded=new h.EventEmitter,this.logger=this.amplifyService.logger("PhotoPickerComponent")}var o_,i_,s_=((o_=function(e,t){return(o_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(a_,i_=n_),a_.decorators=[{type:h.Component,args:[{selector:"amplify-photo-picker-ionic",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],a_.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},a_);function a_(e){var t=i_.call(this,e)||this;return t.amplifyService=e,t}var u_=(c_.prototype.ngOnInit=function(){this.loadComponent()},c_.prototype.ngOnDestroy=function(){},c_.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new us(s_,{url:this.url,path:this.path,storageOptions:this.storageOptions}):new us(n_,{url:this.url,path:this.path,storageOptions:this.storageOptions}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();var o=r.createComponent(n);o.instance.data=e.data,o.instance.picked.subscribe(function(e){t.picked.emit(e)}),o.instance.loaded.subscribe(function(e){t.loaded.emit(e)}),o.instance.uploaded.subscribe(function(e){t.uploaded.emit(e)})},c_.decorators=[{type:h.Component,args:[{selector:"amplify-photo-picker",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],c_.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},c_.propDecorators={framework:[{type:h.Input}],url:[{type:h.Input}],path:[{type:h.Input}],storageOptions:[{type:h.Input}],picked:[{type:h.Output}],loaded:[{type:h.Output}],uploaded:[{type:h.Output}],componentHost:[{type:h.ViewChild,args:[ss]}]},c_);function c_(e){this.componentFactoryResolver=e,this.picked=new h.EventEmitter,this.loaded=new h.EventEmitter,this.uploaded=new h.EventEmitter}function l_(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function p_(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}require("./aws-lex-audio.js");var d_={INITIAL:{MESSAGE:"Type your message or click  ðŸŽ¤",ICON:"ðŸŽ¤"},LISTENING:{MESSAGE:"Listening... click ðŸ”´ again to cancel",ICON:"ðŸ”´"},SENDING:{MESSAGE:"Please wait...",ICON:"ðŸ”Š"},SPEAKING:{MESSAGE:"Speaking...",ICON:"..."}},h_={silenceDetectionConfig:{time:2e3,amplitude:.2}},f_=(Object.defineProperty(m_.prototype,"data",{set:function(e){this.botName=e.bot,this.chatTitle=e.title,this.clearComplete=e.clearComplete,this.conversationModeOn=!$l(e.conversationModeOn)&&e.conversationModeOn,this.voiceEnabled=!$l(e.voiceEnabled)&&e.voiceEnabled,this.textEnabled=!!$l(e.textEnabled)||e.textEnabled,this.voiceConfig=e.voiceConfig||this.voiceConfig,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(this.botName,this.performOnComplete),!this.textEnabled&&this.voiceEnabled&&(this.currentVoiceState="Click the mic button",d_.INITIAL.MESSAGE="Click the mic button"),!this.voiceEnabled&&this.textEnabled&&(this.currentVoiceState="Type a message",d_.INITIAL.MESSAGE="Type a message"),this.voiceEnabled&&(this.audioControl=new LexAudio.audioControl)},enumerable:!0,configurable:!0}),Object.defineProperty(m_.prototype,"bot",{set:function(e){this.botName=e,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(e,this.performOnComplete)},enumerable:!0,configurable:!0}),Object.defineProperty(m_.prototype,"title",{set:function(e){this.chatTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(m_.prototype,"clearOnComplete",{set:function(e){this.clearComplete=e},enumerable:!0,configurable:!0}),m_.prototype.ngOnInit=function(){if(!this.amplifyService.interactions())throw new Error("Interactions module not registered on AmplifyService provider")},m_.prototype.performOnComplete=function(e){this.complete.emit(e),this.clearComplete&&(this.messages=[])},m_.prototype.onInputChange=function(e){this.inputText=e},m_.prototype.onSubmit=function(e){var t=this;if(this.inputText){var n={me:this.inputText,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""};this.amplifyService.interactions().send(this.botName,this.inputText).then(function(e){t.inputText="",n.bot=e.message,n.botSentTime=(new Date).toLocaleTimeString(),t.messages.push(n)}).catch(function(e){return t.logger.error(e)})}},m_.prototype.reset=function(){this.audioControl.clear(),this.inputText="",this.currentVoiceState=d_.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=d_.INITIAL.ICON,this.continueConversation=!1,this.micButtonDisabled=!1,this.ref.detectChanges()},m_.prototype.onError=function(e){this.logger.error(e)},m_.prototype.lexResponseHandler=function(){return l_(this,void 0,void 0,function(){var t,n,r;return p_(this,function(e){switch(e.label){case 0:return this.continueConversation?(t={content:this.audioInput,options:{messageType:"voice"}},[4,this.amplifyService.interactions().send(this.botName,t)]):[2];case 1:return n=e.sent(),this.lexResponse=n,this.currentVoiceState=d_.SPEAKING.MESSAGE,this.micText=d_.SPEAKING.ICON,this.micButtonDisabled=!0,r={me:this.lexResponse.inputTranscript,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.inputText="",r.bot=this.lexResponse.message,r.botSentTime=(new Date).toLocaleTimeString(),this.messages.push(r),this.doneSpeakingHandler(),this.ref.detectChanges(),[2]}})})},m_.prototype.doneSpeakingHandler=function(){var e=this;this.continueConversation&&("audio/mpeg"===this.lexResponse.contentType?this.audioControl.play(this.lexResponse.audioStream,function(){"ReadyForFulfillment"!==e.lexResponse.dialogState&&"Fulfilled"!==e.lexResponse.dialogState&&"Failed"!==e.lexResponse.dialogState&&e.conversationModeOn?(e.currentVoiceState=d_.LISTENING.MESSAGE,e.micText=d_.LISTENING.ICON,e.micButtonDisabled=!1,e.audioControl.startRecording(e.onSilenceHandler,null,e.voiceConfig.silenceDetectionConfig)):(e.inputDisabled=!1,e.currentVoiceState=d_.INITIAL.MESSAGE,e.micText=d_.INITIAL.ICON,e.micButtonDisabled=!1,e.continueConversation=!1),e.ref.detectChanges()}):(this.inputDisabled=!1,this.currentVoiceState=d_.INITIAL.MESSAGE,this.micText=d_.INITIAL.ICON,this.micButtonDisabled=!1,this.continueConversation=!1,this.ref.detectChanges()))},m_.prototype.micButtonHandler=function(){return l_(this,void 0,void 0,function(){return p_(this,function(e){return this.continueConversation?this.reset():(this.inputDisabled=!0,this.continueConversation=!0,this.currentVoiceState=d_.LISTENING.MESSAGE,this.micText=d_.LISTENING.ICON,this.micButtonDisabled=!1,this.audioControl.startRecording(this.onSilenceHandler,null,this.voiceConfig.silenceDetectionConfig)),this.ref.detectChanges(),[2]})})},m_.decorators=[{type:h.Component,args:[{selector:"amplify-interactions-core",template:'\n<div class="amplify-interactions">\n\t<div class="amplify-interactions-container">\n\t\t<div class="amplify-form-container">\n\t\t\t<div class="amplify-form-row">\n\t\t\t\t<div class="amplify-interactions-conversation">\n\t\t\t\t\t<div *ngFor="let message of messages">\n\t\t\t\t\t\t<div class="amplify-interactions-input">{{message.me}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-input-timestamp">{{message.meSentTime}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response">{{message.bot}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response-timestamp">{{message.botSentTime}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="amplify-interactions-actions">\n\t\t\t\t<input #inputValue\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[value]="inputText"\n\t\t\t\t\t(keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t\t(change)="onInputChange($event.target.value)"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\t*ngIf="textEnabled">\n\t\t\t\t<input #inputValue\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t\t*ngIf="!textEnabled">\n\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t\t>\n\t\t\t\t\t{{micText}}\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="textEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\tclass="amplify-interactions-button"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\tng-click="!inputDisabled || onSubmit(inputValue.value)"\n\t\t\t\t></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'}]}],m_.ctorParameters=function(){return[{type:h.ChangeDetectorRef},{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},m_.propDecorators={complete:[{type:h.Output}],data:[{type:h.Input}],bot:[{type:h.Input}],title:[{type:h.Input}],clearOnComplete:[{type:h.Input}]},m_);function m_(e,t){var n=this;this.amplifyService=t,this.inputText="",this.clearComplete=!1,this.messages=[],this.completions={},this.currentVoiceState=d_.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=d_.INITIAL.ICON,this.voiceConfig=h_,this.continueConversation=!1,this.micButtonDisabled=!1,this.conversationModeOn=!1,this.voiceEnabled=!1,this.textEnabled=!0,this.complete=new h.EventEmitter,this.onSilenceHandler=function(){n.continueConversation&&(n.audioControl.exportWAV(function(e){n.currentVoiceState=d_.SENDING.MESSAGE,n.audioInput=e,n.micText=d_.SENDING.ICON,n.micButtonDisabled=!0,n.lexResponseHandler()}),n.ref.detectChanges())},this.ref=e,this.continueConversation=!1,this.logger=this.amplifyService.logger("ChatbotComponent")}var g_,y_,v_=((g_=function(e,t){return(g_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}g_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(b_,y_=f_),b_.decorators=[{type:h.Component,args:[{selector:"amplify-interactions-ionic",template:'\n<div class="amplify-interactions-container">\n\t<div class="amplify-form-container">\n\t\t<ion-grid>\n\t\t\t<ion-row *ngIf="chatTitle"> \n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t\t<ion-label>{{chatTitle}}</ion-label>\n\t\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t\t<ion-row *ngFor="let message of messages">\n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<ion-chip style="float:right">\n\t\t\t\t\t\t\t\t<ion-label>{{message.me}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t<ion-label>{{message.bot}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t</ion-grid>\n\t\t<div class="amplify-form-row">\n\t\t    <ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t        class="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t        placeholder="{{currentVoiceState}}"\n\t\t        [value]="inputText"\n\t\t        (keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t(ionChange)="onInputChange($event.target.value)"\n\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t*ngIf="textEnabled"></ion-input>\n\t\t\t<ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t\t\tclass="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t*ngIf="!textEnabled"></ion-input>\n\t\t\t<ion-button \n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t>\n\t\t\t\t{{micText}}\n\t\t\t</ion-button>\n\t\t\t<ion-button\n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="textEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="inputDisabled === false || onSubmit(inputValue.value)"\n\t\t\t>\n\t\t\t\tSend\n\t\t\t</ion-button>\n\t\t</div>\n\t</div>\n</div>\n'}]}],b_.ctorParameters=function(){return[{type:h.ChangeDetectorRef},{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},b_);function b_(e,t){var n=y_.call(this,e,t)||this;return n.amplifyService=t,n}var w_=(__.prototype.ngOnInit=function(){this.loadComponent()},__.prototype.ngOnDestroy=function(){},__.prototype.loadComponent=function(){var t=this,e={bot:this.bot,title:this.title,clearComplete:this.clearComplete,conversationModeOn:this.conversationModeOn,voiceConfig:this.voiceConfig,voiceEnabled:this.voiceEnabled,textEnabled:this.textEnabled},n=this.framework&&"ionic"===this.framework.toLowerCase()?new us(v_,e):new us(f_,e),r=this.componentFactoryResolver.resolveComponentFactory(n.component),o=this.componentHost.viewContainerRef;o.clear();var i=o.createComponent(r);i.instance.data=n.data,i.instance.complete.subscribe(function(e){t.complete.emit(e)})},__.decorators=[{type:h.Component,args:[{selector:"amplify-interactions",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],__.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},__.propDecorators={framework:[{type:h.Input}],bot:[{type:h.Input}],title:[{type:h.Input}],clearComplete:[{type:h.Input}],conversationModeOn:[{type:h.Input}],voiceConfig:[{type:h.Input}],voiceEnabled:[{type:h.Input}],textEnabled:[{type:h.Input}],complete:[{type:h.Output}],componentHost:[{type:h.ViewChild,args:[ss]}]},__);function __(e){this.componentFactoryResolver=e,this.complete=new h.EventEmitter}var S_=(Object.defineProperty(C_.prototype,"title",{set:function(e){this.title=e},enumerable:!0,configurable:!0}),C_.decorators=[{type:h.Component,args:[{selector:"amplify-form",template:'\n<div class="amplify-form">\n  <div class="form-header">\n    <div class="form-title">{{ title }}</div>\n  </div>\n  <div class="form-body">\n    <ng-content select="[form-body]"></ng-content>\n  </div>\n  <div class="form-footer">\n    <ng-content select="[form-footer]"></ng-content>\n  </div>\n</div>\n'}]}],C_.propDecorators={title:[{type:h.Input}]},C_);function C_(){}function E_(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((u=u.apply(e,s||[])).next())})}function I_(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var A_=(Object.defineProperty(P_.prototype,"data",{set:function(e){this.sceneName=e.sceneName},enumerable:!0,configurable:!0}),P_.prototype.ngOnInit=function(){if(document.addEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this)),!this.amplifyService.xr())throw new Error("XR module not registered on AmplifyService provider");this.loadAndStartScene()},P_.prototype.ngOnDestroy=function(){document.removeEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this))},P_.prototype.loadAndStartScene=function(){return E_(this,void 0,void 0,function(){var t,n,r=this;return I_(this,function(e){switch(e.label){case 0:this.loading=!0,t={progressCallback:this.progressCallback},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.amplifyService.xr().loadScene(this.sceneName,"sumerian-scene-dom-id",t)];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),this.sceneError="Failed to load scene",this.logger.error(this.sceneError,n),[2];case 4:return this.amplifyService.xr().start(this.sceneName),this.loading=!1,this.muted=this.amplifyService.xr().isMuted(this.sceneName),this.isVRCapable=this.amplifyService.xr().isVRCapable(this.sceneName),this.isVRPresentationActive=this.amplifyService.xr().isVRPresentationActive(this.sceneName),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioEnabled",function(){return r.showEnableAudio=!1}),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioDisabled",function(){return r.showEnableAudio=!0}),[2]}})})},P_.prototype.setMuted=function(e){this.muted=e,this.amplifyService.xr().setMuted(this.sceneName,e),this.showEnableAudio&&(this.amplifyService.xr().enableAudio(this.sceneName),this.showEnableAudio=!1)},P_.prototype.toggleVRPresentation=function(){try{this.isVRPresentationActive?this.amplifyService.xr().exitVR(this.sceneName):this.amplifyService.xr().enterVR(this.sceneName)}catch(e){return void this.logger.error("Unable to start/stop WebVR System: "+e.message)}this.isVRPresentationActive=!this.isVRPresentationActive},P_.prototype.onFullscreenChange=function(){var e=document;this.isFullscreen=null!==e.fullscreenElement},P_.prototype.maximize=function(){return E_(this,void 0,void 0,function(){var t;return I_(this,function(e){return((t=document.getElementById("sumerian-scene-container")).requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen).call(t),[2]})})},P_.prototype.minimize=function(){return E_(this,void 0,void 0,function(){var t;return I_(this,function(e){return(t=document).exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen(),[2]})})},P_.decorators=[{type:h.Component,args:[{selector:"sumerian-scene-core",template:'\n<div id="sumerian-scene-container" class={{amplifyUI.sumerianSceneContainer}} data-test="sumerian-scene-container">\n  <div id="sumerian-scene-dom-id" class={{amplifyUI.sumerianScene}} data-test="sumerian-scene">\n    <sumerian-scene-loading-core *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} sceneError={{sceneError}} data-test="sumerian-scene-loading"></sumerian-scene-loading-core>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="sumerian-scene-bar">\n    <span class={{amplifyUI.sceneActions}} data-test="sumerian-scene-actions">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n'}]}],P_.ctorParameters=function(){return[{type:rv}]},P_.propDecorators={sceneName:[{type:h.Input}],data:[{type:h.Input}]},P_);function P_(e){var n=this;this.amplifyService=e,this.loading=!1,this.loadPercentage=0,this.muted=!1,this.showEnableAudio=!1,this.isVRCapable=!1,this.isVRPresentationActive=!1,this.isFullscreen=!1,this.sceneError=null,this.progressCallback=function(e){var t=100*e;n.loadPercentage=t},this.amplifyUI=Z,this.logger=this.amplifyService.logger("SumerianSceneComponentCore")}var k_,O_,T_=((k_=function(e,t){return(k_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}k_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(x_,O_=A_),x_.decorators=[{type:h.Component,args:[{selector:"sumerian-scene-ionic",template:'\n<div id="sumerian-scene-container" [ngClass]="amplifyUI.sumerianSceneContainer" data-test="sumerian-scene-container">\n  <div id="sumerian-scene-dom-id" [class]="amplifyUI.sumerianScene" data-test="sumerian-scene">\n    <sumerian-scene-loading-ionic *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} data-test="sumerian-scene-loading"></sumerian-scene-loading-ionic>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="sumerian-scene-bar">\n    <span class={{amplifyUI.sceneActions}} data-test="sumerian-scene-actions">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n'}]}],x_.ctorParameters=function(){return[{type:rv}]},x_);function x_(e){var t=O_.call(this,e)||this;return t.amplifyService=e,t}var N_=(U_.prototype.ngOnInit=function(){this.loadComponent()},U_.prototype.ngOnDestroy=function(){},U_.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new us(T_,{sceneName:this.sceneName}):new us(A_,{sceneName:this.sceneName}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},U_.decorators=[{type:h.Component,args:[{selector:"amplify-sumerian-scene",template:"\n\t\t<ng-template component-host></ng-template>\n\t"}]}],U_.ctorParameters=function(){return[{type:h.ComponentFactoryResolver}]},U_.propDecorators={framework:[{type:h.Input}],sceneName:[{type:h.Input}],componentHost:[{type:h.ViewChild,args:[ss]}]},U_);function U_(e){this.componentFactoryResolver=e}var M_=(R_.decorators=[{type:h.Component,args:[{selector:"sumerian-scene-loading-core",template:'\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="sumerian-scene-loading-logo">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="sumerian-scene-loading-scene-name">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="sumerian-scene-error-text">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="sumerian-scene-loading-bar">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]="{ \'width\': loadPercentage + \'%\' }"></div>\n    </div>\n  </div>\n</div>\n'}]}],R_.ctorParameters=function(){return[]},R_.propDecorators={loadPercentage:[{type:h.Input}],sceneName:[{type:h.Input}],sceneError:[{type:h.Input}]},R_);function R_(){this.AmplifyUI=Z}function D_(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}var F_=[pv,iv,gb,cb,xb,Sb,Vb,Mb,ew,Wb,lw,rw,ww,hw,Tw,Cw,Mw,Lw,Gw,Bw,e_,$w,u_,n_,w_,f_,S_,N_,A_,M_],L_=(j_.decorators=[{type:h.NgModule,args:[{imports:[t.CommonModule,rs],declarations:D_([ss],F_),entryComponents:D_(F_),providers:[],exports:D_(F_)}]}],j_);function j_(){}var B_,V_,q_='\n<ion-grid class="amplify-ionic-grid-padding-left">\n    <ion-row>\n        <ion-col size="6" class="amplify-ionic-grid-padding-left">\n            <ion-label class="amplify-input-label push-right"\n                position="stacked" \n                for="localPhoneNumberField">\n                {{ this.amplifyService.i18n().get(this._label) }}\n                <span *ngIf="_required">*</span>\n            </ion-label>\n            <ion-select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [value]="_country_code"\n            (ionChange)="setCountryCode($event.target.value)"\n            data-test="'+Lv+'">\n            <ion-select-option *ngFor="let country of _countries"\n            value={{country.value}}>\n                {{country.label}}\n            </ion-select-option>\n            </ion-select>\n        </ion-col>\n        <ion-col size="6">\n            <ion-label class="amplify-input-label push-right">&nbsp;</ion-label>\n            <ion-input\n            #localPhoneNumberField\n            class="amplify-form-input-phone-ionic"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            name="local_phone_number"\n            type="tel"\n            (ionChange)="setLocalPhoneNumber($event.target.value)"\n            data-test="'+Fv+'"\n            ></ion-input>\n        </ion-col>\n    </ion-row>\n</ion-grid>',z_=((B_=function(e,t){return(B_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}B_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(H_,V_=Lw),H_.decorators=[{type:h.Component,args:[{selector:"amplify-auth-phone-field-ionic",template:q_}]}],H_.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},H_);function H_(e){var t=V_.call(this,e)||this;return t.amplifyService=e,t}var K_,G_,W_='\n\n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'email\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="emailField" position="stacked">{{ this.amplifyService.i18n().get(\'Email *\') }}</ion-label>\n        <ion-input type="text"\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setEmail($event.target.value)"\n            data-test="'+Dv+'"\n        ></ion-input>\n    </ion-item> \n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'phone_number\'">\n       <amplify-auth-phone-field-ionic\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-ionic>\n    </ion-item>\n    <ion-item lines="none" *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="usernameField" position="stacked">{{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</ion-label>\n        <ion-input type="text"\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setUsername($event.target.value)"\n            data-test="'+Rv+'"\n        ></ion-input>\n    </ion-item>\n\n',$_=((K_=function(e,t){return(K_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}K_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(J_,G_=Mw),J_.decorators=[{type:h.Component,args:[{selector:"amplify-auth-username-field-ionic",template:W_}]}],J_.ctorParameters=function(){return[{type:rv,decorators:[{type:h.Inject,args:[rv]}]}]},J_);function J_(e){var t=G_.call(this,e)||this;return t.amplifyService=e,t}var Y_,Z_,Q_=((Y_=function(e,t){return(Y_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Y_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(X_,Z_=M_),X_.decorators=[{type:h.Component,args:[{selector:"sumerian-scene-loading-ionic",template:'\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="sumerian-scene-loading-logo">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="sumerian-scene-loading-scene-name">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="sumerian-scene-error-text">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="sumerian-scene-loading-bar">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]="{ \'width\': loadPercentage + \'%\' }"></div>\n    </div>\n  </div>\n</div>\n'}]}],X_.ctorParameters=function(){return[]},X_);function X_(){return Z_.call(this)||this}function eS(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}var tS=[cv,fb,Pb,kw,vw,jb,Qb,$_,z_,uw,s_,Hw,Qw,v_,T_,Q_],nS=(rS.decorators=[{type:h.NgModule,args:[{imports:[t.CommonModule,rs],declarations:eS(tS),entryComponents:eS(tS),providers:[rv],schemas:[h.CUSTOM_ELEMENTS_SCHEMA],exports:eS(tS)}]}],rS);function rS(){}e.AmplifyAngularModule=L_,e.AmplifyIonicModule=nS,e.AmplifyModules=function(e){return new rv(e)},e.AmplifyService=rv,Object.defineProperty(e,"__esModule",{value:!0})});